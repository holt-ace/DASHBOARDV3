const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/CalendarView-CVYikX2H.js","assets/vendor-Dx9LGgEc.js","assets/charts-CmGcY8O5.js","assets/charts-CIGW-MKW.css","assets/KanbanBoard-DlrLZQ94.js","assets/TimelineView-By6m8i9H.js","assets/GeographicMap-DYaEOUa3.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,s,a)=>((t,s,a)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:a}):t[s]=a)(t,"symbol"!=typeof s?s+"":s,a);import{j as s,N as a,C as r,L as i,D as n,a as l,F as o,I as c,B as d,u,r as h,b as m,R as x,c as p,d as g,e as j,f as b,g as f,h as y,i as v,k as N,l as w,m as D,P as S,T as C,M as k,A as I,n as E,o as P,S as O,p as T,q as M,s as A,t as L,v as F,w as R,x as B,y as q,z as V}from"./vendor-Dx9LGgEc.js";import{s as $,a as H,l as U,m as G,c as Y,b as z,C as _,r as W,d as Q}from"./charts-CmGcY8O5.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const K=()=>s.jsx(a,{bg:"primary",variant:"dark",expand:"lg",className:"app-header py-2",children:s.jsxs(r,{fluid:!0,children:[s.jsxs(a.Brand,{as:i,to:"/dashboard",className:"me-4",children:[s.jsx("i",{className:"bi bi-box me-2"}),"PO Management System"]}),s.jsxs("div",{className:"d-flex",children:[s.jsx(a.Toggle,{"aria-controls":"app-navbar",className:"me-2"}),s.jsxs(n,{align:"end",children:[s.jsx(n.Toggle,{variant:"link",id:"dropdown-profile",className:"text-white p-0",children:s.jsx("div",{className:"avatar-circle bg-white text-primary",children:s.jsx("span",{children:"AJ"})})}),s.jsxs(n.Menu,{children:[s.jsxs(n.Item,{children:[s.jsx("i",{className:"bi bi-person me-2"}),"Profile"]}),s.jsxs(n.Item,{children:[s.jsx("i",{className:"bi bi-gear me-2"}),"Settings"]}),s.jsx(n.Divider,{}),s.jsxs(n.Item,{children:[s.jsx("i",{className:"bi bi-box-arrow-right me-2"}),"Sign Out"]})]})]})]}),s.jsxs(a.Collapse,{id:"app-navbar",children:[s.jsxs(l,{className:"me-auto",children:[s.jsxs(l.Link,{as:i,to:"/dashboard",children:[s.jsx("i",{className:"bi bi-speedometer2 me-1"}),"Dashboard"]}),s.jsxs(l.Link,{as:i,to:"/purchase-orders",children:[s.jsx("i",{className:"bi bi-file-text me-1"}),"Purchase Orders"]}),s.jsxs(l.Link,{as:i,to:"/planning-hub",children:[s.jsx("i",{className:"bi bi-calendar3 me-1"}),"Planning Hub"]}),s.jsxs(l.Link,{as:i,to:"/metrics",children:[s.jsx("i",{className:"bi bi-graph-up me-1"}),"Metrics"]})]}),s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx(o,{className:"d-none d-lg-flex me-3",children:s.jsxs(c,{children:[s.jsx(o.Control,{placeholder:"Search PO#, Supplier...","aria-label":"Search",size:"sm"}),s.jsx(d,{variant:"outline-light",size:"sm",children:s.jsx("i",{className:"bi bi-search"})})]})}),s.jsxs(n,{align:"end",className:"me-3",children:[s.jsxs(n.Toggle,{variant:"link",id:"dropdown-notifications",className:"text-white p-0",children:[s.jsx("i",{className:"bi bi-bell fs-5"}),s.jsx("span",{className:"notification-badge",children:"3"})]}),s.jsxs(n.Menu,{className:"dropdown-menu-lg",children:[s.jsx(n.Header,{children:"You have 3 new notifications"}),s.jsx(n.Divider,{}),s.jsx(n.Item,{children:s.jsxs("div",{className:"notification-item",children:[s.jsx("div",{className:"icon bg-primary",children:s.jsx("i",{className:"bi bi-truck"})}),s.jsxs("div",{className:"content",children:[s.jsx("div",{className:"title",children:"PO123456 has been shipped"}),s.jsx("div",{className:"time",children:"5 minutes ago"})]})]})}),s.jsx(n.Item,{children:s.jsxs("div",{className:"notification-item",children:[s.jsx("div",{className:"icon bg-warning",children:s.jsx("i",{className:"bi bi-exclamation-triangle"})}),s.jsxs("div",{className:"content",children:[s.jsx("div",{className:"title",children:"PO654321 requires attention"}),s.jsx("div",{className:"time",children:"1 hour ago"})]})]})}),s.jsx(n.Item,{children:s.jsxs("div",{className:"notification-item",children:[s.jsx("div",{className:"icon bg-success",children:s.jsx("i",{className:"bi bi-check-circle"})}),s.jsxs("div",{className:"content",children:[s.jsx("div",{className:"title",children:"PO789012 has been delivered"}),s.jsx("div",{className:"time",children:"Yesterday"})]})]})}),s.jsx(n.Divider,{}),s.jsx(n.Item,{className:"text-center",children:"View All Notifications"})]})]}),s.jsxs(d,{variant:"light",size:"sm",className:"fw-bold",children:[s.jsx("i",{className:"bi bi-plus-lg me-2"}),s.jsx(i,{to:"/purchase-orders/create",className:"text-decoration-none text-dark",children:"New PO"})]})]})]})]})}),X=()=>{const e=u(),[t,a]=h.useState(!1);return s.jsxs("div",{className:"app-sidebar "+(t?"collapsed":""),children:[s.jsxs("div",{className:"sidebar-header d-flex justify-content-between align-items-center p-3",children:[!t&&s.jsx("h5",{className:"m-0",children:"Navigation"}),s.jsx(d,{variant:"link",className:"p-1 text-secondary border-0",onClick:()=>{a(!t)},"aria-label":t?"Expand sidebar":"Collapse sidebar",children:s.jsx("i",{className:"bi "+(t?"bi-chevron-right":"bi-chevron-left")})})]}),s.jsxs(l,{className:"flex-column p-2",as:"ul",children:[s.jsx(l.Item,{as:"li",children:s.jsxs(m,{to:"/dashboard",className:({isActive:e})=>"nav-link d-flex align-items-center "+(e?"active":""),children:[s.jsx("i",{className:"bi bi-speedometer2 me-3"}),!t&&s.jsx("span",{children:"Dashboard"})]})}),s.jsx(l.Item,{as:"li",children:s.jsxs(m,{to:"/purchase-orders",className:({isActive:t})=>{return"nav-link d-flex align-items-center "+(t||(s="/purchase-orders",e.pathname.startsWith(s))?"active":"");var s},children:[s.jsx("i",{className:"bi bi-file-text me-3"}),!t&&s.jsx("span",{children:"Purchase Orders"})]})}),s.jsx(l.Item,{as:"li",children:s.jsxs(m,{to:"/planning-hub",className:({isActive:e})=>"nav-link d-flex align-items-center "+(e?"active":""),children:[s.jsx("i",{className:"bi bi-calendar3 me-3"}),!t&&s.jsx("span",{children:"Planning Hub"})]})}),s.jsx(l.Item,{as:"li",children:s.jsxs(m,{to:"/metrics",className:({isActive:e})=>"nav-link d-flex align-items-center "+(e?"active":""),children:[s.jsx("i",{className:"bi bi-graph-up me-3"}),!t&&s.jsx("span",{children:"Metrics & Analytics"})]})}),!t&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"sidebar-divider my-3"}),s.jsx("div",{className:"sidebar-heading px-3 py-2 text-muted text-uppercase small",children:"Quick Actions"}),s.jsx(l.Item,{as:"li",children:s.jsxs(m,{to:"/purchase-orders/create",className:({isActive:e})=>"nav-link d-flex align-items-center "+(e?"active":""),children:[s.jsx("i",{className:"bi bi-plus-circle me-3"}),s.jsx("span",{children:"Create New PO"})]})}),s.jsx(l.Item,{as:"li",children:s.jsxs(m,{to:"/reports",className:({isActive:e})=>"nav-link d-flex align-items-center "+(e?"active":""),children:[s.jsx("i",{className:"bi bi-file-earmark-bar-graph me-3"}),s.jsx("span",{children:"Reports"})]})}),s.jsx("div",{className:"sidebar-divider my-3"}),s.jsx("div",{className:"sidebar-heading px-3 py-2 text-muted text-uppercase small",children:"Support"}),s.jsx(l.Item,{as:"li",children:s.jsxs(m,{to:"/help",className:({isActive:e})=>"nav-link d-flex align-items-center "+(e?"active":""),children:[s.jsx("i",{className:"bi bi-question-circle me-3"}),s.jsx("span",{children:"Help & Documentation"})]})}),s.jsx(l.Item,{as:"li",children:s.jsxs(m,{to:"/settings",className:({isActive:e})=>"nav-link d-flex align-items-center "+(e?"active":""),children:[s.jsx("i",{className:"bi bi-gear me-3"}),s.jsx("span",{children:"Settings"})]})})]})]}),!t&&s.jsx("div",{className:"sidebar-footer p-3 mt-auto",children:s.jsxs("div",{className:"d-flex align-items-center bg-light p-2 rounded",children:[s.jsx("div",{className:"avatar-circle bg-primary text-white me-3",children:s.jsx("span",{children:"AJ"})}),s.jsxs("div",{children:[s.jsx("div",{className:"fw-bold",children:"Alex Johnson"}),s.jsx("div",{className:"text-muted small",children:"Procurement Manager"})]})]})})]})},Z=()=>{const e=(new Date).getFullYear();return s.jsx("footer",{className:"app-footer bg-light mt-auto py-3 border-top",children:s.jsx(r,{children:s.jsxs(x,{className:"align-items-center g-3",children:[s.jsx(p,{md:4,className:"text-center text-md-start",children:s.jsxs("div",{className:"d-flex flex-column",children:[s.jsx("span",{className:"fw-bold mb-1",children:"PO Management System"}),s.jsx("span",{className:"text-muted small",children:"Version 1.2.3"})]})}),s.jsx(p,{md:4,className:"text-center",children:s.jsxs("ul",{className:"list-inline mb-0",children:[s.jsx("li",{className:"list-inline-item",children:s.jsx(i,{to:"/help",className:"text-decoration-none text-muted",children:"Help"})}),s.jsx("li",{className:"list-inline-item",children:"•"}),s.jsx("li",{className:"list-inline-item",children:s.jsx(i,{to:"/privacy",className:"text-decoration-none text-muted",children:"Privacy"})}),s.jsx("li",{className:"list-inline-item",children:"•"}),s.jsx("li",{className:"list-inline-item",children:s.jsx(i,{to:"/terms",className:"text-decoration-none text-muted",children:"Terms"})})]})}),s.jsx(p,{md:4,className:"text-center text-md-end",children:s.jsxs("span",{className:"text-muted small",children:["© ",e," Company, Inc. All rights reserved."]})})]})})})};class J{static initialize(){if(!this.instance){const e={baseURL:this.API_BASE_URL,timeout:3e4,withCredentials:!0};this.instance=g.create(e),this.instance.interceptors.request.use((e=>(console.log("[API] Using base URL:",e.baseURL),e)),(e=>Promise.reject(e))),this.instance.interceptors.response.use((e=>e),(e=>{const t=this.handleApiError(e);return Promise.reject(new Error(t))}))}}static handleApiError(e){if(e.response){const t=e.response.data;return t.message||t.error||`Error: ${e.response.status} ${e.response.statusText}`}return e.request?"No response received from server. Please check your connection and try again.":e.message||"An unexpected error occurred"}static buildQueryParams(e){const t=new URLSearchParams;for(const[s,a]of Object.entries(e))null!=a&&""!==a&&(Array.isArray(a)?a.forEach((e=>t.append(s,String(e)))):t.append(s,String(a)));return t}static async fetchPOs(e={}){this.initialize();const t={limit:this.PAGE_SIZE,offset:((e.page||1)-1)*this.PAGE_SIZE,...e},s=`/search?${this.buildQueryParams(t).toString()}`;try{const t=await this.instance.get(s);return Array.isArray(t.data)?{data:t.data,metadata:{total:t.data.length,page:e.page||1,pages:Math.ceil(t.data.length/this.PAGE_SIZE),limit:this.PAGE_SIZE}}:t.data.data&&t.data.metadata?t.data:{data:[t.data],metadata:{total:1,page:1,pages:1,limit:this.PAGE_SIZE}}}catch(a){throw console.error("Error fetching POs:",a),a instanceof Error?a:new Error("Failed to fetch purchase orders")}}static async fetchPO(e){this.initialize(),console.log("Fetching PO details for:",e),console.log("API URL:",`${this.API_BASE_URL}/${e}`);try{const t=await this.instance.get(`/${e}`);return console.log("PO details response:",t.data),t.data}catch(t){throw t instanceof Error?t:new Error(`Failed to fetch PO ${e}`)}}static async createPO(e){this.initialize();try{return(await this.instance.post("",e)).data}catch(t){throw t instanceof Error?t:new Error("Failed to create purchase order")}}static async updatePO(e,t){this.initialize();try{return(await this.instance.put(`/${e}`,t)).data}catch(s){throw s instanceof Error?s:new Error(`Failed to update PO ${e}`)}}static async deletePO(e){this.initialize();try{await this.instance.delete(`/${e}`)}catch(t){throw t instanceof Error?t:new Error(`Failed to delete PO ${e}`)}}static async updateStatus(e,t,s="",a){this.initialize();try{return(await this.instance.patch(`/${e}/status`,{status:t,notes:s,oldStatus:a})).data}catch(r){throw r instanceof Error?r:new Error(`Failed to update status for PO ${e}`)}}static async getStatuses(){this.initialize();try{console.log("Fetching statuses from URL:",`${this.API_BASE_URL}/statuses`);return(await this.instance.get("/statuses")).data}catch(e){throw e instanceof Error?e:new Error("Failed to fetch statuses")}}static async getInitialStatus(){this.initialize();try{return(await this.instance.get("/statuses/initial")).data}catch(e){throw e instanceof Error?e:new Error("Failed to fetch initial status")}}static async getStatus(e){this.initialize();try{return(await this.instance.get(`/statuses/${e}`)).data}catch(t){throw t instanceof Error?t:new Error(`Failed to fetch status ${e}`)}}static async getAvailableTransitions(e){this.initialize();const t=`/statuses/${e}/transitions`;console.log("Fetching transitions for status URL:",`${this.API_BASE_URL}${t}`);try{return(await this.instance.get(t)).data}catch(s){throw s instanceof Error?s:new Error(`Failed to fetch transitions for status ${e}`)}}static async validateTransition(e,t,s){this.initialize();try{return(await this.instance.post("/validateTransition",{from:e,to:t,data:s})).data}catch(a){throw a instanceof Error?a:new Error("Failed to validate transition")}}static async transition(e){this.initialize();try{return(await this.instance.post("/transition",e)).data}catch(t){throw t instanceof Error?t:new Error("Failed to execute transition")}}static async fetchMetrics(e={}){this.initialize();try{const t=this.buildQueryParams(e),s=t.toString()?`?${t.toString()}`:"";return(await this.instance.get(this.METRICS_PATH+s)).data}catch(t){throw console.error("Error fetching metrics:",t),t instanceof Error?t:new Error("Failed to fetch metrics")}}static async getMetricsSummary(e={}){this.initialize();try{const t=this.buildQueryParams(e);return(await this.instance.get(`${this.METRICS_PATH}/summary?${t.toString()}`)).data}catch(t){throw console.error("Error fetching metrics summary:",t),t instanceof Error?t:new Error("Failed to fetch metrics summary")}}static async fetchDetailedMetrics(e={}){this.initialize();try{const t=this.buildQueryParams(e),s=t.toString()?`?${t.toString()}`:"";return(await this.instance.get(`${this.METRICS_PATH}/detailed${s}`)).data}catch(t){throw console.error("Error fetching detailed metrics:",t),t instanceof Error?t:new Error("Failed to fetch detailed metrics")}}static async getDetailedMetrics(e={}){this.initialize();try{const t=this.buildQueryParams(e);return(await this.instance.get(`${this.METRICS_PATH}/detailed?${t.toString()}`)).data}catch(t){throw console.error("Error fetching detailed metrics:",t),t instanceof Error?t:new Error("Failed to fetch detailed metrics")}}static async bulkUpdateStatus(e,t){this.initialize();try{return(await this.instance.post("/bulk-operations",{poNumbers:e,operation:"status",status:t})).data}catch(s){throw s instanceof Error?s:new Error("Failed to perform bulk status update")}}static async fetchCategoryMetrics(e){this.initialize();try{return(await this.instance.get(`${this.METRICS_PATH}/${e}`)).data}catch(t){throw t instanceof Error?t:new Error("Failed to fetch category metrics")}}static async uploadFile(e,t={}){this.initialize();try{const s=new FormData;s.append("file",e),Object.entries(t).forEach((([e,t])=>{s.append(e,"string"==typeof t?t:JSON.stringify(t))}));return(await this.instance.post("/upload",s,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(s){throw s instanceof Error?s:new Error("Failed to upload file")}}}t(J,"instance"),t(J,"PAGE_SIZE",10),t(J,"API_BASE_URL","/api/po".replace(/\/+$/,"")),t(J,"METRICS_PATH","/metrics");const ee={items:[],filteredItems:[],loading:!1,error:null,pagination:{page:1,totalPages:1,totalItems:0,itemsPerPage:10},filters:{query:"",status:"",startDate:null,endDate:null,buyerIds:[],locationIds:[]},selectedItems:[],batchOperations:{processing:!1}},te=j("poList/fetchPurchaseOrders",(async(e,{rejectWithValue:t})=>{console.log("Fetching purchase orders with direct database connection...");try{try{console.log("Attempting to fetch POs from MongoDB...");const t=await J.fetchPOs({...e,limit:e.limit||100});if(t.data&&t.data.length>0){console.log(`Successfully found ${t.data.length} purchase orders in database`);const e=t.data.slice(0,5).map((e=>{var t;return(null==(t=e.header)?void 0:t.poNumber)||"unknown"}));return console.log("Sample PO Numbers from database:",e),t}return t}catch(s){console.error("Error fetching from MongoDB:",s),console.log("Falling back to API endpoint...");return await J.fetchPOs(e)}}catch(a){return console.error("Error in fetchPurchaseOrders:",a),t(a instanceof Error?a.message:"Failed to fetch purchase orders")}})),se=j("poList/deletePurchaseOrder",(async(e,{rejectWithValue:t,dispatch:s})=>{try{return await J.deletePO(e),s(te({})),e}catch(a){return t(a instanceof Error?a.message:"Failed to delete purchase order")}})),ae=j("poList/performBatchOperation",(async({poNumbers:e,operation:t,params:s},{rejectWithValue:a,dispatch:r})=>{try{if(0===e.length)throw new Error("No purchase orders selected");if("status"===t&&(null==s?void 0:s.status)){const t=await J.bulkUpdateStatus(e,s.status);return r(te({})),t}if("delete"===t){const t=await Promise.all(e.map((e=>J.deletePO(e))));return r(te({})),t}throw new Error(`Operation ${t} not implemented or missing required parameters`)}catch(i){return a(i instanceof Error?i.message:"Failed to perform batch operation")}})),re=b({name:"poList",initialState:ee,reducers:{setPage:(e,t)=>{e.pagination.page=t.payload},setSearchQuery:(e,t)=>{e.filters.query=t.payload,e.pagination.page=1},setStatusFilter:(e,t)=>{e.filters.status=t.payload,e.pagination.page=1},setDateRange:(e,t)=>{e.filters.startDate=t.payload.startDate,e.filters.endDate=t.payload.endDate,e.pagination.page=1},setBuyerIds:(e,t)=>{e.filters.buyerIds=t.payload,e.pagination.page=1},setLocationIds:(e,t)=>{e.filters.locationIds=t.payload,e.pagination.page=1},resetFilters:e=>{e.filters=ee.filters,e.pagination.page=1},toggleItemSelection:(e,t)=>{const s=t.payload,a=e.selectedItems.indexOf(s);-1===a?e.selectedItems.push(s):e.selectedItems.splice(a,1)},selectAllItems:(e,t)=>{t.payload?e.selectedItems=e.items.map((e=>e.header.poNumber)):e.selectedItems=[]}},extraReducers:e=>{e.addCase(te.pending,(e=>{e.loading=!0,e.error=null})).addCase(te.fulfilled,((e,t)=>{var s,a,r,i;e.loading=!1,Array.isArray(t.payload)?(e.items=t.payload,e.filteredItems=t.payload,e.pagination.totalItems=t.payload.length,e.pagination.totalPages=Math.ceil(t.payload.length/e.pagination.itemsPerPage)):(e.items=t.payload.data,e.filteredItems=t.payload.data,e.pagination.totalItems=(null==(s=t.payload.metadata)?void 0:s.total)||t.payload.data.length,e.pagination.totalPages=(null==(a=t.payload.metadata)?void 0:a.pages)||Math.ceil(((null==(r=t.payload.metadata)?void 0:r.total)||t.payload.data.length)/e.pagination.itemsPerPage),e.pagination.page=(null==(i=t.payload.metadata)?void 0:i.page)||e.pagination.page)})).addCase(te.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})).addCase(se.pending,(e=>{e.loading=!0,e.error=null})).addCase(se.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})).addCase(ae.pending,(e=>{e.batchOperations.processing=!0,e.error=null})).addCase(ae.fulfilled,(e=>{e.batchOperations.processing=!1,e.selectedItems=[]})).addCase(ae.rejected,((e,t)=>{e.batchOperations.processing=!1,e.error=t.payload}))}}),{setPage:ie,setSearchQuery:ne,setStatusFilter:le,setDateRange:oe,setBuyerIds:ce,setLocationIds:de,resetFilters:ue,toggleItemSelection:he,selectAllItems:me}=re.actions,xe=re.reducer,pe=j("poDetail/fetchPODetail",(async(e,{rejectWithValue:t})=>{try{const t=await J.fetchPO(e);let a=[];try{a=await J.getAvailableTransitions(t.header.status)}catch(s){console.warn("Could not fetch transitions, using empty array:",s)}return{purchaseOrder:t,transitions:a}}catch(a){return t(a instanceof Error?a.message:"Failed to fetch purchase order")}})),ge=j("poDetail/updatePO",(async({poNumber:e,updateData:t},{rejectWithValue:s})=>{try{return await J.updatePO(e,t)}catch(a){return s(a instanceof Error?a.message:"Failed to update purchase order")}})),je=j("poDetail/updatePOStatus",(async({poNumber:e,newStatus:t,notes:s,oldStatus:a},{rejectWithValue:r})=>{try{return await J.updateStatus(e,t,s,a)}catch(i){return r(i instanceof Error?i.message:"Failed to update purchase order status")}})),be=b({name:"poDetail",initialState:{purchaseOrder:null,loading:!1,error:null,availableTransitions:[]},reducers:{clearPODetail:e=>{e.purchaseOrder=null,e.loading=!1,e.error=null,e.availableTransitions=[]}},extraReducers:e=>{e.addCase(pe.pending,(e=>{e.loading=!0,e.error=null})).addCase(pe.fulfilled,((e,t)=>{e.loading=!1,e.purchaseOrder=t.payload.purchaseOrder,e.availableTransitions=t.payload.transitions})).addCase(pe.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})).addCase(ge.pending,(e=>{e.loading=!0,e.error=null})).addCase(ge.fulfilled,(e=>{e.loading=!1})).addCase(ge.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})).addCase(je.pending,(e=>{e.loading=!0,e.error=null})).addCase(je.fulfilled,((e,t)=>{e.loading=!1,e.purchaseOrder=t.payload})).addCase(je.rejected,((e,t)=>{e.loading=!1,e.error=t.payload}))}}),{clearPODetail:fe}=be.actions,ye=be.reducer,ve={calendarView:{viewMode:"month",currentDate:(new Date).toISOString(),highlightedStatus:null,displayMode:"delivery"},timelineView:{zoom:1,startDate:null,endDate:null,groupBy:"status",displayMode:"compact"},dashboardLayout:{panels:[],layout:"grid"},activeView:"dashboard",theme:"light"},Ne=b({name:"visualization",initialState:ve,reducers:{setActiveView:(e,t)=>{e.activeView=t.payload},setCalendarView:(e,t)=>{e.calendarView={...e.calendarView,...t.payload}},setTimelineView:(e,t)=>{e.timelineView={...e.timelineView,...t.payload}},addDashboardPanel:(e,t)=>{e.dashboardLayout.panels.push(t.payload)},removeDashboardPanel:(e,t)=>{e.dashboardLayout.panels=e.dashboardLayout.panels.filter((e=>e.id!==t.payload))},updatePanelSettings:(e,t)=>{const s=e.dashboardLayout.panels.find((e=>e.id===t.payload.id));s&&(s.settings={...s.settings,...t.payload.settings})},updatePanelPosition:(e,t)=>{const s=e.dashboardLayout.panels.find((e=>e.id===t.payload.id));s&&(s.position={...s.position,...t.payload.position})},setDashboardLayout:(e,t)=>{e.dashboardLayout.layout=t.payload},resetDashboard:e=>{e.dashboardLayout=ve.dashboardLayout},saveDashboardTemplate:()=>{},setTheme:(e,t)=>{e.theme=t.payload}}}),{setActiveView:we,setCalendarView:De,setTimelineView:Se,addDashboardPanel:Ce,removeDashboardPanel:ke,updatePanelSettings:Ie,updatePanelPosition:Ee,setDashboardLayout:Pe,resetDashboard:Oe,saveDashboardTemplate:Te,setTheme:Me}=Ne.actions,Ae=Ne.reducer;var Le=(e=>(e.UPLOADED="UPLOADED",e.CONFIRMED="CONFIRMED",e.SHIPPED="SHIPPED",e.INVOICED="INVOICED",e.DELIVERED="DELIVERED",e.CANCELLED="CANCELLED",e))(Le||{}),Fe=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e))(Fe||{});const Re={DEBUG:"#7B7B7B",INFO:"#0976DB",WARN:"#F5A623",ERROR:"#D0021B",RESET:""};function Be(e,t,...s){if(e<0)return;const a=Fe[e],r=Re[a]||Re.RESET,i=`%c[${a}]%c ${(new Date).toISOString().split("T")[1].split(".")[0]}:`;switch(e){case 0:case 1:console.log(i,`color: ${r}; font-weight: bold`,"",t,...s);break;case 2:console.warn(i,`color: ${r}; font-weight: bold`,"",t,...s);break;case 3:console.error(i,`color: ${r}; font-weight: bold`,"",t,...s)}}const qe={debug:(e,...t)=>Be(0,e,...t),info:(e,...t)=>Be(1,e,...t),warn:(e,...t)=>Be(2,e,...t),error:(e,...t)=>Be(3,e,...t),groupStart:(e,t=!1)=>{t?console.groupCollapsed(e):console.group(e)},groupEnd:()=>{console.groupEnd()},time:e=>{console.time(e)},timeEnd:e=>{console.timeEnd(e)}};const Ve={data:null,detailedData:null,loading:!1,error:null,filters:{startDate:null,endDate:null,statuses:[],buyerIds:[],locationIds:[]}};function $e(){return{statusDistribution:[],timeline:[],topBuyers:[],topLocations:[],topProducts:[],totalOrders:0,totalValue:0,averageOrderValue:0,onTimePercentage:0,forecast:{predictions:Array.from({length:7},((e,t)=>({date:new Date(Date.now()+24*t*60*60*1e3).toISOString().split("T")[0],value:5+5*Math.random()}))),confidenceInterval:{upper:[],lower:[]}},riskAssessment:{highRiskCount:3,mediumRiskCount:8,lowRiskCount:15}}}const He=j("metrics/fetchMetrics",(async(e,{getState:t})=>{try{qe.info("Fetching metrics data...");const e=t(),{filters:r}=e.metrics,i={startDate:r.startDate||void 0,endDate:r.endDate||void 0};try{qe.info("Attempting to fetch real POs to build metrics...");const e=await J.fetchPOs({limit:100,...i});if((null==e?void 0:e.data)&&Array.isArray(e.data)&&e.data.length>0){qe.info(`Using ${e.data.length} purchase orders to build metrics`);try{return function(e){if(!e||0===e.length)return{statusDistribution:[],timeline:[],topBuyers:[],topLocations:[],topProducts:[],totalOrders:0,totalValue:0,averageOrderValue:0,onTimePercentage:0};qe.info(`Building metrics from ${e.length} POs`);const t=e.reduce(((e,t)=>e+(t.totalCost||0)),0),s=t/e.length,a={};e.forEach((e=>{var t;const s=(null==(t=e.header)?void 0:t.status)||"UNKNOWN";a[s]=(a[s]||0)+1}));const r=Object.entries(a).map((([t,s])=>({status:t,count:s,percentage:Math.round(s/e.length*100)}))),i={};e.forEach((e=>{var t;if(null==(t=e.header)?void 0:t.orderDate){const t=new Date(e.header.orderDate).toISOString().split("T")[0];i[t]=(i[t]||0)+1}}));const n=Object.entries(i).map((([e,t])=>({date:e,count:t,status:void 0}))).sort(((e,t)=>e.date.localeCompare(t.date))),l={};e.forEach((e=>{var t,s,a,r;if((null==(s=null==(t=e.header)?void 0:t.buyerInfo)?void 0:s.firstName)&&(null==(r=null==(a=e.header)?void 0:a.buyerInfo)?void 0:r.lastName)){const t=`${e.header.buyerInfo.firstName} ${e.header.buyerInfo.lastName}`,s=t.replace(/\s+/g,"-").toLowerCase();l[s]||(l[s]={name:t,count:0,totalValue:0}),l[s].count++,l[s].totalValue+=e.totalCost||0}}));const o=Object.entries(l).map((([e,t])=>({id:e,name:t.name,count:t.count,totalValue:t.totalValue}))).sort(((e,t)=>t.totalValue-e.totalValue)).slice(0,5),c={};e.forEach((e=>{var t,s;if(null==(s=null==(t=e.header)?void 0:t.syscoLocation)?void 0:s.name){const t=e.header.syscoLocation.name,s=t.replace(/\s+/g,"-").toLowerCase();c[s]||(c[s]={name:t,count:0,totalValue:0}),c[s].count++,c[s].totalValue+=e.totalCost||0}}));const d=Object.entries(c).map((([e,t])=>({id:e,name:t.name,count:t.count,totalValue:t.totalValue}))).sort(((e,t)=>t.totalValue-e.totalValue)).slice(0,5),u={};e.forEach((e=>{e.products&&Array.isArray(e.products)&&e.products.forEach((e=>{e.supc&&(u[e.supc]||(u[e.supc]={description:e.description||"Unknown Product",quantity:0,totalValue:0}),u[e.supc].quantity+=e.quantity||0,u[e.supc].totalValue+=(e.fobCost||0)*(e.quantity||0))}))}));const h=Object.entries(u).map((([e,t])=>({supc:e,description:t.description,quantity:t.quantity,totalValue:t.totalValue}))).sort(((e,t)=>t.totalValue-e.totalValue)).slice(0,5),m=Math.round(e.filter((e=>{var t,s;return(null==(t=e.header)?void 0:t.status)===Le.DELIVERED&&((null==(s=e.delivery)?void 0:s.deliveryDate)||"")})).length/e.length*100);return{statusDistribution:r,timeline:n,topBuyers:o,topLocations:d,topProducts:h,totalOrders:e.length,totalValue:t,averageOrderValue:s,onTimePercentage:m||85}}(e.data)}catch(s){qe.error("Error building metrics from POs:",s)}}}catch(s){qe.error("Error fetching POs:",s)}try{qe.info("Fetching metrics from API...");const e=await J.fetchMetrics(i);if(e&&(e.data||e)){const t=e.data||e;qe.info("Transforming metrics data from API...");const s=((e,t=!1)=>{var s,a,r,i,n,l,o,c,d,u,h,m,x,p,g,j,b,f,y,v,N,w,D,S,C,k,I,E,P,O,T,M,A,L,F,R,B,q,V,$,H,U;if(!e)return qe.warn("transformMetricsData received null or undefined data"),$e();t&&qe.debug("Backend metrics structure:",JSON.stringify(e,null,2));try{const t=$e();(null==(a=null==(s=e.calendar)?void 0:s.status)?void 0:a.distribution)?t.statusDistribution=Object.entries(e.calendar.status.distribution).map((([e,t])=>({status:e,count:t,percentage:0}))):e.statuses&&(t.statusDistribution=Object.entries(e.statuses).map((([e,t])=>({status:e,count:"number"==typeof t?t:0,percentage:0}))));const G=t.statusDistribution.reduce(((e,t)=>e+t.count),0);if(t.statusDistribution.forEach((e=>{e.percentage=G>0?Math.round(e.count/G*100):0})),t.totalOrders=G,Array.isArray(null==(i=null==(r=e.calendar)?void 0:r.volume)?void 0:i.daily)){const s=e.calendar.volume.daily;t.timeline=s.map(((e,t)=>{const a=new Date;return a.setDate(a.getDate()-(s.length-t-1)),{date:a.toISOString().split("T")[0],count:e}}))}else if(null==(l=null==(n=e.calendar)?void 0:n.volume)?void 0:l.timeline){const s=e.calendar.volume.timeline;t.timeline=Object.entries(s).map((([e,t])=>({date:e,count:"number"==typeof t?t:0})))}else if(null==(c=null==(o=e.operational)?void 0:o.orders)?void 0:c.byDate){const s=e.operational.orders.byDate;t.timeline=Object.entries(s).map((([e,t])=>({date:e,count:"number"==typeof t?t:0})))}else e.timeline&&Array.isArray(e.timeline)&&(t.timeline=e.timeline);if(t.timeline.sort(((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime())),Array.isArray(null==(h=null==(u=null==(d=e.operational)?void 0:d.resources)?void 0:u.buyers)?void 0:h.list))t.topBuyers=e.operational.resources.buyers.list;else if(null==(m=e.operational)?void 0:m.buyers){const s=e.operational.buyers;t.topBuyers=Object.entries(s).map((([e,t])=>({id:e,name:t.name||e,count:t.count||0,totalValue:t.value||t.totalValue||0}))).sort(((e,t)=>t.totalValue-e.totalValue)).slice(0,5)}else e.buyers&&Array.isArray(e.buyers)&&(t.topBuyers=e.buyers);if(Array.isArray(null==(g=null==(p=null==(x=e.operational)?void 0:x.resources)?void 0:p.locations)?void 0:g.list))t.topLocations=e.operational.resources.locations.list;else if(null==(j=e.operational)?void 0:j.locations){const s=e.operational.locations;t.topLocations=Object.entries(s).map((([e,t])=>({id:e,name:t.name||e,count:t.count||0,totalValue:t.value||t.totalValue||0}))).sort(((e,t)=>t.totalValue-e.totalValue)).slice(0,5)}else e.locations&&Array.isArray(e.locations)&&(t.topLocations=e.locations);if(Array.isArray(null==(b=e.product)?void 0:b.rankings))t.topProducts=e.product.rankings;else if(null==(f=e.product)?void 0:f.items){const s=e.product.items;t.topProducts=Object.entries(s).map((([e,t])=>({supc:e,description:t.description||`Product ${e}`,quantity:t.quantity||0,totalValue:t.value||t.totalValue||0}))).sort(((e,t)=>t.totalValue-e.totalValue)).slice(0,5)}else e.products&&Array.isArray(e.products)&&(t.topProducts=e.products.slice(0,5));return t.totalOrders||(t.totalOrders=e.totalOrders||(null==(v=null==(y=e.financial)?void 0:y.sales)?void 0:v.total)||(null==(w=null==(N=e.operational)?void 0:N.orders)?void 0:w.total)||(null==(S=null==(D=e.calendar)?void 0:D.volume)?void 0:S.total)||0),t.totalValue=e.totalValue||(null==(k=null==(C=e.financial)?void 0:C.sales)?void 0:k.total)||(null==(E=null==(I=e.financial)?void 0:I.value)?void 0:E.total)||(null==(O=null==(P=e.operational)?void 0:P.value)?void 0:O.total)||0,t.averageOrderValue=e.averageOrderValue||(null==(M=null==(T=e.financial)?void 0:T.sales)?void 0:M.average)||(null==(L=null==(A=e.financial)?void 0:A.value)?void 0:L.average)||(t.totalOrders>0?t.totalValue/t.totalOrders:0),t.onTimePercentage=e.onTimePercentage||(null==(R=null==(F=e.calendar)?void 0:F.delivery)?void 0:R.performance)||(null==(q=null==(B=e.operational)?void 0:B.delivery)?void 0:q.onTime)||(null==($=null==(V=e.operational)?void 0:V.performance)?void 0:$.onTime)||0,e.forecast?t.forecast=e.forecast:(null==(H=e.predictive)?void 0:H.forecast)&&(t.forecast=e.predictive.forecast),e.riskAssessment?t.riskAssessment=e.riskAssessment:(null==(U=e.predictive)?void 0:U.risk)&&(t.riskAssessment={highRiskCount:e.predictive.risk.high||0,mediumRiskCount:e.predictive.risk.medium||0,lowRiskCount:e.predictive.risk.low||0}),t}catch(G){return qe.error("Error transforming metrics data:",G),$e()}})(t,!0);return qe.debug("Transformed metrics:",JSON.stringify(s,null,2)),s}}catch(a){qe.error("Error fetching from metrics API:",a)}}catch(r){return $e()}})),Ue=j("metrics/fetchDetailedMetrics",(async(e,{getState:t,rejectWithValue:s})=>{var a,r,i,n,l,o,c;try{qe.info("Fetching detailed metrics data...");const e=t(),{filters:s}=e.metrics,h={startDate:s.startDate||void 0,endDate:s.endDate||void 0};try{qe.info("Fetching detailed metrics from API...");const e=await J.fetchDetailedMetrics();if(e&&(e.data||e)){const t=e.data||e;return{processingTimes:{"Uploaded to Confirmed":(null==(a=t.processingTimes)?void 0:a.uploadToConfirm)||(null==(i=null==(r=t.operational)?void 0:r.efficiency)?void 0:i.processing)||1.2,"Confirmed to Shipped":(null==(n=t.processingTimes)?void 0:n.confirmToShip)||2.5,"Shipped to Invoiced":(null==(l=t.processingTimes)?void 0:l.shipToInvoice)||.8,"Invoiced to Delivered":(null==(o=t.processingTimes)?void 0:o.invoiceToDeliver)||1.4,total:(null==(c=t.processingTimes)?void 0:c.total)||(t.processingTimes?Object.values(t.processingTimes).filter((e=>"number"==typeof e)).reduce(((e,t)=>e+t),0):5.9)}}}}catch(d){qe.error("Error fetching detailed metrics:",d)}try{qe.info("Trying enhanced detailed metrics API...");const e=await J.getDetailedMetrics(h);if(e)return e}catch(u){qe.error("Error fetching enhanced detailed metrics:",u)}return{processingTimes:{"Uploaded to Confirmed":0,"Confirmed to Shipped":0,"Shipped to Invoiced":0,"Invoiced to Delivered":0,total:0}}}catch(h){return qe.error("Unhandled error in fetchDetailedMetrics:",h),s(h instanceof Error?h.message:"Failed to fetch detailed metrics")}})),Ge=b({name:"metrics",initialState:Ve,reducers:{setDateRange:(e,t)=>{e.filters.startDate=t.payload.startDate,e.filters.endDate=t.payload.endDate},setStatusFilter:(e,t)=>{e.filters.statuses=t.payload},setBuyerFilter:(e,t)=>{e.filters.buyerIds=t.payload},setLocationFilter:(e,t)=>{e.filters.locationIds=t.payload},resetFilters:e=>{e.filters=Ve.filters}},extraReducers:e=>{e.addCase(He.pending,(e=>{e.loading=!0,e.error=null})).addCase(He.fulfilled,((e,t)=>{e.loading=!1,e.data=t.payload||$e()})).addCase(He.rejected,((e,t)=>{e.loading=!1,e.error=t.payload})).addCase(Ue.pending,(e=>{e.loading=!0,e.error=null})).addCase(Ue.fulfilled,((e,t)=>{e.loading=!1,e.detailedData=t.payload})).addCase(Ue.rejected,((e,t)=>{e.loading=!1,e.error=t.payload}))}}),{setDateRange:Ye,setStatusFilter:ze,setBuyerFilter:_e,setLocationFilter:We,resetFilters:Qe}=Ge.actions,Ke=Ge.reducer,Xe=b({name:"ui",initialState:{loading:{global:!1,operations:{}},notifications:[],modal:null,sidebarCollapsed:!1,tourActive:!1,tourStep:0,globalSearch:""},reducers:{setGlobalLoading:(e,t)=>{e.loading.global=t.payload},setOperationLoading:(e,t)=>{e.loading.operations[t.payload.operation]=t.payload.loading},clearLoading:e=>{e.loading.global=!1,e.loading.operations={}},addNotification:(e,t)=>{const s=`notification-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;e.notifications.push({...t.payload,id:s,dismissible:!1!==t.payload.dismissible})},removeNotification:(e,t)=>{e.notifications=e.notifications.filter((e=>e.id!==t.payload))},clearNotifications:e=>{e.notifications=[]},openModal:(e,t)=>{e.modal=t.payload},closeModal:e=>{e.modal=null},updateModalData:(e,t)=>{e.modal&&(e.modal.data=t.payload)},toggleSidebar:e=>{e.sidebarCollapsed=!e.sidebarCollapsed},setSidebarCollapsed:(e,t)=>{e.sidebarCollapsed=t.payload},startTour:e=>{e.tourActive=!0,e.tourStep=0},setTourStep:(e,t)=>{e.tourStep=t.payload},endTour:e=>{e.tourActive=!1,e.tourStep=0},setGlobalSearch:(e,t)=>{e.globalSearch=t.payload}}}),{setGlobalLoading:Ze,setOperationLoading:Je,clearLoading:et,addNotification:tt,removeNotification:st,clearNotifications:at,openModal:rt,closeModal:it,updateModalData:nt,toggleSidebar:lt,setSidebarCollapsed:ot,startTour:ct,setTourStep:dt,endTour:ut,setGlobalSearch:ht}=Xe.actions,mt=f({reducer:{poList:xe,poDetail:ye,visualization:Ae,metrics:Ke,ui:Xe.reducer},devTools:!0,middleware:e=>e({serializableCheck:{ignoredActions:["poList/setDateRange"],ignoredPaths:["poList.filters.startDate","poList.filters.endDate"]}})}),xt=()=>y(),pt=()=>{var e;const t=xt(),{items:a,loading:n}=v((e=>e.poList)),{data:l,loading:o}=v((e=>e.metrics));h.useEffect((()=>{t(te({limit:4})),t(He())}),[t]);const c=e=>{switch(e){case"UPLOADED":return"warning";case"CONFIRMED":return"info";case"SHIPPED":return"primary";case"INVOICED":return"secondary";case"DELIVERED":return"success";case"CANCELLED":return"danger";default:return"light"}},u=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),m=e=>{if(!e)return"N/A";try{const t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(t)}catch(t){return"Invalid Date"}},g=(null==l?void 0:l.totalOrders)||a.length||0,j=(null==l?void 0:l.totalValue)||a.reduce(((e,t)=>e+(t.totalCost||0)),0),b=(null==l?void 0:l.onTimePercentage)||85,f=a.slice(0,4),y=(null==l?void 0:l.statusDistribution)||[];return s.jsxs(r,{fluid:!0,children:[s.jsxs("div",{className:"d-sm-flex align-items-center justify-content-between mb-4",children:[s.jsx("h1",{className:"h2 mb-0 text-gray-800",children:"Dashboard"}),s.jsxs("div",{children:[s.jsxs(d,{variant:"primary",size:"sm",className:"me-2",children:[s.jsx("i",{className:"bi bi-download me-1"})," Generate Report"]}),s.jsxs(d,{variant:"success",size:"sm",children:[s.jsx("i",{className:"bi bi-plus-lg me-1"})," New PO",s.jsx(i,{to:"/purchase-orders/create",className:"stretched-link text-white text-decoration-none"})]})]})]}),s.jsxs(x,{className:"g-3 mb-4",children:[s.jsx(p,{xl:3,md:6,children:s.jsx(N,{className:"border-start-primary h-100",children:s.jsx(N.Body,{children:s.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs fw-bold text-primary text-uppercase mb-1",children:"Total POs (Monthly)"}),s.jsx("div",{className:"h5 mb-0 fw-bold text-gray-800",children:o?s.jsx("span",{className:"placeholder col-4"}):g})]}),s.jsx("div",{className:"fa-2x text-gray-300",children:s.jsx("i",{className:"bi bi-file-text fs-1 text-primary opacity-25"})})]})})})}),s.jsx(p,{xl:3,md:6,children:s.jsx(N,{className:"border-start-success h-100",children:s.jsx(N.Body,{children:s.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs fw-bold text-success text-uppercase mb-1",children:"Total Value (Monthly)"}),s.jsx("div",{className:"h5 mb-0 fw-bold text-gray-800",children:o?s.jsx("span",{className:"placeholder col-4"}):u(j)})]}),s.jsx("div",{className:"fa-2x text-gray-300",children:s.jsx("i",{className:"bi bi-currency-dollar fs-1 text-success opacity-25"})})]})})})}),s.jsx(p,{xl:3,md:6,children:s.jsx(N,{className:"border-start-info h-100",children:s.jsx(N.Body,{children:s.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs fw-bold text-info text-uppercase mb-1",children:"On-Time Delivery"}),s.jsxs("div",{className:"row no-gutters align-items-center",children:[s.jsx("div",{className:"col-auto",children:s.jsx("div",{className:"h5 mb-0 me-3 fw-bold text-gray-800",children:o?s.jsx("span",{className:"placeholder col-2"}):`${b}%`})}),s.jsx("div",{className:"col",children:s.jsx("div",{className:"progress progress-sm",children:s.jsx("div",{className:"progress-bar bg-info",role:"progressbar",style:{width:`${b}%`},"aria-valuenow":b,"aria-valuemin":0,"aria-valuemax":100})})})]})]}),s.jsx("div",{className:"fa-2x text-gray-300",children:s.jsx("i",{className:"bi bi-truck fs-1 text-info opacity-25"})})]})})})}),s.jsx(p,{xl:3,md:6,children:s.jsx(N,{className:"border-start-warning h-100",children:s.jsx(N.Body,{children:s.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs fw-bold text-warning text-uppercase mb-1",children:"Pending Approvals"}),s.jsx("div",{className:"h5 mb-0 fw-bold text-gray-800",children:o?s.jsx("span",{className:"placeholder col-2"}):(null==(e=y.find((e=>"UPLOADED"===e.status)))?void 0:e.count)||0})]}),s.jsx("div",{className:"fa-2x text-gray-300",children:s.jsx("i",{className:"bi bi-hourglass-split fs-1 text-warning opacity-25"})})]})})})})]}),s.jsxs(x,{className:"g-3 mb-4",children:[s.jsx(p,{xl:8,lg:7,children:s.jsxs(N,{className:"mb-4",children:[s.jsxs(N.Header,{className:"py-3 d-flex flex-row align-items-center justify-content-between",children:[s.jsx("h6",{className:"m-0 fw-bold",children:"Recent Purchase Orders"}),s.jsx(i,{to:"/purchase-orders",className:"btn btn-sm btn-primary",children:"View All"})]}),s.jsx(N.Body,{children:s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-hover",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"PO Number"}),s.jsx("th",{children:"Date"}),s.jsx("th",{children:"Supplier"}),s.jsx("th",{children:"Amount"}),s.jsx("th",{children:"Status"})]})}),s.jsx("tbody",{children:n?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"text-center",children:s.jsx("div",{className:"spinner-border spinner-border-sm text-primary",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Loading..."})})})}):0===f.length?s.jsx("tr",{children:s.jsx("td",{colSpan:5,className:"text-center",children:"No purchase orders found"})}):f.map((e=>{var t,a,r,n,l,o,d,h,x,p;return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx(i,{to:`/purchase-orders/${null==(t=e.header)?void 0:t.poNumber}`,className:"fw-bold text-decoration-none",children:null==(a=e.header)?void 0:a.poNumber})}),s.jsx("td",{children:m(null==(r=e.header)?void 0:r.orderDate)}),s.jsx("td",{children:`${null==(l=null==(n=e.header)?void 0:n.buyerInfo)?void 0:l.firstName} ${null==(d=null==(o=e.header)?void 0:o.buyerInfo)?void 0:d.lastName}`}),s.jsx("td",{children:u(e.totalCost||0)}),s.jsx("td",{children:s.jsx(w,{bg:c((null==(h=e.header)?void 0:h.status)||"UNKNOWN"),children:(null==(x=e.header)?void 0:x.status)||"UNKNOWN"})})]},null==(p=e.header)?void 0:p.poNumber)}))})]})})})]})}),s.jsxs(p,{xl:4,lg:5,children:[s.jsxs(N,{className:"mb-4",children:[s.jsx(N.Header,{className:"py-3",children:s.jsx("h6",{className:"m-0 fw-bold",children:"Quick Actions"})}),s.jsx(N.Body,{children:s.jsxs("div",{className:"d-grid gap-2",children:[s.jsxs(d,{variant:"primary",className:"position-relative",children:[s.jsx("i",{className:"bi bi-plus-circle me-2"}),"Create New Purchase Order",s.jsx(i,{to:"/purchase-orders/create",className:"stretched-link text-white text-decoration-none"})]}),s.jsxs(d,{variant:"outline-primary",className:"position-relative",children:[s.jsx("i",{className:"bi bi-search me-2"}),"Search Purchase Orders",s.jsx(i,{to:"/purchase-orders",className:"stretched-link text-decoration-none"})]}),s.jsxs(d,{variant:"outline-primary",className:"position-relative",children:[s.jsx("i",{className:"bi bi-calendar3 me-2"}),"Go to Planning Hub",s.jsx(i,{to:"/planning-hub",className:"stretched-link text-decoration-none"})]}),s.jsxs(d,{variant:"outline-primary",className:"position-relative",children:[s.jsx("i",{className:"bi bi-graph-up me-2"}),"View Metrics & Reports",s.jsx(i,{to:"/metrics",className:"stretched-link text-decoration-none"})]})]})})]}),s.jsxs(N,{children:[s.jsx(N.Header,{className:"py-3",children:s.jsx("h6",{className:"m-0 fw-bold",children:"Status Distribution"})}),s.jsx(N.Body,{children:o?s.jsx("div",{className:"text-center py-3",children:s.jsx("div",{className:"spinner-border spinner-border-sm text-primary",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Loading..."})})}):0===y.length?s.jsx("p",{className:"text-center",children:"No status data available"}):y.map((e=>s.jsxs("div",{className:"mb-3",children:[s.jsxs("div",{className:"d-flex justify-content-between mb-1",children:[s.jsx("span",{children:e.status}),s.jsxs("span",{children:[e.percentage,"%"]})]}),s.jsx("div",{className:"progress",style:{height:"10px"},children:s.jsx("div",{className:`progress-bar bg-${c(e.status)}`,style:{width:`${e.percentage}%`}})})]},e.status)))})]})]})]})]})},gt=()=>{const e=xt(),t=D(),{items:a,loading:l,error:u,pagination:m,filters:g,selectedItems:j,batchOperations:b}=v((e=>e.poList)),[f,y]=h.useState(!1),[I,E]=h.useState(""),[P,O]=h.useState(""),T=j.length>0,M=a.length>0&&a.every((e=>{var t;return j.includes((null==(t=e.header)?void 0:t.poNumber)||"")})),A=a.filter((e=>{var t;return j.includes((null==(t=e.header)?void 0:t.poNumber)||"")})).reduce(((e,t)=>e+(t.totalCost||0)),0);h.useEffect((()=>{const t={page:m.page,query:g.query,status:g.status?g.status:void 0,startDate:g.startDate||void 0,endDate:g.endDate||void 0};e(te(t))}),[e,m.page]);const L=e=>{E(e),"status"===e&&O(""),y(!0)},F=e=>{switch(e){case"UPLOADED":return"warning";case"CONFIRMED":return"info";case"SHIPPED":return"primary";case"INVOICED":return"secondary";case"DELIVERED":return"success";case"CANCELLED":return"danger";default:return"light"}},R=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),B=e=>{if(!e)return"N/A";try{const t=new Date(e);return new Intl.DateTimeFormat("en-US",{year:"numeric",month:"short",day:"numeric"}).format(t)}catch(t){return"Invalid Date"}},q=t=>{e(ie(t))},V=()=>{y(!1)},$=[],H=m.totalPages||1,U=m.page,G=Math.max(1,U-2),Y=Math.min(H,G+4);for(let r=G;r<=Y;r++)$.push(s.jsx(S.Item,{active:r===U,onClick:()=>q(r),children:r},r));return s.jsxs(r,{fluid:!0,children:[s.jsxs("div",{className:"d-sm-flex align-items-center justify-content-between mb-4",children:[s.jsx("h1",{className:"h2 mb-0 text-gray-800",children:"Purchase Orders"}),s.jsxs(d,{variant:"primary",className:"position-relative",children:[s.jsx("i",{className:"bi bi-plus-lg me-2"}),"Create New PO",s.jsx(i,{to:"/purchase-orders/create",className:"stretched-link text-white text-decoration-none"})]})]}),s.jsxs(N,{className:"mb-4 shadow-sm",children:[s.jsx(N.Header,{className:"bg-light py-3",children:s.jsx("h6",{className:"m-0 font-weight-bold",children:"Filters & Search"})}),s.jsx(N.Body,{children:s.jsxs(x,{className:"g-3",children:[s.jsx(p,{md:6,lg:4,children:s.jsxs(o.Group,{children:[s.jsx(o.Label,{children:"Search"}),s.jsxs(c,{children:[s.jsx(c.Text,{children:s.jsx("i",{className:"bi bi-search"})}),s.jsx(o.Control,{type:"text",placeholder:"PO#, Supplier, etc.",value:g.query,onChange:t=>{const s=t.target.value;e(ne(s))}})]})]})}),s.jsx(p,{md:6,lg:3,children:s.jsxs(o.Group,{children:[s.jsx(o.Label,{children:"Status"}),s.jsxs(o.Select,{value:g.status,onChange:t=>{e(le(t.target.value))},children:[s.jsx("option",{value:"",children:"All Statuses"}),Object.values(Le).map((e=>s.jsx("option",{value:e,children:e},e)))]})]})}),s.jsx(p,{md:6,lg:2,children:s.jsxs(o.Group,{children:[s.jsx(o.Label,{children:"Date Range"}),s.jsxs(o.Select,{onChange:t=>{const s=parseInt(t.target.value,10);if(!isNaN(s)){const t=(new Date).toISOString(),a=new Date;a.setDate(a.getDate()-s),e(oe({startDate:a.toISOString(),endDate:t}))}},children:[s.jsx("option",{value:"",children:"Select Range"}),s.jsx("option",{value:"7",children:"Last 7 days"}),s.jsx("option",{value:"30",children:"Last 30 days"}),s.jsx("option",{value:"90",children:"Last 90 days"}),s.jsx("option",{value:"365",children:"Last year"})]})]})}),s.jsxs(p,{md:6,lg:3,className:"d-flex align-items-end",children:[s.jsxs(d,{variant:"primary",className:"me-2",onClick:()=>{const t={page:m.page,query:g.query,status:g.status?g.status:void 0,startDate:g.startDate||void 0,endDate:g.endDate||void 0};e(te(t))},children:[s.jsx("i",{className:"bi bi-funnel me-1"})," Apply"]}),s.jsxs(d,{variant:"outline-secondary",onClick:()=>{e(ue()),e(te({page:1}))},children:[s.jsx("i",{className:"bi bi-x-lg me-1"})," Clear"]})]})]})})]}),s.jsx(N,{className:"shadow-sm",children:s.jsxs(N.Body,{children:[s.jsxs("div",{className:"d-flex justify-content-between mb-3",children:[s.jsx("div",{children:s.jsx("span",{className:"text-muted",children:T?s.jsxs("span",{className:"text-primary fw-bold",children:[j.length," item",1!==j.length?"s":""," selected"," ","(",R(A),")",s.jsx(d,{size:"sm",variant:"link",className:"p-0 ms-2",onClick:()=>e(me(!1)),children:"Clear Selection"})]}):`Showing ${a.length} of ${m.totalItems} entries`})}),s.jsxs("div",{className:"d-flex",children:[s.jsxs(n,{className:"me-2",children:[s.jsxs(n.Toggle,{variant:"outline-secondary",size:"sm",children:[s.jsx("i",{className:"bi bi-gear me-1"})," Display Options"]}),s.jsxs(n.Menu,{children:[s.jsx(n.Item,{children:"Show 10 entries"}),s.jsx(n.Item,{children:"Show 25 entries"}),s.jsx(n.Item,{children:"Show 50 entries"}),s.jsx(n.Item,{children:"Show all entries"}),s.jsx(n.Divider,{}),s.jsx(n.Item,{children:"Customize columns"})]})]}),s.jsxs(n,{className:"ms-2",children:[s.jsxs(n.Toggle,{variant:T?"primary":"outline-secondary",size:"sm",disabled:!T,children:[s.jsx("i",{className:"bi bi-list-check me-1"})," Batch Actions"]}),s.jsxs(n.Menu,{children:[s.jsxs(n.Item,{onClick:()=>L("status"),children:[s.jsx("i",{className:"bi bi-arrow-repeat me-2"})," Change Status"]}),s.jsxs(n.Item,{children:[s.jsx("i",{className:"bi bi-file-earmark-arrow-down me-2"})," Export Selected"]}),s.jsx(n.Divider,{}),s.jsxs(n.Item,{className:"text-danger",onClick:()=>L("delete"),children:[s.jsx("i",{className:"bi bi-trash me-2"})," Delete Selected"]})]})]}),s.jsxs(n,{className:"ms-2",children:[s.jsx(n.Toggle,{variant:"outline-secondary",size:"sm",id:"more-actions-dropdown",children:s.jsx("i",{className:"bi bi-three-dots-vertical"})}),s.jsxs(n.Menu,{children:[s.jsxs(n.Item,{children:[s.jsx("i",{className:"bi bi-file-earmark-arrow-down me-2"})," Export to CSV"]}),s.jsxs(n.Item,{children:[s.jsx("i",{className:"bi bi-file-earmark-pdf me-2"})," Export to PDF"]}),s.jsxs(n.Item,{children:[s.jsx("i",{className:"bi bi-printer me-2"})," Print"]})]})]})]})]}),s.jsx("div",{className:"table-responsive",children:s.jsxs(C,{hover:!0,className:"align-middle",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:s.jsx(o.Check,{type:"checkbox",checked:M,onChange:t=>{e(me(t.target.checked))},disabled:0===a.length})}),s.jsxs("th",{children:["PO Number ",s.jsx("i",{className:"bi bi-arrow-down-up text-muted ms-1"})]}),s.jsxs("th",{children:["Date ",s.jsx("i",{className:"bi bi-arrow-down text-primary ms-1"})]}),s.jsxs("th",{children:["Supplier ",s.jsx("i",{className:"bi bi-arrow-down-up text-muted ms-1"})]}),s.jsx("th",{children:"Items"}),s.jsxs("th",{children:["Amount ",s.jsx("i",{className:"bi bi-arrow-down-up text-muted ms-1"})]}),s.jsxs("th",{children:["Status ",s.jsx("i",{className:"bi bi-arrow-down-up text-muted ms-1"})]}),s.jsx("th",{children:"Due Date"}),s.jsx("th",{children:"Actions"})]})}),s.jsx("tbody",{children:l?s.jsx("tr",{children:s.jsx("td",{colSpan:9,className:"text-center py-4",children:s.jsx("div",{className:"spinner-border text-primary",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Loading..."})})})}):u?s.jsx("tr",{children:s.jsx("td",{colSpan:9,className:"text-center py-4 text-danger",children:u})}):0===a.length?s.jsx("tr",{children:s.jsx("td",{colSpan:9,className:"text-center py-4",children:"No purchase orders found. Try adjusting your filters."})}):a.map((a=>{var r,l,c,u,h,m,x,p,g,b,f;const y=(null==(r=a.header)?void 0:r.poNumber)||"unknown";return s.jsxs("tr",{children:[s.jsx("td",{children:s.jsx(o.Check,{type:"checkbox",id:`select-po-${y}`,checked:j.includes(y),onChange:()=>(t=>{e(he(t))})(y),"aria-label":`Select purchase order ${y}`,onClick:e=>e.stopPropagation()})}),s.jsx("td",{children:s.jsx(i,{to:`/purchase-orders/${y}`,className:"fw-bold text-decoration-none",children:y})}),s.jsx("td",{children:B((null==(l=a.header)?void 0:l.orderDate)||"")}),s.jsxs("td",{children:[null==(u=null==(c=a.header)?void 0:c.buyerInfo)?void 0:u.firstName," ",null==(m=null==(h=a.header)?void 0:h.buyerInfo)?void 0:m.lastName]}),s.jsx("td",{children:(null==(x=a.products)?void 0:x.length)||0}),s.jsx("td",{children:R(a.totalCost||0)}),s.jsx("td",{children:s.jsx(w,{bg:F((null==(p=a.header)?void 0:p.status)||"UNKNOWN"),children:(null==(g=a.header)?void 0:g.status)||"UNKNOWN"})}),s.jsx("td",{children:(null==(f=null==(b=a.header)?void 0:b.deliveryInfo)?void 0:f.date)?B(a.header.deliveryInfo.date):"N/A"}),s.jsx("td",{children:s.jsxs("div",{className:"d-flex",children:[s.jsx(d,{variant:"outline-primary",size:"sm",className:"me-1",onClick:()=>(e=>{t(`/purchase-orders/${e}`)})(y),children:s.jsx("i",{className:"bi bi-eye"})}),s.jsxs(n,{children:[s.jsx(n.Toggle,{variant:"outline-secondary",title:"Actions",size:"sm",id:`dropdown-${y}`,children:s.jsx("i",{className:"bi bi-three-dots-vertical"})}),s.jsxs(n.Menu,{children:[s.jsxs(n.Item,{children:[s.jsx("i",{className:"bi bi-pencil me-2"})," Edit"]}),s.jsxs(n.Item,{children:[s.jsx("i",{className:"bi bi-files me-2"})," Duplicate"]}),s.jsxs(n.Item,{children:[s.jsx("i",{className:"bi bi-file-earmark-pdf me-2"})," Export"]}),s.jsx(n.Divider,{}),s.jsxs(n.Item,{className:"text-danger",children:[s.jsx("i",{className:"bi bi-trash me-2"})," Delete"]})]})]})]})})]},y)}))})]})}),s.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3",children:[s.jsx("div",{children:s.jsxs("span",{className:"text-muted",children:["Page ",m.page," of ",m.totalPages]})}),s.jsxs(S,{className:"mb-0",children:[s.jsx(S.First,{onClick:()=>q(1),disabled:1===m.page}),s.jsx(S.Prev,{onClick:()=>q(Math.max(1,m.page-1)),disabled:1===m.page}),$,s.jsx(S.Next,{onClick:()=>q(Math.min(m.totalPages,m.page+1)),disabled:m.page===m.totalPages}),s.jsx(S.Last,{onClick:()=>q(m.totalPages),disabled:m.page===m.totalPages})]})]})]})}),s.jsxs(k,{show:f,onHide:V,backdrop:"static",centered:!0,children:[s.jsx(k.Header,{closeButton:!0,children:s.jsxs(k.Title,{children:["status"===I&&"Change Status for Multiple POs","delete"===I&&"Delete Multiple Purchase Orders"]})}),s.jsxs(k.Body,{children:["status"===I&&s.jsxs(s.Fragment,{children:[s.jsxs("p",{children:["You are about to change the status of ",s.jsx("strong",{children:j.length})," purchase order",1!==j.length?"s":"","."]}),s.jsxs(o.Group,{className:"mb-3",children:[s.jsx(o.Label,{children:"Select New Status"}),s.jsxs(o.Select,{value:P,onChange:e=>O(e.target.value),required:!0,children:[s.jsx("option",{value:"",children:"-- Select Status --"}),Object.values(Le).map((e=>s.jsx("option",{value:e,children:e},e)))]})]}),s.jsxs("div",{className:"alert alert-warning",children:[s.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),"This action will change the status for all selected purchase orders. Please ensure the selected status is valid for all POs."]})]}),"delete"===I&&s.jsxs(s.Fragment,{children:[s.jsxs("div",{className:"alert alert-danger mb-3",children:[s.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),s.jsx("strong",{children:"Warning:"})," This action cannot be undone."]}),s.jsx("p",{children:"You are about to delete the following purchase orders:"}),s.jsx("div",{className:"table-responsive mb-3",children:s.jsxs("table",{className:"table table-sm table-bordered",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{children:"PO Number"}),s.jsx("th",{children:"Date"}),s.jsx("th",{children:"Status"}),s.jsx("th",{children:"Amount"})]})}),s.jsx("tbody",{children:a.filter((e=>{var t;return(null==(t=e.header)?void 0:t.poNumber)&&j.includes(e.header.poNumber)})).map((e=>{var t,a,r,i;return s.jsxs("tr",{children:[s.jsx("td",{children:null==(t=e.header)?void 0:t.poNumber}),s.jsx("td",{children:B((null==(a=e.header)?void 0:a.orderDate)||"")}),s.jsx("td",{children:null==(r=e.header)?void 0:r.status}),s.jsx("td",{className:"text-end",children:R(e.totalCost||0)})]},null==(i=e.header)?void 0:i.poNumber)}))})]})})]})]}),s.jsxs(k.Footer,{children:[s.jsx(d,{variant:"secondary",onClick:V,children:"Cancel"}),s.jsx(d,{variant:"delete"===I?"danger":"primary",onClick:async()=>{"status"===I&&P?await e(ae({poNumbers:j,operation:"status",params:{status:P}})):"delete"===I&&await e(ae({poNumbers:j,operation:"delete"})),y(!1)},disabled:"status"===I&&!P||b.processing,children:b.processing?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Processing..."]}):s.jsxs(s.Fragment,{children:["status"===I&&"Apply Status Change","delete"===I&&"Confirm Delete"]})})]})]})]})};function jt(e){const t=Object.prototype.toString.call(e);return e instanceof Date||"object"==typeof e&&"[object Date]"===t?new e.constructor(+e):"number"==typeof e||"[object Number]"===t||"string"==typeof e||"[object String]"===t?new Date(e):new Date(NaN)}function bt(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function ft(e,t){const s=jt(e);return isNaN(t)?bt(e,NaN):t?(s.setDate(s.getDate()+t),s):s}function yt(e,t){const s=jt(e);if(isNaN(t))return bt(e,NaN);if(!t)return s;const a=s.getDate(),r=bt(e,s.getTime());r.setMonth(s.getMonth()+t+1,0);return a>=r.getDate()?r:(s.setFullYear(r.getFullYear(),r.getMonth(),a),s)}function vt(e,t){return bt(e,+jt(e)+t)}const Nt=6048e5,wt=6e4,Dt=36e5;let St={};function Ct(){return St}function kt(e,t){var s,a,r,i;const n=Ct(),l=(null==t?void 0:t.weekStartsOn)??(null==(a=null==(s=null==t?void 0:t.locale)?void 0:s.options)?void 0:a.weekStartsOn)??n.weekStartsOn??(null==(i=null==(r=n.locale)?void 0:r.options)?void 0:i.weekStartsOn)??0,o=jt(e),c=o.getDay(),d=(c<l?7:0)+c-l;return o.setDate(o.getDate()-d),o.setHours(0,0,0,0),o}function It(e){return kt(e,{weekStartsOn:1})}function Et(e){const t=jt(e),s=t.getFullYear(),a=bt(e,0);a.setFullYear(s+1,0,4),a.setHours(0,0,0,0);const r=It(a),i=bt(e,0);i.setFullYear(s,0,4),i.setHours(0,0,0,0);const n=It(i);return t.getTime()>=r.getTime()?s+1:t.getTime()>=n.getTime()?s:s-1}function Pt(e){const t=jt(e);return t.setHours(0,0,0,0),t}function Ot(e){const t=jt(e),s=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return s.setUTCFullYear(t.getFullYear()),+e-+s}function Tt(e,t){const s=Pt(e),a=Pt(t),r=+s-Ot(s),i=+a-Ot(a);return Math.round((r-i)/864e5)}function Mt(e,t){const s=jt(e),a=jt(t),r=s.getTime()-a.getTime();return r<0?-1:r>0?1:r}function At(e){if(!(t=e,t instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t)||"number"==typeof e))return!1;var t;const s=jt(e);return!isNaN(Number(s))}function Lt(e,t){const s=jt(e),a=jt(t),r=Ft(s,a),i=Math.abs(Tt(s,a));s.setDate(s.getDate()-r*i);const n=r*(i-Number(Ft(s,a)===-r));return 0===n?0:n}function Ft(e,t){const s=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return s<0?-1:s>0?1:s}function Rt(e){return t=>{const s=(e?Math[e]:Math.trunc)(t);return 0===s?0:s}}function Bt(e,t){return+jt(e)-+jt(t)}function qt(e){const t=jt(e);return t.setHours(23,59,59,999),t}function Vt(e){const t=jt(e),s=t.getMonth();return t.setFullYear(t.getFullYear(),s+1,0),t.setHours(23,59,59,999),t}function $t(e,t){const s=jt(e),a=jt(t),r=Mt(s,a),i=Math.abs(function(e,t){const s=jt(e),a=jt(t);return 12*(s.getFullYear()-a.getFullYear())+(s.getMonth()-a.getMonth())}(s,a));let n;if(i<1)n=0;else{1===s.getMonth()&&s.getDate()>27&&s.setDate(30),s.setMonth(s.getMonth()-r*i);let t=Mt(s,a)===-r;(function(e){const t=jt(e);return+qt(t)==+Vt(t)})(jt(e))&&1===i&&1===Mt(e,a)&&(t=!1),n=r*(i-Number(t))}return 0===n?0:n}function Ht(e,t){const s=jt(e),a=jt(t),r=Mt(s,a),i=Math.abs(function(e,t){const s=jt(e),a=jt(t);return s.getFullYear()-a.getFullYear()}(s,a));s.setFullYear(1584),a.setFullYear(1584);const n=r*(i-+(Mt(s,a)===-r));return 0===n?0:n}function Ut(e){const t=jt(e),s=bt(e,0);return s.setFullYear(t.getFullYear(),0,1),s.setHours(0,0,0,0),s}const Gt={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function Yt(e){return(t={})=>{const s=t.width?String(t.width):e.defaultWidth;return e.formats[s]||e.formats[e.defaultWidth]}}const zt={date:Yt({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:Yt({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:Yt({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},_t={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Wt(e){return(t,s)=>{let a;if("formatting"===((null==s?void 0:s.context)?String(s.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,r=(null==s?void 0:s.width)?String(s.width):t;a=e.formattingValues[r]||e.formattingValues[t]}else{const t=e.defaultWidth,r=(null==s?void 0:s.width)?String(s.width):e.defaultWidth;a=e.values[r]||e.values[t]}return a[e.argumentCallback?e.argumentCallback(t):t]}}function Qt(e){return(t,s={})=>{const a=s.width,r=a&&e.matchPatterns[a]||e.matchPatterns[e.defaultMatchWidth],i=t.match(r);if(!i)return null;const n=i[0],l=a&&e.parsePatterns[a]||e.parsePatterns[e.defaultParseWidth],o=Array.isArray(l)?function(e,t){for(let s=0;s<e.length;s++)if(t(e[s]))return s;return}(l,(e=>e.test(n))):function(e,t){for(const s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return s;return}(l,(e=>e.test(n)));let c;c=e.valueCallback?e.valueCallback(o):o,c=s.valueCallback?s.valueCallback(c):c;return{value:c,rest:t.slice(n.length)}}}var Kt;const Xt={code:"en-US",formatDistance:(e,t,s)=>{let a;const r=Gt[e];return a="string"==typeof r?r:1===t?r.one:r.other.replace("{{count}}",t.toString()),(null==s?void 0:s.addSuffix)?s.comparison&&s.comparison>0?"in "+a:a+" ago":a},formatLong:zt,formatRelative:(e,t,s,a)=>_t[e],localize:{ordinalNumber:(e,t)=>{const s=Number(e),a=s%100;if(a>20||a<10)switch(a%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},era:Wt({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Wt({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Wt({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Wt({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Wt({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:(Kt={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const s=e.match(Kt.matchPattern);if(!s)return null;const a=s[0],r=e.match(Kt.parsePattern);if(!r)return null;let i=Kt.valueCallback?Kt.valueCallback(r[0]):r[0];return i=t.valueCallback?t.valueCallback(i):i,{value:i,rest:e.slice(a.length)}}),era:Qt({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Qt({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Qt({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Qt({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Qt({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};function Zt(e){const t=jt(e),s=+It(t)-+function(e){const t=Et(e),s=bt(e,0);return s.setFullYear(t,0,4),s.setHours(0,0,0,0),It(s)}(t);return Math.round(s/Nt)+1}function Jt(e,t){var s,a,r,i;const n=jt(e),l=n.getFullYear(),o=Ct(),c=(null==t?void 0:t.firstWeekContainsDate)??(null==(a=null==(s=null==t?void 0:t.locale)?void 0:s.options)?void 0:a.firstWeekContainsDate)??o.firstWeekContainsDate??(null==(i=null==(r=o.locale)?void 0:r.options)?void 0:i.firstWeekContainsDate)??1,d=bt(e,0);d.setFullYear(l+1,0,c),d.setHours(0,0,0,0);const u=kt(d,t),h=bt(e,0);h.setFullYear(l,0,c),h.setHours(0,0,0,0);const m=kt(h,t);return n.getTime()>=u.getTime()?l+1:n.getTime()>=m.getTime()?l:l-1}function es(e,t){const s=jt(e),a=+kt(s,t)-+function(e,t){var s,a,r,i;const n=Ct(),l=(null==t?void 0:t.firstWeekContainsDate)??(null==(a=null==(s=null==t?void 0:t.locale)?void 0:s.options)?void 0:a.firstWeekContainsDate)??n.firstWeekContainsDate??(null==(i=null==(r=n.locale)?void 0:r.options)?void 0:i.firstWeekContainsDate)??1,o=Jt(e,t),c=bt(e,0);return c.setFullYear(o,0,l),c.setHours(0,0,0,0),kt(c,t)}(s,t);return Math.round(a/Nt)+1}function ts(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const ss={y(e,t){const s=e.getFullYear(),a=s>0?s:1-s;return ts("yy"===t?a%100:a,t.length)},M(e,t){const s=e.getMonth();return"M"===t?String(s+1):ts(s+1,2)},d:(e,t)=>ts(e.getDate(),t.length),a(e,t){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];default:return"am"===s?"a.m.":"p.m."}},h:(e,t)=>ts(e.getHours()%12||12,t.length),H:(e,t)=>ts(e.getHours(),t.length),m:(e,t)=>ts(e.getMinutes(),t.length),s:(e,t)=>ts(e.getSeconds(),t.length),S(e,t){const s=t.length,a=e.getMilliseconds();return ts(Math.trunc(a*Math.pow(10,s-3)),t.length)}},as="midnight",rs="noon",is="morning",ns="afternoon",ls="evening",os="night",cs={G:function(e,t,s){const a=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return s.era(a,{width:"abbreviated"});case"GGGGG":return s.era(a,{width:"narrow"});default:return s.era(a,{width:"wide"})}},y:function(e,t,s){if("yo"===t){const t=e.getFullYear(),a=t>0?t:1-t;return s.ordinalNumber(a,{unit:"year"})}return ss.y(e,t)},Y:function(e,t,s,a){const r=Jt(e,a),i=r>0?r:1-r;if("YY"===t){return ts(i%100,2)}return"Yo"===t?s.ordinalNumber(i,{unit:"year"}):ts(i,t.length)},R:function(e,t){return ts(Et(e),t.length)},u:function(e,t){return ts(e.getFullYear(),t.length)},Q:function(e,t,s){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return ts(a,2);case"Qo":return s.ordinalNumber(a,{unit:"quarter"});case"QQQ":return s.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(a,{width:"narrow",context:"formatting"});default:return s.quarter(a,{width:"wide",context:"formatting"})}},q:function(e,t,s){const a=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return ts(a,2);case"qo":return s.ordinalNumber(a,{unit:"quarter"});case"qqq":return s.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(a,{width:"narrow",context:"standalone"});default:return s.quarter(a,{width:"wide",context:"standalone"})}},M:function(e,t,s){const a=e.getMonth();switch(t){case"M":case"MM":return ss.M(e,t);case"Mo":return s.ordinalNumber(a+1,{unit:"month"});case"MMM":return s.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(a,{width:"narrow",context:"formatting"});default:return s.month(a,{width:"wide",context:"formatting"})}},L:function(e,t,s){const a=e.getMonth();switch(t){case"L":return String(a+1);case"LL":return ts(a+1,2);case"Lo":return s.ordinalNumber(a+1,{unit:"month"});case"LLL":return s.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(a,{width:"narrow",context:"standalone"});default:return s.month(a,{width:"wide",context:"standalone"})}},w:function(e,t,s,a){const r=es(e,a);return"wo"===t?s.ordinalNumber(r,{unit:"week"}):ts(r,t.length)},I:function(e,t,s){const a=Zt(e);return"Io"===t?s.ordinalNumber(a,{unit:"week"}):ts(a,t.length)},d:function(e,t,s){return"do"===t?s.ordinalNumber(e.getDate(),{unit:"date"}):ss.d(e,t)},D:function(e,t,s){const a=function(e){const t=jt(e);return Tt(t,Ut(t))+1}(e);return"Do"===t?s.ordinalNumber(a,{unit:"dayOfYear"}):ts(a,t.length)},E:function(e,t,s){const a=e.getDay();switch(t){case"E":case"EE":case"EEE":return s.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(a,{width:"short",context:"formatting"});default:return s.day(a,{width:"wide",context:"formatting"})}},e:function(e,t,s,a){const r=e.getDay(),i=(r-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(i);case"ee":return ts(i,2);case"eo":return s.ordinalNumber(i,{unit:"day"});case"eee":return s.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(r,{width:"short",context:"formatting"});default:return s.day(r,{width:"wide",context:"formatting"})}},c:function(e,t,s,a){const r=e.getDay(),i=(r-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(i);case"cc":return ts(i,t.length);case"co":return s.ordinalNumber(i,{unit:"day"});case"ccc":return s.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(r,{width:"narrow",context:"standalone"});case"cccccc":return s.day(r,{width:"short",context:"standalone"});default:return s.day(r,{width:"wide",context:"standalone"})}},i:function(e,t,s){const a=e.getDay(),r=0===a?7:a;switch(t){case"i":return String(r);case"ii":return ts(r,t.length);case"io":return s.ordinalNumber(r,{unit:"day"});case"iii":return s.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(a,{width:"short",context:"formatting"});default:return s.day(a,{width:"wide",context:"formatting"})}},a:function(e,t,s){const a=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(a,{width:"narrow",context:"formatting"});default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(e,t,s){const a=e.getHours();let r;switch(r=12===a?rs:0===a?as:a/12>=1?"pm":"am",t){case"b":case"bb":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(r,{width:"narrow",context:"formatting"});default:return s.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(e,t,s){const a=e.getHours();let r;switch(r=a>=17?ls:a>=12?ns:a>=4?is:os,t){case"B":case"BB":case"BBB":return s.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(r,{width:"narrow",context:"formatting"});default:return s.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(e,t,s){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),s.ordinalNumber(t,{unit:"hour"})}return ss.h(e,t)},H:function(e,t,s){return"Ho"===t?s.ordinalNumber(e.getHours(),{unit:"hour"}):ss.H(e,t)},K:function(e,t,s){const a=e.getHours()%12;return"Ko"===t?s.ordinalNumber(a,{unit:"hour"}):ts(a,t.length)},k:function(e,t,s){let a=e.getHours();return 0===a&&(a=24),"ko"===t?s.ordinalNumber(a,{unit:"hour"}):ts(a,t.length)},m:function(e,t,s){return"mo"===t?s.ordinalNumber(e.getMinutes(),{unit:"minute"}):ss.m(e,t)},s:function(e,t,s){return"so"===t?s.ordinalNumber(e.getSeconds(),{unit:"second"}):ss.s(e,t)},S:function(e,t){return ss.S(e,t)},X:function(e,t,s){const a=e.getTimezoneOffset();if(0===a)return"Z";switch(t){case"X":return us(a);case"XXXX":case"XX":return hs(a);default:return hs(a,":")}},x:function(e,t,s){const a=e.getTimezoneOffset();switch(t){case"x":return us(a);case"xxxx":case"xx":return hs(a);default:return hs(a,":")}},O:function(e,t,s){const a=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+ds(a,":");default:return"GMT"+hs(a,":")}},z:function(e,t,s){const a=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+ds(a,":");default:return"GMT"+hs(a,":")}},t:function(e,t,s){return ts(Math.trunc(e.getTime()/1e3),t.length)},T:function(e,t,s){return ts(e.getTime(),t.length)}};function ds(e,t=""){const s=e>0?"-":"+",a=Math.abs(e),r=Math.trunc(a/60),i=a%60;return 0===i?s+String(r):s+String(r)+t+ts(i,2)}function us(e,t){if(e%60==0){return(e>0?"-":"+")+ts(Math.abs(e)/60,2)}return hs(e,t)}function hs(e,t=""){const s=e>0?"-":"+",a=Math.abs(e);return s+ts(Math.trunc(a/60),2)+t+ts(a%60,2)}const ms=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},xs=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},ps={p:xs,P:(e,t)=>{const s=e.match(/(P+)(p+)?/)||[],a=s[1],r=s[2];if(!r)return ms(e,t);let i;switch(a){case"P":i=t.dateTime({width:"short"});break;case"PP":i=t.dateTime({width:"medium"});break;case"PPP":i=t.dateTime({width:"long"});break;default:i=t.dateTime({width:"full"})}return i.replace("{{date}}",ms(a,t)).replace("{{time}}",xs(r,t))}},gs=/^D+$/,js=/^Y+$/,bs=["D","DD","YY","YYYY"];function fs(e){return gs.test(e)}function ys(e){return js.test(e)}function vs(e,t,s){const a=function(e,t,s){const a="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${a} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,s);if(console.warn(a),bs.includes(e))throw new RangeError(a)}const Ns=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ws=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ds=/^'([^]*?)'?$/,Ss=/''/g,Cs=/[a-zA-Z]/;function ks(e,t,s){var a,r,i,n,l,o,c,d;const u=Ct(),h=(null==s?void 0:s.locale)??u.locale??Xt,m=(null==s?void 0:s.firstWeekContainsDate)??(null==(r=null==(a=null==s?void 0:s.locale)?void 0:a.options)?void 0:r.firstWeekContainsDate)??u.firstWeekContainsDate??(null==(n=null==(i=u.locale)?void 0:i.options)?void 0:n.firstWeekContainsDate)??1,x=(null==s?void 0:s.weekStartsOn)??(null==(o=null==(l=null==s?void 0:s.locale)?void 0:l.options)?void 0:o.weekStartsOn)??u.weekStartsOn??(null==(d=null==(c=u.locale)?void 0:c.options)?void 0:d.weekStartsOn)??0,p=jt(e);if(!At(p))throw new RangeError("Invalid time value");let g=t.match(ws).map((e=>{const t=e[0];if("p"===t||"P"===t){return(0,ps[t])(e,h.formatLong)}return e})).join("").match(Ns).map((e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Is(e)};if(cs[t])return{isToken:!0,value:e};if(t.match(Cs))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}}));h.localize.preprocessor&&(g=h.localize.preprocessor(p,g));const j={firstWeekContainsDate:m,weekStartsOn:x,locale:h};return g.map((a=>{if(!a.isToken)return a.value;const r=a.value;(!(null==s?void 0:s.useAdditionalWeekYearTokens)&&ys(r)||!(null==s?void 0:s.useAdditionalDayOfYearTokens)&&fs(r))&&vs(r,t,String(e));return(0,cs[r[0]])(p,r,h.localize,j)})).join("")}function Is(e){const t=e.match(Ds);return t?t[1].replace(Ss,"'"):e}class Es{constructor(){t(this,"subPriority",0)}validate(e,t){return!0}}class Ps extends Es{constructor(e,t,s,a,r){super(),this.value=e,this.validateValue=t,this.setValue=s,this.priority=a,r&&(this.subPriority=r)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,s){return this.setValue(e,t,this.value,s)}}class Os extends Es{constructor(){super(...arguments),t(this,"priority",10),t(this,"subPriority",-1)}set(e,t){return t.timestampIsSet?e:bt(e,function(e,t){const s=t instanceof Date?bt(t,0):new t(0);return s.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),s.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),s}(e,Date))}}class Ts{run(e,t,s,a){const r=this.parse(e,t,s,a);return r?{setter:new Ps(r.value,this.validate,this.set,this.priority,this.subPriority),rest:r.rest}:null}validate(e,t,s){return!0}}const Ms=/^(1[0-2]|0?\d)/,As=/^(3[0-1]|[0-2]?\d)/,Ls=/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,Fs=/^(5[0-3]|[0-4]?\d)/,Rs=/^(2[0-3]|[0-1]?\d)/,Bs=/^(2[0-4]|[0-1]?\d)/,qs=/^(1[0-1]|0?\d)/,Vs=/^(1[0-2]|0?\d)/,$s=/^[0-5]?\d/,Hs=/^[0-5]?\d/,Us=/^\d/,Gs=/^\d{1,2}/,Ys=/^\d{1,3}/,zs=/^\d{1,4}/,_s=/^-?\d+/,Ws=/^-?\d/,Qs=/^-?\d{1,2}/,Ks=/^-?\d{1,3}/,Xs=/^-?\d{1,4}/,Zs=/^([+-])(\d{2})(\d{2})?|Z/,Js=/^([+-])(\d{2})(\d{2})|Z/,ea=/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,ta=/^([+-])(\d{2}):(\d{2})|Z/,sa=/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/;function aa(e,t){return e?{value:t(e.value),rest:e.rest}:e}function ra(e,t){const s=t.match(e);return s?{value:parseInt(s[0],10),rest:t.slice(s[0].length)}:null}function ia(e,t){const s=t.match(e);if(!s)return null;if("Z"===s[0])return{value:0,rest:t.slice(1)};const a="+"===s[1]?1:-1,r=s[2]?parseInt(s[2],10):0,i=s[3]?parseInt(s[3],10):0,n=s[5]?parseInt(s[5],10):0;return{value:a*(r*Dt+i*wt+1e3*n),rest:t.slice(s[0].length)}}function na(e){return ra(_s,e)}function la(e,t){switch(e){case 1:return ra(Us,t);case 2:return ra(Gs,t);case 3:return ra(Ys,t);case 4:return ra(zs,t);default:return ra(new RegExp("^\\d{1,"+e+"}"),t)}}function oa(e,t){switch(e){case 1:return ra(Ws,t);case 2:return ra(Qs,t);case 3:return ra(Ks,t);case 4:return ra(Xs,t);default:return ra(new RegExp("^-?\\d{1,"+e+"}"),t)}}function ca(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;default:return 0}}function da(e,t){const s=t>0,a=s?t:1-t;let r;if(a<=50)r=e||100;else{const t=a+50;r=e+100*Math.trunc(t/100)-(e>=t%100?100:0)}return s?r:1-r}function ua(e){return e%400==0||e%4==0&&e%100!=0}const ha=[31,28,31,30,31,30,31,31,30,31,30,31],ma=[31,29,31,30,31,30,31,31,30,31,30,31];function xa(e,t,s){var a,r,i,n;const l=Ct(),o=(null==s?void 0:s.weekStartsOn)??(null==(r=null==(a=null==s?void 0:s.locale)?void 0:a.options)?void 0:r.weekStartsOn)??l.weekStartsOn??(null==(n=null==(i=l.locale)?void 0:i.options)?void 0:n.weekStartsOn)??0,c=jt(e),d=c.getDay(),u=7-o;return ft(c,t<0||t>6?t-(d+u)%7:((t%7+7)%7+u)%7-(d+u)%7)}function pa(e,t){const s=jt(e),a=function(e){let t=jt(e).getDay();return 0===t&&(t=7),t}(s);return ft(s,t-a)}const ga={G:new class extends Ts{constructor(){super(...arguments),t(this,"priority",140),t(this,"incompatibleTokens",["R","u","t","T"])}parse(e,t,s){switch(t){case"G":case"GG":case"GGG":return s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"});case"GGGGG":return s.era(e,{width:"narrow"});default:return s.era(e,{width:"wide"})||s.era(e,{width:"abbreviated"})||s.era(e,{width:"narrow"})}}set(e,t,s){return t.era=s,e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}},y:new class extends Ts{constructor(){super(...arguments),t(this,"priority",130),t(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,t,s){const a=e=>({year:e,isTwoDigitYear:"yy"===t});switch(t){case"y":return aa(la(4,e),a);case"yo":return aa(s.ordinalNumber(e,{unit:"year"}),a);default:return aa(la(t.length,e),a)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,s){const a=e.getFullYear();if(s.isTwoDigitYear){const t=da(s.year,a);return e.setFullYear(t,0,1),e.setHours(0,0,0,0),e}const r="era"in t&&1!==t.era?1-s.year:s.year;return e.setFullYear(r,0,1),e.setHours(0,0,0,0),e}},Y:new class extends Ts{constructor(){super(...arguments),t(this,"priority",130),t(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,t,s){const a=e=>({year:e,isTwoDigitYear:"YY"===t});switch(t){case"Y":return aa(la(4,e),a);case"Yo":return aa(s.ordinalNumber(e,{unit:"year"}),a);default:return aa(la(t.length,e),a)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,s,a){const r=Jt(e,a);if(s.isTwoDigitYear){const t=da(s.year,r);return e.setFullYear(t,0,a.firstWeekContainsDate),e.setHours(0,0,0,0),kt(e,a)}const i="era"in t&&1!==t.era?1-s.year:s.year;return e.setFullYear(i,0,a.firstWeekContainsDate),e.setHours(0,0,0,0),kt(e,a)}},R:new class extends Ts{constructor(){super(...arguments),t(this,"priority",130),t(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,t){return oa("R"===t?4:t.length,e)}set(e,t,s){const a=bt(e,0);return a.setFullYear(s,0,4),a.setHours(0,0,0,0),It(a)}},u:new class extends Ts{constructor(){super(...arguments),t(this,"priority",130),t(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,t){return oa("u"===t?4:t.length,e)}set(e,t,s){return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}},Q:new class extends Ts{constructor(){super(...arguments),t(this,"priority",120),t(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,s){switch(t){case"Q":case"QQ":return la(t.length,e);case"Qo":return s.ordinalNumber(e,{unit:"quarter"});case"QQQ":return s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return s.quarter(e,{width:"narrow",context:"formatting"});default:return s.quarter(e,{width:"wide",context:"formatting"})||s.quarter(e,{width:"abbreviated",context:"formatting"})||s.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,s){return e.setMonth(3*(s-1),1),e.setHours(0,0,0,0),e}},q:new class extends Ts{constructor(){super(...arguments),t(this,"priority",120),t(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,t,s){switch(t){case"q":case"qq":return la(t.length,e);case"qo":return s.ordinalNumber(e,{unit:"quarter"});case"qqq":return s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return s.quarter(e,{width:"narrow",context:"standalone"});default:return s.quarter(e,{width:"wide",context:"standalone"})||s.quarter(e,{width:"abbreviated",context:"standalone"})||s.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,s){return e.setMonth(3*(s-1),1),e.setHours(0,0,0,0),e}},M:new class extends Ts{constructor(){super(...arguments),t(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),t(this,"priority",110)}parse(e,t,s){const a=e=>e-1;switch(t){case"M":return aa(ra(Ms,e),a);case"MM":return aa(la(2,e),a);case"Mo":return aa(s.ordinalNumber(e,{unit:"month"}),a);case"MMM":return s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return s.month(e,{width:"narrow",context:"formatting"});default:return s.month(e,{width:"wide",context:"formatting"})||s.month(e,{width:"abbreviated",context:"formatting"})||s.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}},L:new class extends Ts{constructor(){super(...arguments),t(this,"priority",110),t(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,t,s){const a=e=>e-1;switch(t){case"L":return aa(ra(Ms,e),a);case"LL":return aa(la(2,e),a);case"Lo":return aa(s.ordinalNumber(e,{unit:"month"}),a);case"LLL":return s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return s.month(e,{width:"narrow",context:"standalone"});default:return s.month(e,{width:"wide",context:"standalone"})||s.month(e,{width:"abbreviated",context:"standalone"})||s.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,s){return e.setMonth(s,1),e.setHours(0,0,0,0),e}},w:new class extends Ts{constructor(){super(...arguments),t(this,"priority",100),t(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,t,s){switch(t){case"w":return ra(Fs,e);case"wo":return s.ordinalNumber(e,{unit:"week"});default:return la(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,s,a){return kt(function(e,t,s){const a=jt(e),r=es(a,s)-t;return a.setDate(a.getDate()-7*r),a}(e,s,a),a)}},I:new class extends Ts{constructor(){super(...arguments),t(this,"priority",100),t(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,t,s){switch(t){case"I":return ra(Fs,e);case"Io":return s.ordinalNumber(e,{unit:"week"});default:return la(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,s){return It(function(e,t){const s=jt(e),a=Zt(s)-t;return s.setDate(s.getDate()-7*a),s}(e,s))}},d:new class extends Ts{constructor(){super(...arguments),t(this,"priority",90),t(this,"subPriority",1),t(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,t,s){switch(t){case"d":return ra(As,e);case"do":return s.ordinalNumber(e,{unit:"date"});default:return la(t.length,e)}}validate(e,t){const s=ua(e.getFullYear()),a=e.getMonth();return s?t>=1&&t<=ma[a]:t>=1&&t<=ha[a]}set(e,t,s){return e.setDate(s),e.setHours(0,0,0,0),e}},D:new class extends Ts{constructor(){super(...arguments),t(this,"priority",90),t(this,"subpriority",1),t(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,t,s){switch(t){case"D":case"DD":return ra(Ls,e);case"Do":return s.ordinalNumber(e,{unit:"date"});default:return la(t.length,e)}}validate(e,t){return ua(e.getFullYear())?t>=1&&t<=366:t>=1&&t<=365}set(e,t,s){return e.setMonth(0,s),e.setHours(0,0,0,0),e}},E:new class extends Ts{constructor(){super(...arguments),t(this,"priority",90),t(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,t,s){switch(t){case"E":case"EE":case"EEE":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return s.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,s,a){return(e=xa(e,s,a)).setHours(0,0,0,0),e}},e:new class extends Ts{constructor(){super(...arguments),t(this,"priority",90),t(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,t,s,a){const r=e=>{const t=7*Math.floor((e-1)/7);return(e+a.weekStartsOn+6)%7+t};switch(t){case"e":case"ee":return aa(la(t.length,e),r);case"eo":return aa(s.ordinalNumber(e,{unit:"day"}),r);case"eee":return s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});case"eeeee":return s.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"});default:return s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,s,a){return(e=xa(e,s,a)).setHours(0,0,0,0),e}},c:new class extends Ts{constructor(){super(...arguments),t(this,"priority",90),t(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,t,s,a){const r=e=>{const t=7*Math.floor((e-1)/7);return(e+a.weekStartsOn+6)%7+t};switch(t){case"c":case"cc":return aa(la(t.length,e),r);case"co":return aa(s.ordinalNumber(e,{unit:"day"}),r);case"ccc":return s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});case"ccccc":return s.day(e,{width:"narrow",context:"standalone"});case"cccccc":return s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"});default:return s.day(e,{width:"wide",context:"standalone"})||s.day(e,{width:"abbreviated",context:"standalone"})||s.day(e,{width:"short",context:"standalone"})||s.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,s,a){return(e=xa(e,s,a)).setHours(0,0,0,0),e}},i:new class extends Ts{constructor(){super(...arguments),t(this,"priority",90),t(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,t,s){const a=e=>0===e?7:e;switch(t){case"i":case"ii":return la(t.length,e);case"io":return s.ordinalNumber(e,{unit:"day"});case"iii":return aa(s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),a);case"iiiii":return aa(s.day(e,{width:"narrow",context:"formatting"}),a);case"iiiiii":return aa(s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),a);default:return aa(s.day(e,{width:"wide",context:"formatting"})||s.day(e,{width:"abbreviated",context:"formatting"})||s.day(e,{width:"short",context:"formatting"})||s.day(e,{width:"narrow",context:"formatting"}),a)}}validate(e,t){return t>=1&&t<=7}set(e,t,s){return(e=pa(e,s)).setHours(0,0,0,0),e}},a:new class extends Ts{constructor(){super(...arguments),t(this,"priority",80),t(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,t,s){switch(t){case"a":case"aa":case"aaa":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return s.dayPeriod(e,{width:"narrow",context:"formatting"});default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,s){return e.setHours(ca(s),0,0,0),e}},b:new class extends Ts{constructor(){super(...arguments),t(this,"priority",80),t(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,t,s){switch(t){case"b":case"bb":case"bbb":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return s.dayPeriod(e,{width:"narrow",context:"formatting"});default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,s){return e.setHours(ca(s),0,0,0),e}},B:new class extends Ts{constructor(){super(...arguments),t(this,"priority",80),t(this,"incompatibleTokens",["a","b","t","T"])}parse(e,t,s){switch(t){case"B":case"BB":case"BBB":return s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return s.dayPeriod(e,{width:"narrow",context:"formatting"});default:return s.dayPeriod(e,{width:"wide",context:"formatting"})||s.dayPeriod(e,{width:"abbreviated",context:"formatting"})||s.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,s){return e.setHours(ca(s),0,0,0),e}},h:new class extends Ts{constructor(){super(...arguments),t(this,"priority",70),t(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,t,s){switch(t){case"h":return ra(Vs,e);case"ho":return s.ordinalNumber(e,{unit:"hour"});default:return la(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,s){const a=e.getHours()>=12;return a&&s<12?e.setHours(s+12,0,0,0):a||12!==s?e.setHours(s,0,0,0):e.setHours(0,0,0,0),e}},H:new class extends Ts{constructor(){super(...arguments),t(this,"priority",70),t(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,t,s){switch(t){case"H":return ra(Rs,e);case"Ho":return s.ordinalNumber(e,{unit:"hour"});default:return la(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,s){return e.setHours(s,0,0,0),e}},K:new class extends Ts{constructor(){super(...arguments),t(this,"priority",70),t(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,t,s){switch(t){case"K":return ra(qs,e);case"Ko":return s.ordinalNumber(e,{unit:"hour"});default:return la(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,s){return e.getHours()>=12&&s<12?e.setHours(s+12,0,0,0):e.setHours(s,0,0,0),e}},k:new class extends Ts{constructor(){super(...arguments),t(this,"priority",70),t(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,t,s){switch(t){case"k":return ra(Bs,e);case"ko":return s.ordinalNumber(e,{unit:"hour"});default:return la(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,s){const a=s<=24?s%24:s;return e.setHours(a,0,0,0),e}},m:new class extends Ts{constructor(){super(...arguments),t(this,"priority",60),t(this,"incompatibleTokens",["t","T"])}parse(e,t,s){switch(t){case"m":return ra($s,e);case"mo":return s.ordinalNumber(e,{unit:"minute"});default:return la(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,s){return e.setMinutes(s,0,0),e}},s:new class extends Ts{constructor(){super(...arguments),t(this,"priority",50),t(this,"incompatibleTokens",["t","T"])}parse(e,t,s){switch(t){case"s":return ra(Hs,e);case"so":return s.ordinalNumber(e,{unit:"second"});default:return la(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,s){return e.setSeconds(s,0),e}},S:new class extends Ts{constructor(){super(...arguments),t(this,"priority",30),t(this,"incompatibleTokens",["t","T"])}parse(e,t){return aa(la(t.length,e),(e=>Math.trunc(e*Math.pow(10,3-t.length))))}set(e,t,s){return e.setMilliseconds(s),e}},X:new class extends Ts{constructor(){super(...arguments),t(this,"priority",10),t(this,"incompatibleTokens",["t","T","x"])}parse(e,t){switch(t){case"X":return ia(Zs,e);case"XX":return ia(Js,e);case"XXXX":return ia(ea,e);case"XXXXX":return ia(sa,e);default:return ia(ta,e)}}set(e,t,s){return t.timestampIsSet?e:bt(e,e.getTime()-Ot(e)-s)}},x:new class extends Ts{constructor(){super(...arguments),t(this,"priority",10),t(this,"incompatibleTokens",["t","T","X"])}parse(e,t){switch(t){case"x":return ia(Zs,e);case"xx":return ia(Js,e);case"xxxx":return ia(ea,e);case"xxxxx":return ia(sa,e);default:return ia(ta,e)}}set(e,t,s){return t.timestampIsSet?e:bt(e,e.getTime()-Ot(e)-s)}},t:new class extends Ts{constructor(){super(...arguments),t(this,"priority",40),t(this,"incompatibleTokens","*")}parse(e){return na(e)}set(e,t,s){return[bt(e,1e3*s),{timestampIsSet:!0}]}},T:new class extends Ts{constructor(){super(...arguments),t(this,"priority",20),t(this,"incompatibleTokens","*")}parse(e){return na(e)}set(e,t,s){return[bt(e,s),{timestampIsSet:!0}]}}},ja=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,ba=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,fa=/^'([^]*?)'?$/,ya=/''/g,va=/\S/,Na=/[a-zA-Z]/;function wa(e,t,s,a){var r,i,n,l,o,c,d,u;const h=Object.assign({},Ct()),m=(null==a?void 0:a.locale)??h.locale??Xt,x=(null==a?void 0:a.firstWeekContainsDate)??(null==(i=null==(r=null==a?void 0:a.locale)?void 0:r.options)?void 0:i.firstWeekContainsDate)??h.firstWeekContainsDate??(null==(l=null==(n=h.locale)?void 0:n.options)?void 0:l.firstWeekContainsDate)??1,p=(null==a?void 0:a.weekStartsOn)??(null==(c=null==(o=null==a?void 0:a.locale)?void 0:o.options)?void 0:c.weekStartsOn)??h.weekStartsOn??(null==(u=null==(d=h.locale)?void 0:d.options)?void 0:u.weekStartsOn)??0;if(""===t)return""===e?jt(s):bt(s,NaN);const g={firstWeekContainsDate:x,weekStartsOn:p,locale:m},j=[new Os],b=t.match(ba).map((e=>{const t=e[0];if(t in ps){return(0,ps[t])(e,m.formatLong)}return e})).join("").match(ja),f=[];for(let w of b){!(null==a?void 0:a.useAdditionalWeekYearTokens)&&ys(w)&&vs(w,t,e),!(null==a?void 0:a.useAdditionalDayOfYearTokens)&&fs(w)&&vs(w,t,e);const r=w[0],i=ga[r];if(i){const{incompatibleTokens:t}=i;if(Array.isArray(t)){const e=f.find((e=>t.includes(e.token)||e.token===r));if(e)throw new RangeError(`The format string mustn't contain \`${e.fullToken}\` and \`${w}\` at the same time`)}else if("*"===i.incompatibleTokens&&f.length>0)throw new RangeError(`The format string mustn't contain \`${w}\` and any other token at the same time`);f.push({token:r,fullToken:w});const a=i.run(e,w,m.match,g);if(!a)return bt(s,NaN);j.push(a.setter),e=a.rest}else{if(r.match(Na))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");if("''"===w?w="'":"'"===r&&(w=w.match(fa)[1].replace(ya,"'")),0!==e.indexOf(w))return bt(s,NaN);e=e.slice(w.length)}}if(e.length>0&&va.test(e))return bt(s,NaN);const y=j.map((e=>e.priority)).sort(((e,t)=>t-e)).filter(((e,t,s)=>s.indexOf(e)===t)).map((e=>j.filter((t=>t.priority===e)).sort(((e,t)=>t.subPriority-e.subPriority)))).map((e=>e[0]));let v=jt(s);if(isNaN(v.getTime()))return bt(s,NaN);const N={};for(const w of y){if(!w.validate(v,g))return bt(s,NaN);const e=w.set(v,N,g);Array.isArray(e)?(v=e[0],Object.assign(N,e[1])):v=e}return bt(s,v)}function Da(e,t){const s=(null==t?void 0:t.additionalDigits)??2,a=function(e){const t={},s=e.split(Sa.dateTimeDelimiter);let a;if(s.length>2)return t;/:/.test(s[0])?a=s[0]:(t.date=s[0],a=s[1],Sa.timeZoneDelimiter.test(t.date)&&(t.date=e.split(Sa.timeZoneDelimiter)[0],a=e.substr(t.date.length,e.length)));if(a){const e=Sa.timezone.exec(a);e?(t.time=a.replace(e[1],""),t.timezone=e[1]):t.time=a}return t}(e);let r;if(a.date){const e=function(e,t){const s=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),a=e.match(s);if(!a)return{year:NaN,restDateString:""};const r=a[1]?parseInt(a[1]):null,i=a[2]?parseInt(a[2]):null;return{year:null===i?r:100*i,restDateString:e.slice((a[1]||a[2]).length)}}(a.date,s);r=function(e,t){if(null===t)return new Date(NaN);const s=e.match(Ca);if(!s)return new Date(NaN);const a=!!s[4],r=Ea(s[1]),i=Ea(s[2])-1,n=Ea(s[3]),l=Ea(s[4]),o=Ea(s[5])-1;if(a)return function(e,t,s){return t>=1&&t<=53&&s>=0&&s<=6}(0,l,o)?function(e,t,s){const a=new Date(0);a.setUTCFullYear(e,0,4);const r=a.getUTCDay()||7,i=7*(t-1)+s+1-r;return a.setUTCDate(a.getUTCDate()+i),a}(t,l,o):new Date(NaN);{const e=new Date(0);return function(e,t,s){return t>=0&&t<=11&&s>=1&&s<=(Oa[t]||(Ta(e)?29:28))}(t,i,n)&&function(e,t){return t>=1&&t<=(Ta(e)?366:365)}(t,r)?(e.setUTCFullYear(t,i,Math.max(r,n)),e):new Date(NaN)}}(e.restDateString,e.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);const i=r.getTime();let n,l=0;if(a.time&&(l=function(e){const t=e.match(ka);if(!t)return NaN;const s=Pa(t[1]),a=Pa(t[2]),r=Pa(t[3]);if(!function(e,t,s){if(24===e)return 0===t&&0===s;return s>=0&&s<60&&t>=0&&t<60&&e>=0&&e<25}(s,a,r))return NaN;return s*Dt+a*wt+1e3*r}(a.time),isNaN(l)))return new Date(NaN);if(!a.timezone){const e=new Date(i+l),t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}return n=function(e){if("Z"===e)return 0;const t=e.match(Ia);if(!t)return 0;const s="+"===t[1]?-1:1,a=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;if(!function(e,t){return t>=0&&t<=59}(0,r))return NaN;return s*(a*Dt+r*wt)}(a.timezone),isNaN(n)?new Date(NaN):new Date(i+l+n)}const Sa={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Ca=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,ka=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Ia=/^([+-])(\d{2})(?::?(\d{2}))?$/;function Ea(e){return e?parseInt(e):1}function Pa(e){return e&&parseFloat(e.replace(",","."))||0}const Oa=[31,null,31,30,31,30,31,31,30,31,30,31];function Ta(e){return e%400==0||e%4==0&&e%100!=0}class Ma{static validateForStatus(e,t,s){const a={isValid:!0,errors:[],warnings:[],info:[]};return s?(Object.entries(s).forEach((([t,s])=>{const{level:r,validate:i,message:n}=s;if(!this._executeValidator(i,e))switch(r){case"MANDATORY":["header","products","header.poNumber","header.buyerInfo"].some((e=>t.startsWith(e)))&&(a.isValid=!1),a.errors.push({field:t,message:n||`Required: ${t}`});break;case"RECOMMENDED":a.warnings.push({field:t,message:n||`Recommended: ${t}`});break;case"OPTIONAL":a.info.push({field:t,message:n||`Optional: ${t}`})}})),a):a}static async validateTransition(e,t,s){try{return await J.validateTransition(e,t,s)}catch(a){return{isValid:!0,errors:[],warnings:[{field:"status",message:a instanceof Error?a.message:"Failed to validate transition, proceeding anyway"}],info:[]}}}static validatePOData(e){const t={isValid:!0,errors:[],warnings:[],info:[]};if(e.header?e.header.poNumber&&(e.header.poNumber?/^\d{6,10}$/.test(e.header.poNumber)||(t.isValid=!1,t.errors.push({field:"header.poNumber",message:"PO Number must be 6-10 digits"})):(t.isValid=!1,t.errors.push({field:"header.poNumber",message:"PO Number is required"})),e.header.buyerInfo?(e.header.buyerInfo.firstName||(t.isValid=!1,t.errors.push({field:"header.buyerInfo.firstName",message:"Buyer first name is required"})),e.header.buyerInfo.lastName||(t.isValid=!1,t.errors.push({field:"header.buyerInfo.lastName",message:"Buyer last name is required"})),e.header.buyerInfo.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.header.buyerInfo.email)||(t.isValid=!1,t.errors.push({field:"header.buyerInfo.email",message:"Please enter a valid email address"})):(t.isValid=!1,t.errors.push({field:"header.buyerInfo.email",message:"Buyer email is required"}))):(t.isValid=!1,t.errors.push({field:"header.buyerInfo",message:"Buyer information is required"})),e.header.syscoLocation?e.header.syscoLocation.name||(t.isValid=!1,t.errors.push({field:"header.syscoLocation.name",message:"Location name is required"})):(t.isValid=!1,t.errors.push({field:"header.syscoLocation",message:"Sysco location is required"}))):(t.isValid=!1,t.errors.push({field:"header",message:"Purchase order header is required"})),e.products&&0!==e.products.length?e.products.forEach(((e,s)=>{e.supc||(t.isValid=!1,t.errors.push({field:`products[${s}].supc`,message:"SUPC is required for all products"})),e.quantity<=0&&(t.isValid=!1,t.errors.push({field:`products[${s}].quantity`,message:"Quantity must be greater than 0"})),e.fobCost<=0&&(t.isValid=!1,t.errors.push({field:`products[${s}].fobCost`,message:"FOB cost must be greater than 0"}))})):(t.isValid=!1,t.errors.push({field:"products",message:"At least one product is required"})),e.weights?(e.weights.grossWeight<=0&&t.warnings.push({field:"weights.grossWeight",message:"Gross weight must be greater than 0"}),e.weights.netWeight<=0&&t.warnings.push({field:"weights.netWeight",message:"Net weight must be greater than 0"}),e.weights.netWeight>e.weights.grossWeight&&(t.isValid=!1,t.errors.push({field:"weights",message:"Net weight cannot exceed gross weight"}))):t.warnings.push({field:"weights",message:"Weight information is required"}),e.totalCost||0===e.totalCost?e.totalCost<0&&(t.isValid=!1,t.errors.push({field:"totalCost",message:"Total cost cannot be negative"})):(t.isValid=!1,t.errors.push({field:"totalCost",message:"Total cost is required"})),e.products&&e.products.length>0&&null!=e.totalCost){const s=e.products.reduce(((e,t)=>e+(t.total||0)),0);Math.abs(s-e.totalCost)>.01&&t.warnings.push({field:"totalCost",message:"Total cost does not match sum of product totals"})}return t}static _executeValidator(e,t){if("string"==typeof e)try{return new Function("data",`return ${e}`)(t)}catch(s){return console.error("Validator execution error:",s),!1}if("function"==typeof e)try{return e(t)}catch(s){return console.error("Validator execution error:",s),!1}return!0}}const Aa=({poData:e,status:t,requirements:a,validationResult:r,className:i=""})=>{const n=r||Ma.validateForStatus(e,t,a),l=n.errors.length+n.warnings.length+n.info.length+(Object.keys(a||{}).length-(n.errors.length+0+n.info.length)),o=l-n.errors.length,c=l>0?Math.round(o/l*100):100;return 0===l?s.jsx("div",{className:`requirements-checklist ${i}`,children:s.jsxs("div",{className:"alert alert-success mb-0",children:[s.jsx("i",{className:"bi bi-check-circle-fill me-2"}),"No specific requirements for this status."]})}):s.jsxs("div",{className:`requirements-checklist ${i}`,children:[s.jsxs("h4",{className:"requirements-checklist__title mb-2",children:["Requirements for ",t]}),s.jsx("div",{className:"progress mb-3",children:s.jsxs("div",{className:"progress-bar "+(c<100?"bg-primary":"bg-success"),role:"progressbar",style:{width:`${c}%`},"aria-valuenow":c,"aria-valuemin":0,"aria-valuemax":100,children:[c,"%"]})}),s.jsxs("div",{className:"requirements-checklist__items",children:[n.errors.map(((e,t)=>s.jsxs("div",{className:"list-group-item list-group-item-danger d-flex align-items-center",children:[s.jsx("i",{className:"bi bi-x-circle-fill me-2"}),s.jsxs("div",{children:[s.jsxs("strong",{children:[e.field,":"]})," ",e.message]})]},`error-${t}`))),n.warnings.map(((e,t)=>s.jsxs("div",{className:"list-group-item list-group-item-warning d-flex align-items-center",children:[s.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),s.jsxs("div",{children:[s.jsxs("strong",{children:[e.field,":"]})," ",e.message]})]},`warning-${t}`))),n.info.map(((e,t)=>s.jsxs("div",{className:"list-group-item list-group-item-info d-flex align-items-center",children:[s.jsx("i",{className:"bi bi-info-circle-fill me-2"}),s.jsxs("div",{children:[s.jsxs("strong",{children:[e.field,":"]})," ",e.message]})]},`info-${t}`)))]}),n.isValid?n.warnings.length>0?s.jsxs("div",{className:"alert alert-warning mt-3",children:[s.jsx("i",{className:"bi bi-check-circle me-2"}),"All mandatory requirements met, but there are some recommendations to consider."]}):s.jsxs("div",{className:"alert alert-success mt-3",children:[s.jsx("i",{className:"bi bi-check-circle-fill me-2"}),"All requirements met! Ready to proceed."]}):s.jsxs("div",{className:"alert alert-danger mt-3",children:[s.jsx("i",{className:"bi bi-x-circle-fill me-2"}),"Cannot proceed until all mandatory requirements are met."]})]})},La=({onFileUpload:e,acceptedFileTypes:t=".pdf,.jpg,.jpeg,.png,.doc,.docx",maxFileSize:a=10,multiple:r=!1,metadata:i={},className:n="",disabled:l=!1})=>{const o=h.useRef(null),[c,d]=h.useState(!1),[u,m]=h.useState("idle"),[x,p]=h.useState(""),[g,j]=h.useState(0),b=h.useCallback((e=>{if(!e||0===e.length)return;m("uploading"),p(""),j(0);const t=Array.from(e),s=f(t);if(s)return m("error"),void p(s);y(t)}),[t,a,i,e]),f=e=>{var s;const r=t.split(",").map((e=>e.trim().toLowerCase()));for(const i of e){if(i.size>1024*a*1024)return`File "${i.name}" exceeds the maximum size of ${a}MB.`;const e=`.${null==(s=i.name.split(".").pop())?void 0:s.toLowerCase()}`;if(!r.includes(e)&&!r.includes(".*"))return`File "${i.name}" has an unsupported file type. Allowed types: ${t}`}return null},y=async t=>{try{const s=[];for(let e=0;e<t.length;e++){const a=t[e],r=Math.round(e/t.length*50);j(r);const n=await J.uploadFile(a,i);s.push({id:n.id,url:n.url,name:a.name,size:a.size,type:a.type});const l=Math.round(50+(e+1)/t.length*50);j(l)}m("success"),j(100),e(s),setTimeout((()=>{m("idle"),j(0)}),1500)}catch(s){m("error"),p(s instanceof Error?s.message:"Failed to upload files")}},v=h.useCallback((e=>{e.preventDefault(),e.stopPropagation(),l||d(!0)}),[l]),N=h.useCallback((e=>{e.preventDefault(),e.stopPropagation(),d(!1)}),[]),w=h.useCallback((e=>{e.preventDefault(),e.stopPropagation(),d(!1),l||b(e.dataTransfer.files)}),[l,b]),D=h.useCallback((()=>{o.current&&!l&&o.current.click()}),[l]),S=h.useCallback((e=>{b(e.target.files),e.target&&e.target instanceof HTMLInputElement&&(e.target.value="")}),[b]),C=`\n    file-uploader \n    ${c?"file-uploader--dragover":""} \n    ${l?"file-uploader--disabled":""} \n    ${n}\n  `.trim();return s.jsxs("div",{className:C,children:[s.jsx("input",{ref:o,type:"file",accept:t,multiple:r,onChange:S,style:{display:"none"},disabled:l}),s.jsx("div",{className:"file-uploader__dropzone",onDragOver:v,onDragLeave:N,onDrop:w,onClick:D,children:s.jsxs("div",{className:"file-uploader__content",children:["idle"===u&&s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"bi bi-cloud-upload file-uploader__icon"}),s.jsxs("div",{className:"file-uploader__text",children:[s.jsx("span",{children:"Drag and drop files here, or"}),s.jsx("span",{className:"file-uploader__browse",children:"browse files"})]}),s.jsxs("div",{className:"file-uploader__hint text-muted",children:[r?"Multiple files supported":"Single file only",a&&s.jsxs("span",{children:[" (Max size: ",a,"MB)"]})]}),s.jsxs("div",{className:"file-uploader__types text-muted",children:["Accepted file types: ",t]})]}),"uploading"===u&&s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"bi bi-arrow-clockwise file-uploader__icon rotating"}),s.jsx("div",{className:"file-uploader__text",children:"Uploading files..."}),s.jsx("div",{className:"progress w-75 mt-2",children:s.jsxs("div",{className:"progress-bar progress-bar-striped progress-bar-animated",role:"progressbar",style:{width:`${g}%`},"aria-valuenow":g,"aria-valuemin":0,"aria-valuemax":100,children:[g,"%"]})})]}),"success"===u&&s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"bi bi-check-circle-fill file-uploader__icon text-success"}),s.jsx("div",{className:"file-uploader__text text-success",children:"Files uploaded successfully!"})]}),"error"===u&&s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"bi bi-exclamation-circle-fill file-uploader__icon text-danger"}),s.jsx("div",{className:"file-uploader__text text-danger",children:"Upload failed"}),s.jsx("div",{className:"file-uploader__error",children:x}),s.jsx("button",{className:"btn btn-outline-primary btn-sm mt-3",onClick:e=>{e.stopPropagation(),m("idle")},children:"Try Again"})]})]})})]})},Fa=({po:e,statusDefinition:t,validationResult:a,onUpdate:r,onStatusChange:i})=>{const n=t.allowedTransitions.includes(Le.CONFIRMED),[l,c]=h.useState(""),[u,m]=h.useState(!1),[x,p]=h.useState(null),[g,j]=h.useState(null),[b,f]=h.useState([]),[y,v]=h.useState({}),w=e=>{const{name:t,value:s}=e.target;"notes"===t?c(s):v((e=>({...e,[t]:s})))},D=e=>{if(!e)return"N/A";try{return ks(new Date(e),"MMM d, yyyy")}catch(t){return e}},S=e=>void 0===e?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);return s.jsxs("div",{className:"uploaded-status-panel",children:[x&&s.jsxs(I,{variant:"danger",className:"mb-4",onClose:()=>p(null),dismissible:!0,children:[s.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),x]}),g&&s.jsxs(I,{variant:"success",className:"mb-4",onClose:()=>j(null),dismissible:!0,children:[s.jsx("i",{className:"bi bi-check-circle-fill me-2"}),g]}),s.jsxs(N,{className:"mb-4",children:[s.jsxs(N.Header,{className:"bg-status-uploaded-light d-flex justify-content-between align-items-center",children:[s.jsxs("h5",{className:"mb-0",children:[s.jsx("i",{className:"bi bi-file-earmark-text me-2"}),"Purchase Order Review"]}),s.jsxs("div",{className:"text-muted small",children:["Uploaded: ",D(e.createdAt)]})]}),s.jsxs(N.Body,{children:[s.jsxs("div",{className:"row mb-4",children:[s.jsxs("div",{className:"col-md-6",children:[s.jsx("h6",{children:"Purchase Order Details"}),s.jsxs(E,{variant:"flush",children:[s.jsxs(E.Item,{children:[s.jsx("strong",{children:"PO Number:"})," ",e.header.poNumber]}),s.jsxs(E.Item,{children:[s.jsx("strong",{children:"Order Date:"})," ",D(e.header.orderDate)]}),s.jsxs(E.Item,{children:[s.jsx("strong",{children:"Total Cost:"})," ",S(e.totalCost)]})]})]}),s.jsxs("div",{className:"col-md-6",children:[s.jsx("h6",{children:"Buyer Information"}),s.jsxs(E,{variant:"flush",children:[s.jsxs(E.Item,{children:[s.jsx("strong",{children:"Name:"})," ",e.header.buyerInfo.firstName," ",e.header.buyerInfo.lastName]}),s.jsxs(E.Item,{children:[s.jsx("strong",{children:"Email:"})," ",e.header.buyerInfo.email]}),s.jsxs(E.Item,{children:[s.jsx("strong",{children:"Location:"})," ",e.header.syscoLocation.name]})]})]})]}),s.jsxs("h6",{children:["Products (",e.products.length,")"]}),s.jsx("div",{className:"table-responsive mb-3",children:s.jsxs("table",{className:"table table-striped table-bordered",children:[s.jsx("thead",{children:s.jsxs("tr",{children:[s.jsx("th",{children:"SUPC"}),s.jsx("th",{children:"Description"}),s.jsx("th",{children:"Quantity"}),s.jsx("th",{children:"FOB Cost"}),s.jsx("th",{children:"Total"})]})}),s.jsx("tbody",{children:e.products.map(((e,t)=>s.jsxs("tr",{children:[s.jsx("td",{children:e.supc}),s.jsx("td",{children:e.description||"N/A"}),s.jsx("td",{children:e.quantity}),s.jsx("td",{children:S(e.fobCost)}),s.jsx("td",{children:S(e.total)})]},t)))}),s.jsx("tfoot",{children:s.jsxs("tr",{children:[s.jsx("th",{colSpan:4,className:"text-end",children:"Total:"}),s.jsx("th",{children:S(e.totalCost)})]})})]})}),e.notes&&s.jsxs("div",{className:"mb-3",children:[s.jsx("h6",{children:"Purchase Order Notes"}),s.jsx("div",{className:"border p-3 rounded bg-light",children:e.notes})]})]})]}),n?s.jsx(o,{onSubmit:async t=>{t.preventDefault();try{if(m(!0),p(null),Object.keys(y).length>0||b.length>0){const t={};if(y.buyerName||y.buyerEmail){const[s,a]=(y.buyerName||`${e.header.buyerInfo.firstName} ${e.header.buyerInfo.lastName}`).split(" ");t.header={...e.header,buyerInfo:{...e.header.buyerInfo,firstName:s||e.header.buyerInfo.firstName,lastName:a||e.header.buyerInfo.lastName,email:y.buyerEmail||e.header.buyerInfo.email}}}y.deliveryInstructions&&(t.header=t.header||{...e.header},t.header.deliveryInfo={...e.header.deliveryInfo,instructions:y.deliveryInstructions}),b.length>0&&(t.documents=[...e.documents||[],...b.map((e=>({id:e.id,url:e.url,name:e.name,type:"supporting",uploadedAt:(new Date).toISOString()})))]),await r(t)}await i(Le.CONFIRMED,l),j("Purchase order confirmed successfully"),m(!1)}catch(s){p(s instanceof Error?s.message:"Failed to confirm purchase order"),m(!1)}},children:s.jsxs(N,{className:"mb-4",children:[s.jsx(N.Header,{className:"bg-status-uploaded-light",children:s.jsxs("h5",{className:"mb-0",children:[s.jsx("i",{className:"bi bi-pencil me-2"}),"Additional Information & Edits"]})}),s.jsxs(N.Body,{children:[s.jsx("h6",{className:"mb-3",children:"Update Buyer Information (Optional)"}),s.jsxs("div",{className:"row mb-4",children:[s.jsx("div",{className:"col-md-6",children:s.jsxs(o.Group,{className:"mb-3",controlId:"buyerName",children:[s.jsx(o.Label,{children:"Buyer Name"}),s.jsx(o.Control,{type:"text",name:"buyerName",placeholder:`${e.header.buyerInfo.firstName} ${e.header.buyerInfo.lastName}`,value:y.buyerName||"",onChange:w}),s.jsx(o.Text,{className:"text-muted",children:'Format as "First Last"'})]})}),s.jsx("div",{className:"col-md-6",children:s.jsxs(o.Group,{className:"mb-3",controlId:"buyerEmail",children:[s.jsx(o.Label,{children:"Buyer Email"}),s.jsx(o.Control,{type:"email",name:"buyerEmail",placeholder:e.header.buyerInfo.email,value:y.buyerEmail||"",onChange:w})]})})]}),s.jsx("h6",{className:"mb-3",children:"Delivery Instructions (Optional)"}),s.jsx(o.Group,{className:"mb-4",controlId:"deliveryInstructions",children:s.jsx(o.Control,{as:"textarea",name:"deliveryInstructions",rows:3,placeholder:"Add any special delivery instructions here",value:y.deliveryInstructions||"",onChange:w})}),s.jsx("h6",{className:"mb-3",children:"Upload Supporting Documents (Optional)"}),s.jsx(La,{onFileUpload:e=>{f((t=>[...t,...e]))},acceptedFileTypes:".pdf,.jpg,.jpeg,.png,.doc,.docx",maxFileSize:5,multiple:!0,className:"mb-3"}),b.length>0&&s.jsxs("div",{className:"mb-4",children:[s.jsx("h6",{children:"Uploaded Documents"}),s.jsx(E,{children:b.map((e=>s.jsxs(E.Item,{className:"d-flex justify-content-between align-items-center",children:[s.jsxs("div",{children:[s.jsx("i",{className:"bi bi-file-earmark me-2"}),e.name]}),s.jsx(d,{variant:"outline-danger",size:"sm",onClick:()=>{return t=e.id,void f((e=>e.filter((e=>e.id!==t))));var t},children:s.jsx("i",{className:"bi bi-trash"})})]},e.id)))})]}),s.jsx("h6",{className:"mb-3",children:"Confirmation Notes"}),s.jsxs(o.Group,{className:"mb-3",controlId:"notes",children:[s.jsx(o.Control,{as:"textarea",name:"notes",rows:3,placeholder:"Add notes about the confirmation process here",value:l,onChange:w}),s.jsx(o.Text,{className:"text-muted",children:"These notes will be included in the purchase order history."})]})]}),s.jsx(N.Footer,{className:"d-flex justify-content-end",children:s.jsx(d,{variant:"primary",type:"submit",disabled:u||!(null==a?void 0:a.isValid),children:u?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"bi bi-check-circle me-2"}),"Confirm Purchase Order"]})})})]})}):s.jsxs(I,{variant:"warning",children:[s.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"This purchase order cannot be confirmed at this time."]})]})},Ra=({po:e,statusDefinition:t,validationResult:a,onUpdate:r,onStatusChange:i})=>{var n;const l=t.allowedTransitions.includes(Le.SHIPPED),[c,u]=h.useState({shippingDate:ks(new Date,"yyyy-MM-dd"),carrier:"",trackingNumber:"",estimatedDeliveryDate:ks(new Date(Date.now()+6048e5),"yyyy-MM-dd"),notes:""}),[m,x]=h.useState([]),[p,g]=h.useState(!1),[j,b]=h.useState(!1),[f,y]=h.useState(null),[v,D]=h.useState(null),S=e=>{const{name:t,value:s}=e.target;u((e=>({...e,[t]:s})))};return s.jsxs("div",{className:"confirmed-status-panel",children:[f&&s.jsxs(I,{variant:"danger",className:"mb-4",onClose:()=>y(null),dismissible:!0,children:[s.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),f]}),v&&s.jsxs(I,{variant:"success",className:"mb-4",onClose:()=>D(null),dismissible:!0,children:[s.jsx("i",{className:"bi bi-check-circle-fill me-2"}),v]}),s.jsxs(N,{className:"mb-4",children:[s.jsxs(N.Header,{className:"bg-status-confirmed-light d-flex justify-content-between align-items-center",children:[s.jsxs("h5",{className:"mb-0",children:[s.jsx("i",{className:"bi bi-check-circle me-2"}),"Confirmed Order Details"]}),s.jsxs(w,{bg:"success",children:["Confirmed on: ",(()=>{if(!e.history)return"N/A";const t=e.history.find((e=>e.status===Le.CONFIRMED));return ks(t?new Date(t.timestamp):new Date(e.createdAt||Date.now()),"MMM d, yyyy")})()]})]}),s.jsx(N.Body,{children:s.jsxs("div",{className:"row",children:[s.jsxs("div",{className:"col-md-6",children:[s.jsx("h6",{children:"Order Information"}),s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-4",children:"PO Number"}),s.jsx("dd",{className:"col-sm-8",children:e.header.poNumber}),s.jsx("dt",{className:"col-sm-4",children:"Order Date"}),s.jsx("dd",{className:"col-sm-8",children:ks(new Date(e.header.orderDate),"MMM d, yyyy")}),s.jsx("dt",{className:"col-sm-4",children:"Total Amount"}),s.jsx("dd",{className:"col-sm-8",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.totalCost)}),s.jsx("dt",{className:"col-sm-4",children:"Products"}),s.jsxs("dd",{className:"col-sm-8",children:[e.products.length," items"]})]})]}),s.jsxs("div",{className:"col-md-6",children:[s.jsx("h6",{children:"Shipping Information"}),s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-4",children:"Ship To"}),s.jsxs("dd",{className:"col-sm-8",children:[e.header.syscoLocation.name,e.header.syscoLocation.address&&s.jsx("div",{className:"small text-muted",children:e.header.syscoLocation.address})]}),s.jsx("dt",{className:"col-sm-4",children:"Buyer"}),s.jsxs("dd",{className:"col-sm-8",children:[e.header.buyerInfo.firstName," ",e.header.buyerInfo.lastName,s.jsx("div",{className:"small text-muted",children:e.header.buyerInfo.email})]}),(null==(n=e.header.deliveryInfo)?void 0:n.instructions)&&s.jsxs(s.Fragment,{children:[s.jsx("dt",{className:"col-sm-4",children:"Instructions"}),s.jsx("dd",{className:"col-sm-8",children:e.header.deliveryInfo.instructions})]})]})]})]})})]}),l?s.jsx(o,{noValidate:!0,validated:p,onSubmit:async t=>{t.preventDefault();if(!t.currentTarget.checkValidity())return t.stopPropagation(),void g(!0);try{b(!0),y(null);const t={header:{...e.header,deliveryInfo:{...e.header.deliveryInfo,date:c.shippingDate}},shipping:{carrier:c.carrier,trackingNumber:c.trackingNumber,shippingDate:c.shippingDate,estimatedDeliveryDate:c.estimatedDeliveryDate,status:"in-transit"},documents:[...e.documents||[],...m.map((e=>({id:e.id,url:e.url,name:e.name,type:"shipping",uploadedAt:(new Date).toISOString()})))]};await r(t),await i(Le.SHIPPED,c.notes),D("Purchase order marked as shipped successfully"),b(!1)}catch(s){y(s instanceof Error?s.message:"Failed to mark purchase order as shipped"),b(!1)}},children:s.jsxs(N,{className:"mb-4",children:[s.jsx(N.Header,{className:"bg-status-confirmed-light",children:s.jsxs("h5",{className:"mb-0",children:[s.jsx("i",{className:"bi bi-truck me-2"}),"Mark Order as Shipped"]})}),s.jsxs(N.Body,{children:[s.jsxs("div",{className:"row",children:[s.jsx("div",{className:"col-md-6",children:s.jsxs(o.Group,{className:"mb-3",controlId:"shippingDate",children:[s.jsx(o.Label,{children:"Shipping Date *"}),s.jsx(o.Control,{type:"date",name:"shippingDate",value:c.shippingDate,onChange:S,required:!0}),s.jsx(o.Control.Feedback,{type:"invalid",children:"Shipping date is required"})]})}),s.jsx("div",{className:"col-md-6",children:s.jsxs(o.Group,{className:"mb-3",controlId:"estimatedDeliveryDate",children:[s.jsx(o.Label,{children:"Estimated Delivery Date *"}),s.jsx(o.Control,{type:"date",name:"estimatedDeliveryDate",value:c.estimatedDeliveryDate,onChange:S,required:!0}),s.jsx(o.Control.Feedback,{type:"invalid",children:"Estimated delivery date is required"})]})}),s.jsx("div",{className:"col-md-6",children:s.jsxs(o.Group,{className:"mb-3",controlId:"carrier",children:[s.jsx(o.Label,{children:"Carrier *"}),s.jsx(o.Control,{type:"text",name:"carrier",value:c.carrier,onChange:S,placeholder:"Enter carrier name",required:!0}),s.jsx(o.Control.Feedback,{type:"invalid",children:"Carrier is required"})]})}),s.jsx("div",{className:"col-md-6",children:s.jsxs(o.Group,{className:"mb-3",controlId:"trackingNumber",children:[s.jsx(o.Label,{children:"Tracking Number *"}),s.jsx(o.Control,{type:"text",name:"trackingNumber",value:c.trackingNumber,onChange:S,placeholder:"Enter tracking number",required:!0}),s.jsx(o.Control.Feedback,{type:"invalid",children:"Tracking number is required"})]})})]}),s.jsx("h6",{className:"mt-2 mb-3",children:"Shipping Documents"}),s.jsx(La,{onFileUpload:e=>{x((t=>[...t,...e]))},acceptedFileTypes:".pdf,.jpg,.jpeg,.png,.doc,.docx",maxFileSize:5,multiple:!0,className:"mb-3"}),m.length>0&&s.jsxs("div",{className:"mb-4 mt-3",children:[s.jsx("h6",{children:"Uploaded Documents"}),s.jsx("div",{className:"list-group",children:m.map((e=>s.jsxs("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[s.jsxs("div",{children:[s.jsx("i",{className:"bi bi-file-earmark me-2"}),e.name]}),s.jsx(d,{variant:"outline-danger",size:"sm",onClick:()=>{return t=e.id,void x((e=>e.filter((e=>e.id!==t))));var t},children:s.jsx("i",{className:"bi bi-trash"})})]},e.id)))})]}),s.jsxs(o.Group,{className:"mb-3",controlId:"notes",children:[s.jsx(o.Label,{children:"Shipping Notes"}),s.jsx(o.Control,{as:"textarea",name:"notes",rows:3,value:c.notes,onChange:S,placeholder:"Add any notes about shipping"})]})]}),s.jsx(N.Footer,{className:"d-flex justify-content-end",children:s.jsx(d,{variant:"primary",type:"submit",disabled:j||null!==a&&!a.isValid,children:j?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"bi bi-truck me-2"}),"Mark as Shipped"]})})})]})}):s.jsxs(I,{variant:"warning",children:[s.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"This purchase order cannot be marked as shipped at this time."]})]})},Ba=({po:e,statusDefinition:t,onUpdate:a,onStatusChange:r})=>{var i,n,l;const c=t.allowedTransitions.includes(Le.INVOICED),[u,m]=h.useState({invoiceNumber:"",invoiceDate:new Date,amount:e.totalCost||0,dueDate:new Date(Date.now()+2592e6),notes:""}),[x,p]=h.useState([]),[g,j]=h.useState(!1),[b,f]=h.useState(!1),[y,v]=h.useState(null),[w,D]=h.useState(null),S=e=>{const{name:t,value:s}=e.target;m((e=>({...e,[t]:"amount"===t?parseFloat(s)||0:s})))},C=(e,t)=>{t&&m((s=>({...s,[e]:t})))},k=e=>{if(!e)return"N/A";try{const t=new Date(e);return isNaN(t.getTime())?e:ks(t,"MMM d, yyyy")}catch(t){return e}};return s.jsxs(N,{className:"mb-3",children:[s.jsxs(N.Header,{className:"bg-status-shipped text-white d-flex justify-content-between align-items-center",children:[s.jsxs("div",{children:[s.jsx("i",{className:"bi bi-truck me-2"}),"Create Invoice for Shipped Order"]}),(null==(i=e.header.deliveryInfo)?void 0:i.date)&&s.jsxs("div",{className:"badge bg-light text-dark",children:["Shipped on: ",k(e.header.deliveryInfo.date)]})]}),s.jsxs(N.Body,{children:[y&&s.jsxs(I,{variant:"danger",onClose:()=>v(null),dismissible:!0,children:[s.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),y]}),w&&s.jsxs(I,{variant:"success",onClose:()=>D(null),dismissible:!0,children:[s.jsx("i",{className:"bi bi-check-circle-fill me-2"}),w]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h5",{children:"Shipping Information"}),s.jsxs("div",{className:"row g-3",children:[s.jsxs("div",{className:"col-md-6",children:[s.jsx("strong",{children:"Ship To:"})," ",e.header.syscoLocation.name,e.header.syscoLocation.address&&s.jsx("div",{className:"text-muted small",children:e.header.syscoLocation.address})]}),s.jsxs("div",{className:"col-md-6",children:[s.jsx("strong",{children:"Shipping Date:"})," ",k(null==(n=e.header.deliveryInfo)?void 0:n.date),(null==(l=e.header.deliveryInfo)?void 0:l.instructions)&&s.jsxs("div",{className:"text-muted small",children:[s.jsx("strong",{children:"Instructions:"})," ",e.header.deliveryInfo.instructions]})]})]})]}),c?s.jsxs(o,{noValidate:!0,validated:g,onSubmit:async t=>{t.preventDefault();if(!t.currentTarget.checkValidity())return t.stopPropagation(),void j(!0);try{f(!0),v(null);const t={invoice:{invoiceNumber:u.invoiceNumber,invoiceDate:ks(u.invoiceDate,"MM/dd/yy"),amount:u.amount,dueDate:ks(u.dueDate,"MM/dd/yy")},documents:[...e.documents||[],...x.map((e=>({id:e.id,url:e.url,name:e.name,type:"shipping",uploadedAt:(new Date).toISOString()})))]};await a(t),await r(Le.INVOICED,u.notes),D("Invoice created and status updated successfully"),f(!1)}catch(s){v(s instanceof Error?s.message:"Failed to create invoice"),f(!1)}},children:[s.jsxs("div",{className:"mb-4",children:[s.jsx("h5",{children:"Invoice Information"}),s.jsxs("div",{className:"row g-3",children:[s.jsx("div",{className:"col-md-6",children:s.jsxs(o.Group,{controlId:"invoiceNumber",children:[s.jsx(o.Label,{children:"Invoice Number *"}),s.jsx(o.Control,{type:"text",name:"invoiceNumber",value:u.invoiceNumber,onChange:S,required:!0,placeholder:"Enter invoice number"}),s.jsx(o.Control.Feedback,{type:"invalid",children:"Invoice number is required"})]})}),s.jsx("div",{className:"col-md-6",children:s.jsxs(o.Group,{controlId:"invoiceDate",children:[s.jsx(o.Label,{children:"Invoice Date *"}),s.jsx(o.Control,{type:"date",name:"invoiceDate",value:u.invoiceDate.toISOString().split("T")[0],onChange:e=>C("invoiceDate",e.target.value?new Date(e.target.value):null),required:!0}),s.jsx(o.Control.Feedback,{type:"invalid",children:"Invoice date is required"})]})}),s.jsx("div",{className:"col-md-6",children:s.jsxs(o.Group,{controlId:"amount",children:[s.jsx(o.Label,{children:"Invoice Amount *"}),s.jsx(o.Control,{type:"number",name:"amount",value:u.amount,onChange:S,required:!0,min:"0",step:"0.01"}),s.jsx(o.Control.Feedback,{type:"invalid",children:"Invoice amount is required and must be greater than 0"})]})}),s.jsx("div",{className:"col-md-6",children:s.jsxs(o.Group,{controlId:"dueDate",children:[s.jsx(o.Label,{children:"Due Date *"}),s.jsx(o.Control,{type:"date",name:"dueDate",value:u.dueDate.toISOString().split("T")[0],onChange:e=>C("dueDate",e.target.value?new Date(e.target.value):null),required:!0}),s.jsx(o.Control.Feedback,{type:"invalid",children:"Due date is required"})]})})]})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h5",{children:"Shipping Documents"}),s.jsx(La,{onFileUpload:e=>{p((t=>[...t,...e]))},acceptedFileTypes:".pdf,.jpg,.jpeg,.png,.doc,.docx",maxFileSize:5,multiple:!0}),x.length>0&&s.jsxs("div",{className:"mt-3",children:[s.jsx("h6",{children:"Uploaded Documents"}),s.jsx("div",{className:"list-group",children:x.map((e=>s.jsxs("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[s.jsxs("div",{children:[s.jsx("i",{className:"bi bi-file-earmark me-2"}),e.name]}),s.jsx(d,{variant:"outline-danger",size:"sm",onClick:()=>{return t=e.id,void p((e=>e.filter((e=>e.id!==t))));var t},children:s.jsx("i",{className:"bi bi-trash"})})]},e.id)))})]})]}),s.jsx("div",{className:"mb-4",children:s.jsxs(o.Group,{controlId:"notes",children:[s.jsx(o.Label,{children:"Notes"}),s.jsx(o.Control,{as:"textarea",name:"notes",value:u.notes,onChange:S,rows:3,placeholder:"Add any notes about this invoice"})]})}),s.jsxs("div",{className:"d-flex justify-content-end gap-2",children:[s.jsx(d,{variant:"outline-secondary",type:"button",disabled:b,children:"Cancel"}),s.jsx(d,{variant:"primary",type:"submit",disabled:b,children:b?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Processing..."]}):s.jsx(s.Fragment,{children:"Create Invoice & Update Status"})})]})]}):s.jsxs(I,{variant:"warning",children:[s.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"Transitioning to INVOICED status is not currently available."]})]})]})},qa=({po:e,statusDefinition:t,validationResult:a,onUpdate:r,onStatusChange:i})=>{const n=t.allowedTransitions.includes(Le.DELIVERED),l=ks(new Date,"yyyy-MM-dd"),[c,u]=h.useState({deliveryDate:l,receivedBy:"",condition:"good",notes:""}),[m,g]=h.useState([]),[j,b]=h.useState(!1),[f,y]=h.useState(!1),[v,w]=h.useState(null),[D,S]=h.useState(null),C=e=>{const{name:t,value:s}=e.target;u((e=>({...e,[t]:s})))},k=e=>{if(!e)return"N/A";try{return ks(new Date(e),"MMM d, yyyy")}catch(t){return e}};return s.jsxs("div",{className:"invoiced-status-panel",children:[v&&s.jsxs(I,{variant:"danger",className:"mb-4",onClose:()=>w(null),dismissible:!0,children:[s.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),v]}),D&&s.jsxs(I,{variant:"success",className:"mb-4",onClose:()=>S(null),dismissible:!0,children:[s.jsx("i",{className:"bi bi-check-circle-fill me-2"}),D]}),s.jsxs(N,{className:"mb-4",children:[s.jsx(N.Header,{className:"bg-status-invoiced-light",children:s.jsxs("h5",{className:"mb-0",children:[s.jsx("i",{className:"bi bi-receipt me-2"}),"Invoice Details"]})}),s.jsx(N.Body,{children:e.invoice?s.jsxs(x,{children:[s.jsx(p,{md:6,children:s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-4",children:"Invoice Number"}),s.jsx("dd",{className:"col-sm-8",children:e.invoice.invoiceNumber}),s.jsx("dt",{className:"col-sm-4",children:"Invoice Date"}),s.jsx("dd",{className:"col-sm-8",children:k(e.invoice.invoiceDate)})]})}),s.jsx(p,{md:6,children:s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-4",children:"Amount"}),s.jsx("dd",{className:"col-sm-8",children:(E=e.invoice.amount,new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(E))}),s.jsx("dt",{className:"col-sm-4",children:"Due Date"}),s.jsx("dd",{className:"col-sm-8",children:k(e.invoice.dueDate)})]})})]}):s.jsxs(I,{variant:"warning",children:[s.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"No invoice information available."]})})]}),e.shipping&&s.jsxs(N,{className:"mb-4",children:[s.jsx(N.Header,{className:"bg-status-shipped-light",children:s.jsxs("h5",{className:"mb-0",children:[s.jsx("i",{className:"bi bi-truck me-2"}),"Shipping Information"]})}),s.jsx(N.Body,{children:s.jsxs(x,{children:[s.jsx(p,{md:6,children:s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-4",children:"Carrier"}),s.jsx("dd",{className:"col-sm-8",children:e.shipping.carrier}),s.jsx("dt",{className:"col-sm-4",children:"Ship Date"}),s.jsx("dd",{className:"col-sm-8",children:k(e.shipping.shippingDate)})]})}),s.jsx(p,{md:6,children:s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-4",children:"Tracking"}),s.jsx("dd",{className:"col-sm-8",children:s.jsxs("a",{href:`https://www.google.com/search?q=${e.shipping.carrier}+tracking+${e.shipping.trackingNumber}`,target:"_blank",rel:"noopener noreferrer",children:[e.shipping.trackingNumber,s.jsx("i",{className:"bi bi-box-arrow-up-right ms-2 small"})]})}),s.jsx("dt",{className:"col-sm-4",children:"Est. Delivery"}),s.jsx("dd",{className:"col-sm-8",children:k(e.shipping.estimatedDeliveryDate)})]})})]})})]}),n?s.jsx(o,{noValidate:!0,validated:j,onSubmit:async t=>{t.preventDefault();if(!t.currentTarget.checkValidity())return t.stopPropagation(),void b(!0);try{y(!0),w(null);const t={delivery:{deliveryDate:c.deliveryDate,receivedBy:c.receivedBy,condition:c.condition,notes:c.notes},shipping:e.shipping?{...e.shipping,actualDeliveryDate:c.deliveryDate,status:"delivered"}:void 0,documents:[...e.documents||[],...m.map((e=>({id:e.id,url:e.url,name:e.name,type:"delivery",uploadedAt:(new Date).toISOString()})))]};await r(t),await i(Le.DELIVERED,c.notes),S("Delivery confirmed successfully"),y(!1)}catch(s){w(s instanceof Error?s.message:"Failed to confirm delivery"),y(!1)}},children:s.jsxs(N,{children:[s.jsx(N.Header,{className:"bg-status-invoiced-light",children:s.jsxs("h5",{className:"mb-0",children:[s.jsx("i",{className:"bi bi-clipboard-check me-2"}),"Confirm Delivery"]})}),s.jsxs(N.Body,{children:[s.jsxs(x,{children:[s.jsx(p,{md:6,children:s.jsxs(o.Group,{className:"mb-3",controlId:"deliveryDate",children:[s.jsx(o.Label,{children:"Delivery Date *"}),s.jsx(o.Control,{type:"date",name:"deliveryDate",value:c.deliveryDate,onChange:C,required:!0}),s.jsx(o.Control.Feedback,{type:"invalid",children:"Delivery date is required"})]})}),s.jsx(p,{md:6,children:s.jsxs(o.Group,{className:"mb-3",controlId:"receivedBy",children:[s.jsx(o.Label,{children:"Received By *"}),s.jsx(o.Control,{type:"text",name:"receivedBy",value:c.receivedBy,onChange:C,placeholder:"Enter name of person who received delivery",required:!0}),s.jsx(o.Control.Feedback,{type:"invalid",children:"Receiver's name is required"})]})}),s.jsx(p,{md:6,children:s.jsxs(o.Group,{className:"mb-3",controlId:"condition",children:[s.jsx(o.Label,{children:"Condition *"}),s.jsxs(o.Select,{name:"condition",value:c.condition,onChange:C,required:!0,children:[s.jsx("option",{value:"good",children:"Good - No issues"}),s.jsx("option",{value:"damaged",children:"Damaged - Items arrived damaged"}),s.jsx("option",{value:"partial",children:"Partial - Some items missing"})]}),s.jsx(o.Control.Feedback,{type:"invalid",children:"Please select the condition"})]})})]}),s.jsxs(o.Group,{className:"mb-3",controlId:"notes",children:[s.jsx(o.Label,{children:"Delivery Notes"}),s.jsx(o.Control,{as:"textarea",name:"notes",rows:3,value:c.notes,onChange:C,placeholder:"Add any notes about the delivery"})]}),s.jsxs("div",{className:"mb-4",children:[s.jsx("h6",{children:"Proof of Delivery Documents"}),s.jsx("p",{className:"text-muted small mb-2",children:"Upload signed delivery receipts or other proof of delivery documents"}),s.jsx(La,{onFileUpload:e=>{g((t=>[...t,...e]))},acceptedFileTypes:".pdf,.jpg,.jpeg,.png",maxFileSize:5,multiple:!0}),m.length>0&&s.jsxs("div",{className:"mt-3",children:[s.jsx("h6",{children:"Uploaded Documents"}),s.jsx("div",{className:"list-group",children:m.map((e=>s.jsxs("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[s.jsxs("div",{children:[s.jsx("i",{className:"bi bi-file-earmark me-2"}),e.name]}),s.jsx(d,{variant:"outline-danger",size:"sm",onClick:()=>{return t=e.id,void g((e=>e.filter((e=>e.id!==t))));var t},children:s.jsx("i",{className:"bi bi-trash"})})]},e.id)))})]})]})]}),s.jsx(N.Footer,{className:"d-flex justify-content-end",children:s.jsx(d,{variant:"primary",type:"submit",disabled:f||null!==a&&!a.isValid,children:f?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"bi bi-check-circle me-2"}),"Confirm Delivery"]})})})]})}):s.jsxs(I,{variant:"warning",children:[s.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"This purchase order cannot be marked as delivered at this time."]})]});var E},Va=({po:e,onUpdate:t})=>{const[a,r]=h.useState(!1),[i,n]=h.useState(null),[l,c]=h.useState(null),[u,m]=h.useState(""),[g,j]=h.useState(ks(new Date,"yyyy-MM-dd")),b=e=>{if(!e)return"N/A";try{return ks(new Date(e),"MMM d, yyyy")}catch(t){return e}},f=e=>void 0===e?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e);return s.jsxs("div",{className:"delivered-status-panel",children:[i&&s.jsxs(I,{variant:"danger",className:"mb-4",onClose:()=>n(null),dismissible:!0,children:[s.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),i]}),l&&s.jsxs(I,{variant:"success",className:"mb-4",onClose:()=>c(null),dismissible:!0,children:[s.jsx("i",{className:"bi bi-check-circle-fill me-2"}),l]}),s.jsxs(N,{className:"mb-4",children:[s.jsxs(N.Header,{className:"bg-status-delivered-light d-flex align-items-center",children:[s.jsxs("h5",{className:"mb-0",children:[s.jsx("i",{className:"bi bi-truck-flatbed me-2"}),"Delivery Information"]}),e.delivery&&s.jsxs(w,{bg:"success",className:"ms-auto",children:["Delivered on: ",b(e.delivery.deliveryDate)]})]}),s.jsxs(N.Body,{children:[e.delivery?s.jsxs(x,{children:[s.jsx(p,{md:6,children:s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-4",children:"Delivery Date"}),s.jsx("dd",{className:"col-sm-8",children:b(e.delivery.deliveryDate)}),s.jsx("dt",{className:"col-sm-4",children:"Received By"}),s.jsx("dd",{className:"col-sm-8",children:e.delivery.receivedBy})]})}),s.jsx(p,{md:6,children:s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-4",children:"Condition"}),s.jsx("dd",{className:"col-sm-8",children:s.jsx(w,{bg:(e=>{switch(e){case"good":return"success";case"damaged":return"danger";case"partial":return"warning";default:return"secondary"}})(e.delivery.condition),children:(e=>{switch(e){case"good":return"Good - No issues";case"damaged":return"Damaged - Items arrived damaged";case"partial":return"Partial - Some items missing";default:return"Unknown condition"}})(e.delivery.condition)})})]})}),e.delivery.notes&&s.jsxs(p,{xs:12,className:"mt-3",children:[s.jsx("h6",{children:"Delivery Notes"}),s.jsx("div",{className:"border p-3 rounded bg-light",children:e.delivery.notes})]})]}):s.jsxs(I,{variant:"warning",children:[s.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"No delivery information available."]}),e.documents&&e.documents.length>0&&s.jsxs("div",{className:"mt-4",children:[s.jsx("h6",{children:"Delivery Documents"}),s.jsx(E,{children:e.documents.filter((e=>"delivery"===e.type)).map((e=>s.jsxs(E.Item,{className:"d-flex justify-content-between align-items-center",children:[s.jsxs("div",{children:[s.jsx("i",{className:"bi bi-file-earmark me-2"}),e.name]}),s.jsxs(d,{variant:"outline-primary",size:"sm",as:"a",href:e.url,target:"_blank",children:[s.jsx("i",{className:"bi bi-eye me-1"}),"View"]})]},e.id)))})]})]})]}),s.jsxs(N,{className:"mb-4",children:[s.jsx(N.Header,{className:"bg-status-invoiced-light",children:s.jsxs("h5",{className:"mb-0",children:[s.jsx("i",{className:"bi bi-credit-card me-2"}),"Invoice & Payment"]})}),s.jsx(N.Body,{children:e.invoice?s.jsxs(s.Fragment,{children:[s.jsxs(x,{className:"mb-4",children:[s.jsx(p,{md:6,children:s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-4",children:"Invoice #"}),s.jsx("dd",{className:"col-sm-8",children:e.invoice.invoiceNumber}),s.jsx("dt",{className:"col-sm-4",children:"Issue Date"}),s.jsx("dd",{className:"col-sm-8",children:b(e.invoice.invoiceDate)})]})}),s.jsx(p,{md:6,children:s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-4",children:"Amount"}),s.jsx("dd",{className:"col-sm-8",children:f(e.invoice.amount)}),s.jsx("dt",{className:"col-sm-4",children:"Due Date"}),s.jsxs("dd",{className:"col-sm-8",children:[b(e.invoice.dueDate),(()=>{var t;if(!(null==(t=e.invoice)?void 0:t.dueDate))return!1;const s=new Date(e.invoice.dueDate);return new Date>s&&"paid"!==e.invoice.status})()&&s.jsx(w,{bg:"danger",pill:!0,className:"ms-2",children:"Overdue"})]}),s.jsx("dt",{className:"col-sm-4",children:"Status"}),s.jsxs("dd",{className:"col-sm-8",children:[s.jsx(w,{bg:"paid"===e.invoice.status?"success":"overdue"===e.invoice.status?"danger":"warning",children:"paid"===e.invoice.status?"Paid":"overdue"===e.invoice.status?"Overdue":"Pending"}),e.invoice.paidDate&&s.jsxs("span",{className:"ms-2 text-muted",children:["(Paid on: ",b(e.invoice.paidDate),")"]})]})]})})]}),"paid"!==e.invoice.status&&s.jsx(o,{onSubmit:async s=>{s.preventDefault();try{r(!0),n(null);const s={invoice:{...e.invoice,status:"paid",paidDate:g}};await t(s),c("Payment recorded successfully"),r(!1)}catch(a){n(a instanceof Error?a.message:"Failed to record payment"),r(!1)}},children:s.jsxs(N,{className:"mb-0 mt-3",children:[s.jsx(N.Header,{children:s.jsx("h6",{className:"mb-0",children:"Record Payment"})}),s.jsxs(N.Body,{children:[s.jsx(x,{children:s.jsx(p,{md:6,children:s.jsxs(o.Group,{className:"mb-3",controlId:"paymentDate",children:[s.jsx(o.Label,{children:"Payment Date"}),s.jsx(o.Control,{type:"date",value:g,onChange:e=>j(e.target.value),required:!0})]})})}),s.jsxs(o.Group,{className:"mb-3",controlId:"paymentNotes",children:[s.jsx(o.Label,{children:"Payment Notes"}),s.jsx(o.Control,{as:"textarea",rows:3,value:u,onChange:e=>m(e.target.value),placeholder:"Add any notes about the payment"})]})]}),s.jsx(N.Footer,{className:"d-flex justify-content-end",children:s.jsx(d,{variant:"primary",type:"submit",disabled:a,children:a?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"bi bi-check-circle me-2"}),"Record Payment"]})})})]})})]}):s.jsxs(I,{variant:"warning",children:[s.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),"No invoice information available."]})})]}),s.jsxs(N,{children:[s.jsx(N.Header,{className:"bg-light",children:s.jsxs("h5",{className:"mb-0",children:[s.jsx("i",{className:"bi bi-check2-all me-2"}),"Order Summary"]})}),s.jsx(N.Body,{children:s.jsxs(x,{children:[s.jsxs(p,{md:6,children:[s.jsx("h6",{children:"Order Information"}),s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-4",children:"PO Number"}),s.jsx("dd",{className:"col-sm-8",children:e.header.poNumber}),s.jsx("dt",{className:"col-sm-4",children:"Order Date"}),s.jsx("dd",{className:"col-sm-8",children:b(e.header.orderDate)}),s.jsx("dt",{className:"col-sm-4",children:"Total Amount"}),s.jsx("dd",{className:"col-sm-8",children:f(e.totalCost)})]})]}),s.jsxs(p,{md:6,children:[s.jsx("h6",{children:"Status History"}),e.history&&e.history.length>0?s.jsx("div",{style:{maxHeight:"200px",overflowY:"auto"},children:s.jsx(E,{variant:"flush",children:e.history.map(((e,t)=>s.jsxs(E.Item,{className:"py-2",children:[s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx(w,{bg:"primary",className:"me-2",children:e.status}),s.jsx("span",{className:"text-muted small",children:b(e.timestamp)})]}),e.notes&&s.jsx("div",{className:"mt-1 small text-secondary",children:e.notes})]},t)))})}):s.jsx("p",{className:"text-muted",children:"No history available"})]})]})})]})]})},$a=({po:e,onStatusChange:t})=>{const[a,r]=h.useState(!1),[i,n]=h.useState(null),[l,o]=h.useState(null),c=e=>{if(!e)return"N/A";try{return ks(new Date(e),"MMM d, yyyy")}catch(t){return e}},u=()=>{if(!e.history)return null;const t=e.history.find((e=>e.status===Le.CANCELLED));return t?{date:t.timestamp,user:t.user,notes:t.notes}:null},m=u();return s.jsxs("div",{className:"cancelled-status-panel",children:[i&&s.jsxs(I,{variant:"danger",className:"mb-4",onClose:()=>n(null),dismissible:!0,children:[s.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),i]}),l&&s.jsxs(I,{variant:"success",className:"mb-4",onClose:()=>o(null),dismissible:!0,children:[s.jsx("i",{className:"bi bi-check-circle-fill me-2"}),l]}),s.jsxs(I,{variant:"danger",className:"d-flex align-items-center mb-4",children:[s.jsx("div",{className:"display-6 me-3",children:s.jsx("i",{className:"bi bi-x-circle"})}),s.jsxs("div",{children:[s.jsx("h4",{className:"alert-heading mb-1",children:"This Purchase Order has been cancelled"}),s.jsxs("p",{className:"mb-0",children:[m?s.jsxs(s.Fragment,{children:["Cancelled on ",c(m.date)]}):s.jsx(s.Fragment,{children:"Cancellation date not available"}),(null==m?void 0:m.user)&&s.jsxs(s.Fragment,{children:[" by ",m.user]})]})]})]}),s.jsxs(N,{className:"mb-4",children:[s.jsx(N.Header,{className:"bg-status-cancelled-light",children:s.jsxs("h5",{className:"mb-0",children:[s.jsx("i",{className:"bi bi-info-circle me-2"}),"Cancellation Details"]})}),s.jsxs(N.Body,{children:[(null==m?void 0:m.notes)?s.jsxs("div",{children:[s.jsx("h6",{children:"Cancellation Reason"}),s.jsx("div",{className:"border p-3 rounded bg-light mb-4",children:m.notes})]}):s.jsx(I,{variant:"info",className:"mb-4",children:"No cancellation reason provided."}),(()=>{const e=u();if(!e)return!1;const t=new Date(e.date),s=new Date;return Math.floor((s.getTime()-t.getTime())/864e5)<30})()&&s.jsxs("div",{className:"mt-3",children:[s.jsx("h6",{children:"Reactivation Options"}),s.jsx("p",{className:"text-muted",children:"This order was cancelled recently and can be reactivated if needed."}),s.jsx(d,{variant:"outline-primary",onClick:async()=>{try{r(!0),n(null);const e=Le.UPLOADED;await t(e,"Order reactivated from cancelled state"),o("Purchase Order reactivated successfully"),r(!1)}catch(e){n(e instanceof Error?e.message:"Failed to reactivate purchase order"),r(!1)}},disabled:a,children:a?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),"Processing..."]}):s.jsxs(s.Fragment,{children:[s.jsx("i",{className:"bi bi-arrow-counterclockwise me-2"}),"Reactivate Order"]})})]})]})]}),s.jsxs(N,{className:"mb-4",children:[s.jsx(N.Header,{className:"bg-light",children:s.jsxs("h5",{className:"mb-0",children:[s.jsx("i",{className:"bi bi-clipboard me-2"}),"Cancelled Order Summary"]})}),s.jsxs(N.Body,{children:[s.jsxs(x,{children:[s.jsxs(p,{md:6,children:[s.jsx("h6",{children:"Order Information"}),s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-4",children:"PO Number"}),s.jsx("dd",{className:"col-sm-8",children:e.header.poNumber}),s.jsx("dt",{className:"col-sm-4",children:"Order Date"}),s.jsx("dd",{className:"col-sm-8",children:c(e.header.orderDate)}),s.jsx("dt",{className:"col-sm-4",children:"Total Amount"}),s.jsx("dd",{className:"col-sm-8",children:(g=e.totalCost,void 0===g?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(g))}),s.jsx("dt",{className:"col-sm-4",children:"Products"}),s.jsxs("dd",{className:"col-sm-8",children:[e.products.length," items"]})]})]}),s.jsxs(p,{md:6,children:[s.jsx("h6",{children:"Buyer/Supplier Information"}),s.jsxs("dl",{className:"row",children:[s.jsx("dt",{className:"col-sm-4",children:"Buyer"}),s.jsxs("dd",{className:"col-sm-8",children:[e.header.buyerInfo.firstName," ",e.header.buyerInfo.lastName,s.jsx("div",{className:"small text-muted",children:e.header.buyerInfo.email})]}),s.jsx("dt",{className:"col-sm-4",children:"Location"}),s.jsxs("dd",{className:"col-sm-8",children:[e.header.syscoLocation.name,e.header.syscoLocation.address&&s.jsx("div",{className:"small text-muted",children:e.header.syscoLocation.address})]})]})]})]}),s.jsxs("div",{className:"mt-4",children:[s.jsx("h6",{children:"Order Timeline"}),e.history&&e.history.length>0?s.jsx("div",{style:{maxHeight:"250px",overflowY:"auto"},children:s.jsx(E,{variant:"flush",children:[...e.history].reverse().map(((e,t)=>s.jsxs(E.Item,{className:"py-2",children:[s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsx(w,{bg:e.status===Le.CANCELLED?"danger":"primary",className:"me-2",children:e.status}),s.jsxs("span",{className:"text-muted small",children:[c(e.timestamp),e.user&&s.jsxs(s.Fragment,{children:[" by ",e.user]})]})]}),e.notes&&s.jsx("div",{className:"mt-1 small text-secondary",children:e.notes})]},t)))})}):s.jsx("p",{className:"text-muted",children:"No history available"})]})]})]}),s.jsxs(N,{children:[s.jsx(N.Header,{className:"bg-light",children:s.jsxs("h5",{className:"mb-0",children:[s.jsx("i",{className:"bi bi-tools me-2"}),"Available Actions"]})}),s.jsx(N.Body,{children:s.jsxs(x,{className:"g-3",children:[s.jsx(p,{sm:6,children:s.jsx(N,{className:"h-100",children:s.jsxs(N.Body,{children:[s.jsxs("h6",{className:"card-title",children:[s.jsx("i",{className:"bi bi-files me-2"}),"Create New Order"]}),s.jsx("p",{className:"text-muted small",children:"Create a new purchase order based on this one"}),s.jsxs(d,{variant:"outline-primary",size:"sm",children:[s.jsx("i",{className:"bi bi-plus-circle me-2"}),"Create New Order"]})]})})}),s.jsx(p,{sm:6,children:s.jsx(N,{className:"h-100",children:s.jsxs(N.Body,{children:[s.jsxs("h6",{className:"card-title",children:[s.jsx("i",{className:"bi bi-printer me-2"}),"Export Cancelled PO"]}),s.jsx("p",{className:"text-muted small",children:"Export this cancelled purchase order to PDF"}),s.jsxs(d,{variant:"outline-secondary",size:"sm",children:[s.jsx("i",{className:"bi bi-download me-2"}),"Export to PDF"]})]})})})]})})]})]});var g},Ha=({po:e,onUpdate:t,onStatusChange:a,className:r=""})=>{const[i,n]=h.useState(null),[l,o]=h.useState(null),[c,d]=h.useState(null),[u,m]=h.useState(!0),[x,p]=h.useState(null);h.useEffect((()=>{(async()=>{try{m(!0),p(null);const t=await J.getStatus(e.header.status);n(t),o(t.requirements);const s=Ma.validateForStatus(e,e.header.status,t.requirements);d(s),m(!1)}catch(t){p(t instanceof Error?t.message:"Failed to load status requirements"),m(!1)}})()}),[e,e.header.status]);const g=async(t,s="")=>{try{const r=await Ma.validateTransition(e.header.status,t,e);if(!r.isValid)return void d(r);await a(t,s)}catch(r){console.error("Error changing status:",r),p(r instanceof Error?r.message:"Failed to change status")}};return s.jsxs("div",{className:`status-action-panel ${r}`,children:[s.jsx("div",{className:`status-action-panel__header p-3 ${j=e.header.status,{[Le.UPLOADED]:"bg-status-uploaded",[Le.CONFIRMED]:"bg-status-confirmed",[Le.SHIPPED]:"bg-status-shipped",[Le.INVOICED]:"bg-status-invoiced",[Le.DELIVERED]:"bg-status-delivered",[Le.CANCELLED]:"bg-status-cancelled"}[j]||"bg-light"}`,children:s.jsxs("h3",{className:"m-0 text-white",children:[s.jsx("i",{className:"bi bi-clipboard-check me-2"}),"Actions for ",(null==i?void 0:i.label)||e.header.status]})}),s.jsxs("div",{className:"status-action-panel__body p-3",children:[u&&s.jsxs("div",{className:"status-action-panel__loading p-4 text-center",children:[s.jsx("div",{className:"spinner-border text-primary",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Loading status actions..."})}),s.jsx("p",{className:"mt-3",children:"Loading action panel..."})]}),x&&s.jsx("div",{className:"status-action-panel__error p-4",children:s.jsxs("div",{className:"alert alert-danger mb-0",children:[s.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),x]})}),!u&&!x&&s.jsxs(s.Fragment,{children:[l&&s.jsx(Aa,{poData:e,status:e.header.status,requirements:l,validationResult:c||void 0,className:"mb-4"}),(()=>{if(!i||!l)return null;const a={po:e,statusDefinition:i,requirements:l,validationResult:c,onUpdate:t,onStatusChange:g};switch(e.header.status){case Le.UPLOADED:return s.jsx(Fa,{...a});case Le.CONFIRMED:return s.jsx(Ra,{...a});case Le.SHIPPED:return s.jsx(Ba,{...a});case Le.INVOICED:return s.jsx(qa,{...a});case Le.DELIVERED:return s.jsx(Va,{...a});case Le.CANCELLED:return s.jsx($a,{...a});default:return s.jsxs("div",{className:"alert alert-warning",children:["Unknown status: ",e.header.status]})}})()]})]})]});var j},Ua=({currentStatus:e,statusHistory:t=[],availableTransitions:a=[],onStatusChange:r,className:i=""})=>{const[n,l]=h.useState(null),[o,c]=h.useState(!0),[d,u]=h.useState(null),m=h.useCallback(((e,t)=>{const s=Object.entries(e).map((([e,s])=>{return{id:e,label:s.label,description:s.description,color:(a=s.color,{UPLOADED:"#FF9800",CONFIRMED:"#2196F3",SHIPPED:"#673AB7",INVOICED:"#3F51B5",DELIVERED:"#4CAF50",CANCELLED:"#F44336"}[a]||"#9E9E9E"),isCurrent:e===t};var a})),r=[];return Object.entries(e).forEach((([e,s])=>{s.allowedTransitions.forEach((s=>{r.push({source:e,target:s,isAvailable:e===t&&a.includes(s)})}))})),{nodes:s,links:r}}),[]);h.useEffect((()=>{(async()=>{try{c(!0);const t=await J.getStatuses(),s=m(t,e);l(s),c(!1)}catch(t){u(t instanceof Error?t.message:"Failed to load workflow data"),c(!1)}})()}),[e,t,m]),h.useEffect((()=>{u(null)}),[e,a]);const x=((e,t=[])=>{const s=h.useRef(null);return h.useEffect((()=>{if(s.current){const t=$(s.current);e(t)}}),[e,...t]),s})(h.useCallback((t=>{if(!n)return;const s=t.node();if(!s)return;const i=s.clientWidth||800,l=s.clientHeight||200;t.selectAll("*").remove();const o=H(n.nodes).force("link",U(n.links).id((e=>e.id))).force("charge",G().strength(-300)).force("center",Y(i/2,l/2)).force("collision",z().radius(50)),c=t.append("g").attr("class","links").selectAll("line").data(n.links).enter().append("line").attr("class","link").attr("stroke",(e=>e.isAvailable?"#4CAF50":"#9E9E9E")).attr("stroke-width",2).attr("stroke-dasharray",(e=>e.isAvailable?"0":"5,5")),d=t.append("g").attr("class","nodes").selectAll(".node").data(n.nodes).enter().append("g").attr("class",(e=>`node ${e.isCurrent?"current":""} ${a.includes(e.id)?"available":""}`)).style("cursor",(e=>a.includes(e.id)?"pointer":"default")).on("click",((e,t)=>{a.includes(t.id)&&r(t.id)}));d.append("circle").attr("r",30).attr("fill",(e=>e.color)).attr("stroke",(t=>t.id===e?"#1565C0":"none")).attr("stroke-width",3),d.append("text").attr("dy","0.35em").attr("text-anchor","middle").attr("fill","white").attr("font-size","12px").text((e=>e.label)),d.append("title").text((e=>`${e.label}: ${e.description}`)),d.on("mouseover",(function(){$(this).select("circle").transition().duration(200).attr("r",33)})).on("mouseout",(function(){$(this).select("circle").transition().duration(200).attr("r",30)})),o.on("tick",(()=>{n.nodes.forEach((e=>{e.x=Math.max(30,Math.min(i-30,e.x)),e.y=Math.max(30,Math.min(l-30,e.y))})),c.attr("x1",(e=>e.source.x)).attr("y1",(e=>e.source.y)).attr("x2",(e=>e.target.x)).attr("y2",(e=>e.target.y)),d.attr("transform",(e=>`translate(${e.x}, ${e.y})`))})),t.append("defs").selectAll("marker").data(["available","unavailable"]).enter().append("marker").attr("id",(e=>`arrowhead-${e}`)).attr("viewBox","0 -5 10 10").attr("refX",30).attr("refY",0).attr("markerWidth",6).attr("markerHeight",6).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").attr("fill",(e=>"available"===e?"#4CAF50":"#9E9E9E")),c.attr("marker-end",(e=>`url(#arrowhead-${e.isAvailable?"available":"unavailable"})`)),c.on("mouseover",(function(){$(this).transition().duration(200).attr("stroke-width",3)})).on("mouseout",(function(){$(this).transition().duration(200).attr("stroke-width",2)}))}),[n,e,a,r]),[n,e,a]);return o?s.jsx("div",{className:`workflow-visualizer ${i}`,children:s.jsx("div",{className:"workflow-visualizer__loading",children:s.jsx("div",{className:"spinner-border text-primary",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Loading workflow..."})})})}):d?s.jsx("div",{className:`workflow-visualizer ${i}`,children:s.jsxs("div",{className:"workflow-visualizer__error alert alert-danger",children:[s.jsx("i",{className:"bi bi-exclamation-triangle me-2"}),d]})}):s.jsxs("div",{className:`workflow-visualizer ${i}`,children:[s.jsx("h3",{className:"workflow-visualizer__title",children:"Purchase Order Workflow"}),s.jsx("div",{className:"workflow-visualizer__container",children:s.jsx("svg",{ref:x,className:"workflow-visualizer__svg",width:"100%",height:"220",viewBox:"0 0 800 200",preserveAspectRatio:"xMidYMid meet"})}),s.jsxs("div",{className:"workflow-visualizer__legend",children:[s.jsx("span",{className:"legend-item current",children:"Current Status"}),s.jsx("span",{className:"legend-item available",children:"Available Transitions"}),s.jsx("span",{className:"legend-item unavailable",children:"Other Statuses"})]})]})};let Ga=null;const Ya=(e,t)=>{try{if(qe.debug(`[NAVIGATION] Attempting to navigate to: ${e}`,t),!Ga)return qe.warn("[NAVIGATION] React Router navigate function not available, falling back to window.location"),void((null==t?void 0:t.replace)?window.location.replace(e.toString()):window.location.href=e.toString());try{Ga(e,t),qe.debug(`[NAVIGATION] Successfully navigated to: ${e}`)}catch(s){throw qe.error("[NAVIGATION] React Router navigation failed:",s),s}}catch(a){qe.error("[NAVIGATION] Critical error during navigation:",a);try{const t="string"==typeof e?e:JSON.stringify(e);qe.warn(`[NAVIGATION] Attempting fallback navigation to ${t}`),window.location.href=e.toString()}catch(r){qe.error("[NAVIGATION] Fallback navigation failed:",r)}}},za=e=>{Ga=e,qe.debug("[DEBUG] Navigation utility initialized with React Router navigate function")},_a=e=>{Ya(`/purchase-orders/${e}`)},Wa=e=>{Ya("/purchase-orders/create",e)},Qa=e=>{Ya("/purchase-orders",e)},Ka=()=>{const{poNumber:e}=P();console.log("PODetailPage mounted. PO Number from URL:",e);const t=y(),[a,n]=h.useState("details"),{purchaseOrder:l,loading:o,error:c,availableTransitions:u}=v((e=>e.poDetail));h.useEffect((()=>{e?(console.log("Dispatching fetchPODetail action for PO Number:",e),t(pe(e))):console.error("No PO Number found in URL params!")}),[t,e]);const m=async(s,a)=>{if(e&&l)try{await t(je({poNumber:e,newStatus:s,notes:a,oldStatus:l.header.status})).unwrap(),t(pe(e))}catch(r){qe.error("Failed to update PO status:",r)}},g=e=>{if(!e)return"N/A";try{return ks(new Date(e),"MMM d, yyyy")}catch(t){return e}},j=e=>void 0===e?"N/A":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),b=e=>{switch(e){case Le.UPLOADED:return"warning";case Le.CONFIRMED:return"info";case Le.SHIPPED:return"primary";case Le.INVOICED:return"secondary";case Le.DELIVERED:return"success";case Le.CANCELLED:return"danger";default:return"light"}};return o&&!l?s.jsxs(r,{className:"py-5 text-center",children:[s.jsx(O,{animation:"border",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Loading..."})}),s.jsx("p",{className:"mt-3",children:"Loading purchase order details..."})]}):c&&!l?s.jsx(r,{className:"py-5",children:s.jsxs(I,{variant:"danger",children:[s.jsx(I.Heading,{children:"Error Loading Purchase Order"}),s.jsx("p",{children:c}),s.jsx("hr",{}),s.jsx("div",{className:"d-flex justify-content-end",children:s.jsx(d,{variant:"outline-danger",onClick:()=>Qa(),children:"Back to Purchase Orders"})})]})}):l?s.jsxs(r,{fluid:!0,className:"py-4",children:[s.jsxs("div",{className:"page-header d-sm-flex justify-content-between align-items-center mb-4",children:[s.jsxs("div",{children:[s.jsxs("h1",{className:"h2 mb-1",children:["Purchase Order: ",l.header.poNumber]}),s.jsxs("div",{className:"text-muted",children:[g(l.header.orderDate)," · ",l.products.length," items · ",j(l.totalCost)]})]}),s.jsxs("div",{className:"mt-3 mt-sm-0 d-flex gap-2",children:[s.jsx(w,{pill:!0,bg:b(l.header.status),className:"fs-6 d-flex align-items-center px-3 py-2",children:l.header.status}),s.jsxs("div",{className:"dropdown",children:[s.jsx(d,{variant:"outline-secondary",className:"dropdown-toggle","data-bs-toggle":"dropdown",children:s.jsx("i",{className:"bi bi-three-dots"})}),s.jsxs("ul",{className:"dropdown-menu dropdown-menu-end",children:[s.jsx("li",{children:s.jsxs("a",{className:"dropdown-item",href:"#export",children:[s.jsx("i",{className:"bi bi-download me-2"}),"Export to PDF"]})}),s.jsx("li",{children:s.jsxs("a",{className:"dropdown-item",href:"#print",children:[s.jsx("i",{className:"bi bi-printer me-2"}),"Print"]})}),s.jsx("li",{children:s.jsx("hr",{className:"dropdown-divider"})}),s.jsx("li",{children:s.jsxs("a",{className:"dropdown-item text-danger",href:"#cancel",children:[s.jsx("i",{className:"bi bi-x-circle me-2"}),"Cancel Order"]})})]})]})]})]}),s.jsx("nav",{"aria-label":"breadcrumb",className:"mb-4",children:s.jsxs("ol",{className:"breadcrumb",children:[s.jsx("li",{className:"breadcrumb-item",children:s.jsx(i,{to:"/dashboard",children:"Dashboard"})}),s.jsx("li",{className:"breadcrumb-item",children:s.jsx(i,{to:"/purchase-orders",children:"Purchase Orders"})}),s.jsx("li",{className:"breadcrumb-item active",children:l.header.poNumber})]})}),s.jsxs(x,{children:[s.jsx(p,{lg:8,children:s.jsxs(N,{className:"mb-4",children:[s.jsxs(N.Header,{className:"d-flex justify-content-between align-items-center",children:[s.jsx("h5",{className:"mb-0",children:"Purchase Order Information"}),s.jsxs(d,{variant:"outline-secondary",size:"sm",onClick:()=>n("details"),children:[s.jsx("i",{className:"bi bi-pencil me-1"}),"Edit"]})]}),s.jsx(N.Body,{children:s.jsxs(T,{activeKey:a,onSelect:e=>e&&n(e),className:"mb-4",children:[s.jsxs(M,{eventKey:"details",title:"Details",children:[s.jsxs(x,{children:[s.jsxs(p,{md:6,children:[s.jsx("h6",{className:"mb-3",children:"Order Information"}),s.jsx("table",{className:"table table-sm table-borderless",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"fw-medium w-40",children:"PO Number:"}),s.jsx("td",{children:l.header.poNumber})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"fw-medium",children:"Order Date:"}),s.jsx("td",{children:g(l.header.orderDate)})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"fw-medium",children:"Status:"}),s.jsx("td",{children:s.jsx(w,{bg:b(l.header.status),children:l.header.status})})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"fw-medium",children:"Total Cost:"}),s.jsx("td",{children:j(l.totalCost)})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"fw-medium",children:"Total Items:"}),s.jsx("td",{children:l.products.length})]})]})})]}),s.jsxs(p,{md:6,children:[s.jsx("h6",{className:"mb-3",children:"Contact Information"}),s.jsx("table",{className:"table table-sm table-borderless",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"fw-medium w-40",children:"Buyer:"}),s.jsxs("td",{children:[l.header.buyerInfo.firstName," ",l.header.buyerInfo.lastName,s.jsx("div",{className:"text-muted small",children:l.header.buyerInfo.email})]})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"fw-medium",children:"Location:"}),s.jsxs("td",{children:[l.header.syscoLocation.name,l.header.syscoLocation.address&&s.jsx("div",{className:"text-muted small",children:l.header.syscoLocation.address})]})]})]})})]})]}),s.jsx("hr",{}),s.jsx("h6",{className:"mb-3",children:"Products"}),s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-bordered table-hover",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{children:"SUPC"}),s.jsx("th",{children:"Description"}),s.jsx("th",{children:"Pack Size"}),s.jsx("th",{className:"text-center",children:"Quantity"}),s.jsx("th",{className:"text-end",children:"FOB Cost"}),s.jsx("th",{className:"text-end",children:"Total"})]})}),s.jsx("tbody",{children:l.products.map(((e,t)=>s.jsxs("tr",{children:[s.jsx("td",{children:e.supc}),s.jsx("td",{children:e.description||"N/A"}),s.jsx("td",{children:e.packSize||"N/A"}),s.jsx("td",{className:"text-center",children:e.quantity}),s.jsx("td",{className:"text-end",children:j(e.fobCost)}),s.jsx("td",{className:"text-end",children:j(e.total)})]},t)))}),s.jsx("tfoot",{children:s.jsxs("tr",{children:[s.jsx("th",{colSpan:4}),s.jsx("th",{className:"text-end",children:"Total:"}),s.jsx("th",{className:"text-end",children:j(l.totalCost)})]})})]})})]}),s.jsxs(M,{eventKey:"activity",title:"Activity Log",children:[s.jsx("h6",{className:"mb-3",children:"Status History"}),s.jsx("div",{className:"timeline mb-4",children:l.history&&l.history.length>0?s.jsx("div",{className:"timeline-container",children:l.history.map(((e,t)=>s.jsxs("div",{className:"timeline-item",children:[s.jsx("div",{className:"timeline-icon bg-primary",children:s.jsx("i",{className:"bi bi-clock"})}),s.jsxs("div",{className:"timeline-content",children:[s.jsx("div",{className:"timeline-date text-muted",children:g(e.timestamp)}),s.jsxs("h6",{className:"timeline-title",children:[s.jsx(w,{bg:b(e.status),children:e.status}),e.user&&s.jsxs("span",{className:"ms-2 fw-normal",children:["by ",e.user]})]}),e.notes&&s.jsx("div",{className:"timeline-text",children:e.notes})]})]},t)))}):s.jsx(I,{variant:"info",children:"No history available for this purchase order."})})]}),s.jsxs(M,{eventKey:"documents",title:"Documents",children:[s.jsx("h6",{className:"mb-3",children:"Attached Documents"}),l.documents&&l.documents.length>0?s.jsx("div",{className:"list-group",children:l.documents.map((e=>s.jsxs("div",{className:"list-group-item list-group-item-action d-flex align-items-center",children:[s.jsxs("div",{children:[s.jsx("i",{className:"bi bi-file-earmark me-2"}),s.jsx("span",{className:"fw-medium",children:e.name}),s.jsxs("div",{className:"text-muted small",children:[e.type," · ",g(e.uploadedAt)]})]}),s.jsxs(d,{variant:"outline-primary",size:"sm",className:"ms-auto",as:"a",href:e.url,target:"_blank",rel:"noopener noreferrer",children:[s.jsx("i",{className:"bi bi-eye me-1"}),"View"]})]},e.id)))}):s.jsx(I,{variant:"info",children:"No documents attached to this purchase order."})]}),s.jsxs(M,{eventKey:"delivery",title:"Delivery Info",children:[s.jsx("h6",{className:"mb-3",children:"Shipping Information"}),l.shipping?s.jsxs(x,{className:"mb-4",children:[s.jsx(p,{md:6,children:s.jsx("table",{className:"table table-sm table-borderless",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"fw-medium w-40",children:"Carrier:"}),s.jsx("td",{children:l.shipping.carrier})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"fw-medium",children:"Tracking #:"}),s.jsx("td",{children:s.jsxs("a",{href:`https://www.google.com/search?q=${l.shipping.carrier}+tracking+${l.shipping.trackingNumber}`,target:"_blank",rel:"noopener noreferrer",children:[l.shipping.trackingNumber,s.jsx("i",{className:"bi bi-box-arrow-up-right ms-2 small"})]})})]})]})})}),s.jsx(p,{md:6,children:s.jsx("table",{className:"table table-sm table-borderless",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"fw-medium w-40",children:"Ship Date:"}),s.jsx("td",{children:g(l.shipping.shippingDate)})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"fw-medium",children:"Est. Delivery:"}),s.jsx("td",{children:g(l.shipping.estimatedDeliveryDate)})]}),l.shipping.actualDeliveryDate&&s.jsxs("tr",{children:[s.jsx("td",{className:"fw-medium",children:"Actual Delivery:"}),s.jsx("td",{children:g(l.shipping.actualDeliveryDate)})]})]})})})]}):s.jsx(I,{variant:"info",className:"mb-4",children:"No shipping information available."}),s.jsx("h6",{className:"mb-3",children:"Delivery Information"}),l.delivery?s.jsx(x,{className:"mb-4",children:s.jsx(p,{md:6,children:s.jsx("table",{className:"table table-sm table-borderless",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"fw-medium w-40",children:"Delivered On:"}),s.jsx("td",{children:g(l.delivery.deliveryDate)})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"fw-medium",children:"Received By:"}),s.jsx("td",{children:l.delivery.receivedBy})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"fw-medium",children:"Condition:"}),s.jsx("td",{children:s.jsx(w,{bg:"good"===l.delivery.condition?"success":"damaged"===l.delivery.condition?"danger":"warning",children:"good"===l.delivery.condition?"Good - No issues":"damaged"===l.delivery.condition?"Damaged":"Partial"})})]})]})})})}):s.jsx(I,{variant:"info",children:"No delivery information available."})]}),s.jsxs(M,{eventKey:"invoice",title:"Invoice",children:[s.jsx("h6",{className:"mb-3",children:"Invoice Information"}),l.invoice?s.jsxs(x,{className:"mb-4",children:[s.jsx(p,{md:6,children:s.jsx("table",{className:"table table-sm table-borderless",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"fw-medium w-40",children:"Invoice #:"}),s.jsx("td",{children:l.invoice.invoiceNumber})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"fw-medium",children:"Invoice Date:"}),s.jsx("td",{children:g(l.invoice.invoiceDate)})]})]})})}),s.jsx(p,{md:6,children:s.jsx("table",{className:"table table-sm table-borderless",children:s.jsxs("tbody",{children:[s.jsxs("tr",{children:[s.jsx("td",{className:"fw-medium w-40",children:"Amount:"}),s.jsx("td",{children:j(l.invoice.amount)})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"fw-medium",children:"Due Date:"}),s.jsx("td",{children:g(l.invoice.dueDate)})]}),s.jsxs("tr",{children:[s.jsx("td",{className:"fw-medium",children:"Status:"}),s.jsx("td",{children:s.jsx(w,{bg:"paid"===l.invoice.status?"success":"overdue"===l.invoice.status?"danger":"warning",children:l.invoice.status||"Pending"})})]}),l.invoice.paidDate&&s.jsxs("tr",{children:[s.jsx("td",{className:"fw-medium",children:"Paid On:"}),s.jsx("td",{children:g(l.invoice.paidDate)})]})]})})})]}):s.jsx(I,{variant:"info",children:"No invoice information available."})]})]})})]})}),s.jsxs(p,{lg:4,children:[s.jsxs(N,{className:"mb-4",children:[s.jsx(N.Header,{children:s.jsx("h5",{className:"mb-0",children:"Order Workflow"})}),s.jsx(N.Body,{children:s.jsx(Ua,{currentStatus:l.header.status,statusHistory:l.history,availableTransitions:u,onStatusChange:m})})]}),s.jsx(Ha,{po:l,onUpdate:async s=>{if(e&&l)try{await t(ge({poNumber:e,updateData:s})).unwrap(),t(pe(e))}catch(a){qe.error("Failed to update PO:",a)}},onStatusChange:m})]})]})]}):null},Xa=()=>{const[e,t]=h.useState(!1),[a,n]=h.useState(!1),[l,c]=h.useState(!1),[u,m]=h.useState(null),[g,j]=h.useState({poNumber:"",orderDate:(new Date).toISOString().split("T")[0],buyerFirstName:"",buyerLastName:"",buyerEmail:"",locationName:"",locationAddress:"",deliveryDate:"",deliveryInstructions:""}),[b,f]=h.useState([{id:1,supc:"",description:"",quantity:1,price:0,total:0}]),y=e=>{const{name:t,value:s}=e.target;j((e=>({...e,[t]:s})))},v=(e,t,s)=>{f((a=>a.map((a=>{if(a.id===e){const e={...a,[t]:s};if("quantity"===t||"price"===t){const r="quantity"===t?Number(s):a.quantity,i="price"===t?Number(s):a.price;e.total=r*i}return e}return a}))))},w=()=>b.reduce(((e,t)=>e+t.total),0),D=async()=>{c(!0),m(null);try{const e={header:{poNumber:"",status:Le.UPLOADED,orderDate:g.orderDate,buyerInfo:{firstName:g.buyerFirstName,lastName:g.buyerLastName,email:g.buyerEmail},syscoLocation:{name:g.locationName,address:g.locationAddress},deliveryInfo:{date:g.deliveryDate||(new Date).toISOString(),instructions:g.deliveryInstructions}},products:b.map((e=>({supc:e.supc,description:e.description,quantity:e.quantity,fobCost:e.price,total:e.total}))),totalCost:w(),weights:{grossWeight:0,netWeight:0},revision:1,history:[]},t=await J.createPO(e);return n(!0),t}catch(e){return m(e instanceof Error?e.message:"Failed to create purchase order"),null}finally{c(!1)}};return s.jsxs(r,{fluid:!0,children:[s.jsx("div",{className:"d-flex align-items-center justify-content-between mb-4",children:s.jsx("h1",{className:"h2 mb-0 text-gray-800",children:"Create New Purchase Order"})}),a&&s.jsxs(I,{variant:"success",dismissible:!0,onClose:()=>n(!1),className:"mb-4",children:[s.jsx(I.Heading,{children:"Purchase Order Created Successfully!"}),s.jsx("p",{children:"Your purchase order has been created and is being processed. You will be redirected to the PO details page momentarily."})]}),u&&s.jsxs(I,{variant:"danger",dismissible:!0,onClose:()=>m(null),className:"mb-4",children:[s.jsx(I.Heading,{children:"Error Creating Purchase Order"}),s.jsx("p",{children:u})]}),s.jsxs(o,{noValidate:!0,validated:e,onSubmit:async e=>{e.preventDefault();if(!e.currentTarget.checkValidity())return e.stopPropagation(),void t(!0);const s=await D();s?setTimeout((()=>{const e=s.header.poNumber;_a(e)}),2e3):window.scrollTo(0,0)},children:[s.jsxs(N,{className:"mb-4 shadow-sm",children:[s.jsx(N.Header,{className:"bg-light py-3",children:s.jsx("h5",{className:"mb-0 fw-bold",children:"Order Information"})}),s.jsx(N.Body,{children:s.jsxs(x,{className:"g-3",children:[s.jsx(p,{md:6,lg:3,children:s.jsxs(o.Group,{controlId:"poNumber",children:[s.jsx(o.Label,{children:"PO Number"}),s.jsx(o.Control,{type:"text",placeholder:"Auto-generated",name:"poNumber",disabled:!0})]})}),s.jsx(p,{md:6,lg:3,children:s.jsxs(o.Group,{controlId:"orderDate",children:[s.jsx(o.Label,{children:"Order Date *"}),s.jsx(o.Control,{type:"date",name:"orderDate",value:g.orderDate,onChange:y,required:!0}),s.jsx(o.Control.Feedback,{type:"invalid",children:"Please provide an order date."})]})}),s.jsx(p,{md:6,lg:3,children:s.jsxs(o.Group,{controlId:"deliveryDate",children:[s.jsx(o.Label,{children:"Requested Delivery Date *"}),s.jsx(o.Control,{type:"date",name:"deliveryDate",value:g.deliveryDate,onChange:y,required:!0}),s.jsx(o.Control.Feedback,{type:"invalid",children:"Please provide a delivery date."})]})}),s.jsx(p,{md:6,lg:3,children:s.jsxs(o.Group,{controlId:"status",children:[s.jsx(o.Label,{children:"Status"}),s.jsx(o.Control,{type:"text",placeholder:"UPLOADED",disabled:!0})]})})]})})]}),s.jsxs(N,{className:"mb-4 shadow-sm",children:[s.jsx(N.Header,{className:"bg-light py-3",children:s.jsx("h5",{className:"mb-0 fw-bold",children:"Buyer Information"})}),s.jsx(N.Body,{children:s.jsxs(x,{className:"g-3",children:[s.jsx(p,{md:6,children:s.jsxs(o.Group,{controlId:"buyerFirstName",children:[s.jsx(o.Label,{children:"First Name *"}),s.jsx(o.Control,{type:"text",placeholder:"Enter first name",name:"buyerFirstName",value:g.buyerFirstName,onChange:y,required:!0}),s.jsx(o.Control.Feedback,{type:"invalid",children:"Please provide a first name."})]})}),s.jsx(p,{md:6,children:s.jsxs(o.Group,{controlId:"buyerLastName",children:[s.jsx(o.Label,{children:"Last Name *"}),s.jsx(o.Control,{type:"text",placeholder:"Enter last name",name:"buyerLastName",value:g.buyerLastName,onChange:y,required:!0}),s.jsx(o.Control.Feedback,{type:"invalid",children:"Please provide a last name."})]})}),s.jsx(p,{md:12,children:s.jsxs(o.Group,{controlId:"buyerEmail",children:[s.jsx(o.Label,{children:"Email Address *"}),s.jsx(o.Control,{type:"email",placeholder:"Enter email",name:"buyerEmail",value:g.buyerEmail,onChange:y,required:!0}),s.jsx(o.Control.Feedback,{type:"invalid",children:"Please provide a valid email address."})]})})]})})]}),s.jsxs(N,{className:"mb-4 shadow-sm",children:[s.jsx(N.Header,{className:"bg-light py-3",children:s.jsx("h5",{className:"mb-0 fw-bold",children:"Location Information"})}),s.jsx(N.Body,{children:s.jsxs(x,{className:"g-3",children:[s.jsx(p,{md:6,children:s.jsxs(o.Group,{controlId:"locationName",children:[s.jsx(o.Label,{children:"Location Name *"}),s.jsx(o.Control,{type:"text",placeholder:"Enter location name",name:"locationName",value:g.locationName,onChange:y,required:!0}),s.jsx(o.Control.Feedback,{type:"invalid",children:"Please provide a location name."})]})}),s.jsx(p,{md:6,children:s.jsxs(o.Group,{controlId:"locationAddress",children:[s.jsx(o.Label,{children:"Address *"}),s.jsx(o.Control,{type:"text",placeholder:"Enter address",name:"locationAddress",value:g.locationAddress,onChange:y,required:!0}),s.jsx(o.Control.Feedback,{type:"invalid",children:"Please provide an address."})]})}),s.jsx(p,{md:12,children:s.jsxs(o.Group,{controlId:"deliveryInstructions",children:[s.jsx(o.Label,{children:"Delivery Instructions"}),s.jsx(o.Control,{as:"textarea",rows:2,placeholder:"Enter any special delivery instructions",name:"deliveryInstructions",value:g.deliveryInstructions,onChange:y})]})})]})})]}),s.jsxs(N,{className:"mb-4 shadow-sm",children:[s.jsxs(N.Header,{className:"bg-light py-3 d-flex justify-content-between",children:[s.jsx("h5",{className:"mb-0 fw-bold",children:"Product Items"}),s.jsxs(d,{variant:"primary",size:"sm",onClick:()=>{const e=Math.max(...b.map((e=>e.id)),0)+1;f([...b,{id:e,supc:"",description:"",quantity:1,price:0,total:0}])},children:[s.jsx("i",{className:"bi bi-plus"})," Add Item"]})]}),s.jsx(N.Body,{children:s.jsx("div",{className:"table-responsive",children:s.jsxs(C,{bordered:!0,children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{style:{width:"5%"},children:"#"}),s.jsx("th",{style:{width:"20%"},children:"SUPC *"}),s.jsx("th",{style:{width:"30%"},children:"Description"}),s.jsx("th",{style:{width:"10%"},children:"Quantity *"}),s.jsx("th",{style:{width:"15%"},children:"Unit Price *"}),s.jsx("th",{style:{width:"15%"},children:"Total"}),s.jsx("th",{style:{width:"5%"},children:"Actions"})]})}),s.jsx("tbody",{children:b.map(((e,t)=>s.jsxs("tr",{children:[s.jsx("td",{children:t+1}),s.jsx("td",{children:s.jsx(o.Control,{type:"text",placeholder:"SUPC",value:e.supc,onChange:t=>v(e.id,"supc",t.target.value),required:!0,size:"sm"})}),s.jsx("td",{children:s.jsx(o.Control,{type:"text",placeholder:"Product description",value:e.description,onChange:t=>v(e.id,"description",t.target.value),size:"sm"})}),s.jsx("td",{children:s.jsx(o.Control,{type:"number",min:"1",value:e.quantity,onChange:t=>v(e.id,"quantity",Number(t.target.value)),required:!0,size:"sm"})}),s.jsx("td",{children:s.jsx(o.Control,{type:"number",min:"0",step:"0.01",value:e.price,onChange:t=>v(e.id,"price",Number(t.target.value)),required:!0,size:"sm"})}),s.jsx("td",{className:"text-end",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e.total)}),s.jsx("td",{className:"text-center",children:s.jsx(d,{variant:"outline-danger",size:"sm",onClick:()=>{return t=e.id,void(b.length>1&&f(b.filter((e=>e.id!==t))));var t},disabled:b.length<=1,children:s.jsx("i",{className:"bi bi-trash"})})})]},e.id)))}),s.jsx("tfoot",{children:s.jsxs("tr",{children:[s.jsx("td",{colSpan:5,className:"text-end fw-bold",children:"Order Total:"}),s.jsx("td",{className:"text-end fw-bold",children:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(w())}),s.jsx("td",{})]})})]})})})]}),s.jsxs("div",{className:"mb-4 d-flex justify-content-between",children:[s.jsxs(d,{variant:"outline-secondary",children:[s.jsx("i",{className:"bi bi-arrow-left me-1"}),s.jsx(i,{to:"/purchase-orders",className:"text-decoration-none text-secondary",children:"Cancel"})]}),s.jsxs("div",{children:[s.jsxs(d,{variant:"outline-primary",className:"me-2",type:"reset",children:[s.jsx("i",{className:"bi bi-arrow-counterclockwise me-1"})," Reset"]}),s.jsxs(d,{variant:"success",type:"submit",disabled:l,children:[l&&s.jsx("span",{className:"spinner-border spinner-border-sm me-2",role:"status","aria-hidden":"true"}),s.jsx("i",{className:"bi bi-check2-circle me-1"})," Create Purchase Order"]})]})]})]})]})},Za={},Ja=function(e,t,s){let a=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),s=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));a=Promise.allSettled(t.map((e=>{if((e=function(e){return"/"+e}(e))in Za)return;Za[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${a}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script"),r.crossOrigin="",r.href=e,s&&r.setAttribute("nonce",s),document.head.appendChild(r),t?new Promise(((t,s)=>{r.addEventListener("load",t),r.addEventListener("error",(()=>s(new Error(`Unable to preload CSS for ${e}`))))})):void 0})))}function r(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return a.then((t=>{for(const e of t||[])"rejected"===e.status&&r(e.reason);return e().catch(r)}))};class er{static componentDidMount(e,t){this.DEBUG_ENABLED&&qe.debug(`[MOUNT] ${e} mounted`,t?{props:t}:void 0)}static componentWillUnmount(e){this.DEBUG_ENABLED&&qe.debug(`[UNMOUNT] ${e} will unmount`)}static componentDidUpdate(e,t,s){this.DEBUG_ENABLED&&qe.debug(`[UPDATE] ${e} updated`,{...t?{prevProps:t}:{},...s?{nextProps:s}:{}})}static renderError(e,t){qe.error(`[RENDER ERROR] ${e} failed to render:`,t)}static dataFetch(e,t,s,a){this.DEBUG_ENABLED&&qe.debug(`[DATA ${s.toUpperCase()}] ${e} - ${t}`,a)}static visualizationRendered(e,t,s){this.DEBUG_ENABLED&&qe.debug(`[VISUALIZATION] ${e} rendered ${t} items`+(s?` in ${s}ms`:""))}}t(er,"DEBUG_ENABLED",!0);class tr extends h.Component{constructor(e){super(e),t(this,"handleReset",(()=>{this.setState({hasError:!1,error:null,errorInfo:null}),this.props.onRetry&&this.props.onRetry()})),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,t){const s=this.props.componentName||"Unknown";qe.error(`[ERROR BOUNDARY] Error caught in ${s}:`,e),qe.error("[ERROR BOUNDARY] Component Stack:",t.componentStack),er.renderError(s,e),this.setState({errorInfo:t})}render(){if(this.state.hasError){const e=this.props.fallback;return e||s.jsxs(I,{variant:"danger",className:"m-3",children:[s.jsx(I.Heading,{children:"Component Error"}),s.jsxs("p",{children:["There was an error rendering the ",this.props.componentName||"component","."]}),this.state.error&&s.jsx("pre",{className:"error-message p-2 bg-light",children:this.state.error.toString()}),s.jsx("div",{className:"d-flex justify-content-end",children:s.jsx(d,{variant:"outline-danger",size:"sm",onClick:this.handleReset,children:"Try Again"})})]})}return this.props.children}}const sr=h.lazy((()=>Ja((()=>import("./CalendarView-CVYikX2H.js")),__vite__mapDeps([0,1,2,3])))),ar=h.lazy((()=>Ja((()=>import("./KanbanBoard-DlrLZQ94.js")),__vite__mapDeps([4,1,2,3])))),rr=h.lazy((()=>Ja((()=>import("./TimelineView-By6m8i9H.js")),__vite__mapDeps([5,1,2,3])))),ir=h.lazy((()=>Ja((()=>import("./GeographicMap-DYaEOUa3.js")),__vite__mapDeps([6,1,2,3])))),nr=()=>{const[e,t]=h.useState("calendar"),[a,i]=h.useState(!1),[c,u]=h.useState("orderDate"),[m,g]=h.useState("this-month"),[j,b]=h.useState("month"),[f,y]=h.useState("status"),[v,w]=h.useState("orderDate"),[D,S]=h.useState("all"),[C,k]=h.useState("month"),[I,E]=h.useState("none"),[P,O]=h.useState("all"),[T,A]=h.useState("all"),[L,F]=h.useState("current-month"),[R,B]=h.useState("all"),[q,V]=h.useState([]),[$,H]=h.useState(!1);h.useEffect((()=>(er.componentDidMount("PlanningHubPage",{viewMode:e}),K(),()=>{er.componentWillUnmount("PlanningHubPage")})),[e]);const[U,G]=h.useState(0),Y=h.useMemo((()=>s.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{minHeight:"600px"},children:s.jsx("span",{className:"spinner-border text-primary",style:{width:"3rem",height:"3rem"}})})),[]),z=(e,t)=>{"dateField"===e?u(t):"dateRange"===e?g(t):"range"===e&&b(t)},_=(e,t)=>{"groupBy"===e?y(t):"sortBy"===e?w(t):"filterStatus"===e&&S(t)},W=(e,t)=>{"timeRange"===e?k(t):"groupBy"===e?E(t):"milestoneType"===e&&O(t)},Q=(e,t)=>{"region"===e?A(t):"deliveryStatus"===e?B(t):"timePeriod"===e&&F(t)},K=async()=>{if(!a){i(!0);const s=new Date;let a=new Date(s),r=new Date(s);"calendar"===e?"this-month"===m?(a=new Date(s.getFullYear(),s.getMonth(),1),r=new Date(s.getFullYear(),s.getMonth()+1,0)):"next-month"===m?(a=new Date(s.getFullYear(),s.getMonth()+1,1),r=new Date(s.getFullYear(),s.getMonth()+2,0)):"next-3-months"===m&&(a=new Date,r=new Date,r.setMonth(r.getMonth()+3)):"timeline"===e&&("month"===C?a.setMonth(a.getMonth()-1):"quarter"===C?a.setMonth(a.getMonth()-3):"6months"===C?a.setMonth(a.getMonth()-6):"year"===C&&a.setFullYear(a.getFullYear()-1));try{const e=await J.fetchPOs({startDate:a.toISOString(),endDate:r.toISOString(),limit:100,page:1});e&&e.metadata&&G(e.metadata.total)}catch(t){qe.error("Error refreshing data:",t)}finally{setTimeout((()=>{i(!1)}),300)}}},X=()=>{qe.debug("handleApplyFilters called"),qe.debug(`Filter button clicked - current view mode: ${e}`),K()},Z=e=>{V(e),qe.debug(`Selection changed: ${e.length} items selected: ${e.join(", ")}`)},ee=(e,t)=>{qe.debug("handleBatchOperation called with:",{operation:e,params:t}),qe.debug(`Executing batch operation: ${e}`,{params:t}),0!==q.length&&(H(!0),setTimeout((()=>{qe.info(`Completed batch operation: ${e}`,{selectedItems:q,params:t}),H(!1),Z([]),V([])}),1500))},te=e=>{qe.debug("handlePOSelect called with:",{poNumber:e,type:typeof e});try{if("string"==typeof e&&e.startsWith("PO")){qe.info("[NAVIGATION] Navigating to PO detail page:",`/purchase-orders/${e}`);try{_a(e)}catch(t){qe.error("[NAVIGATION ERROR] Failed to navigate:",t)}}else qe.debug("[NAVIGATION] Non-PO selection detected:",e)}catch(s){qe.error("[CRITICAL] Unexpected error in handlePOSelect:",s)}},se=(e,t)=>{try{return qe.debug(`[RENDER] About to render ${t}`),e}catch(a){return((e,t)=>{qe.error(`[CRITICAL] Error rendering ${e}:`,t),er.renderError(e,t)})(t,a),s.jsxs("div",{className:"alert alert-danger m-3",children:["Error rendering ",t,". Please check the console for details."]})}};return s.jsxs(r,{fluid:!0,children:[s.jsxs("div",{className:"d-sm-flex align-items-center justify-content-between mb-4",children:[s.jsx("h1",{className:"h2 mb-0 text-gray-800",children:"Planning Hub"}),s.jsx("div",{className:"d-flex align-items-center me-3",children:s.jsx("span",{className:"badge bg-primary p-2 rounded-pill",children:a?"Loading...":`${U} Purchase Orders`})}),s.jsx("div",{children:s.jsxs(d,{variant:"primary",onClick:()=>Wa(),children:[s.jsx("i",{className:"bi bi-plus-lg me-1"}),"New PO"]})})]}),s.jsxs(N,{className:"mb-4 shadow-sm",children:[s.jsx(N.Header,{className:"bg-light py-3",children:s.jsxs(x,{className:"align-items-center",children:[s.jsx(p,{children:s.jsx("h5",{className:"m-0 fw-bold",children:"Visualization Options"})}),s.jsx(p,{xs:"auto",children:s.jsxs(l,{variant:"pills",activeKey:e,onSelect:e=>t(e),className:"nav-pills-toggle",children:[s.jsx(l.Item,{children:s.jsxs(l.Link,{eventKey:"calendar",title:"Calendar View",children:[s.jsx("i",{className:"bi bi-calendar3 me-1"}),s.jsx("span",{className:"d-none d-md-inline",children:"Calendar"})]})}),s.jsx(l.Item,{children:s.jsxs(l.Link,{eventKey:"kanban",title:"Kanban Board",children:[s.jsx("i",{className:"bi bi-kanban me-1"}),s.jsx("span",{className:"d-none d-md-inline",children:"Kanban"})]})}),s.jsx(l.Item,{children:s.jsxs(l.Link,{eventKey:"timeline",title:"Timeline View",children:[s.jsx("i",{className:"bi bi-bar-chart-steps me-1"}),s.jsx("span",{className:"d-none d-md-inline",children:"Timeline"})]})}),s.jsx(l.Item,{children:s.jsxs(l.Link,{eventKey:"map",title:"Geographic Map",children:[s.jsx("i",{className:"bi bi-geo-alt me-1"}),s.jsx("span",{className:"d-none d-md-inline",children:"Map"})]})})]})})]})}),s.jsx(N.Body,{children:s.jsxs(M.Content,{children:[s.jsx(M.Pane,{active:"calendar"===e,children:s.jsxs(x,{className:"g-3",children:[s.jsx(p,{md:4,lg:3,children:s.jsxs(o.Group,{controlId:"calendarDateRange",children:[s.jsx(o.Label,{children:"Date Range"}),s.jsxs(o.Select,{value:m,onChange:e=>z("dateRange",e.target.value),children:[s.jsx("option",{value:"this-month",children:"This Month"}),s.jsx("option",{value:"next-month",children:"Next Month"}),s.jsx("option",{value:"next-3-months",children:"Next 3 Months"}),s.jsx("option",{children:"Custom Range"})]})]})}),s.jsx(p,{md:4,lg:3,children:s.jsxs(o.Group,{controlId:"calendarViewType",children:[s.jsx(o.Label,{children:"View Type"}),s.jsxs(o.Select,{value:j,onChange:e=>z("range",e.target.value),children:[s.jsx("option",{value:"month",children:"Month View"}),s.jsx("option",{value:"week",children:"Week View"}),s.jsx("option",{value:"day",children:"Day View"}),s.jsx("option",{value:"agenda",children:"Agenda View"})]})]})}),s.jsx(p,{md:4,lg:3,children:s.jsxs(o.Group,{controlId:"calendarDateField",children:[s.jsx(o.Label,{children:"Date Field"}),s.jsxs(o.Select,{value:c,onChange:e=>z("dateField",e.target.value),children:[s.jsx("option",{value:"orderDate",children:"Order Date"}),s.jsx("option",{value:"deliveryDate",children:"Expected Delivery"}),s.jsx("option",{value:"shipDate",children:"Ship Date"}),s.jsx("option",{value:"invoiceDate",children:"Actual Delivery"})]})]})}),s.jsx(p,{lg:3,className:"d-flex align-items-end",children:s.jsx(d,{variant:"primary",onClick:X,disabled:a,children:a?"Loading...":"Apply Filters"})})]})}),s.jsx(M.Pane,{active:"kanban"===e,children:s.jsxs(x,{className:"g-3",children:[s.jsx(p,{md:4,lg:3,children:s.jsxs(o.Group,{controlId:"kanbanGroupBy",children:[s.jsx(o.Label,{children:"Group By"}),s.jsxs(o.Select,{value:f,onChange:e=>_("groupBy",e.target.value),children:[s.jsx("option",{children:"Status"}),s.jsx("option",{children:"Supplier"}),s.jsx("option",{children:"Location"}),s.jsx("option",{children:"Buyer"})]})]})}),s.jsx(p,{md:4,lg:3,children:s.jsxs(o.Group,{controlId:"kanbanSortBy",children:[s.jsx(o.Label,{children:"Sort By"}),s.jsxs(o.Select,{value:v,onChange:e=>_("sortBy",e.target.value),children:[s.jsx("option",{children:"Order Date"}),s.jsx("option",{children:"Amount"}),s.jsx("option",{children:"Due Date"}),s.jsx("option",{children:"Priority"})]})]})}),s.jsx(p,{md:4,lg:3,children:s.jsxs(o.Group,{children:[s.jsx(o.Label,{children:"Filter Status"}),s.jsxs(o.Select,{value:D,onChange:e=>_("filterStatus",e.target.value),children:[s.jsx("option",{value:"all",children:"All Statuses"}),s.jsx("option",{value:"open",children:"Open Orders Only"}),s.jsx("option",{value:"completed",children:"Completed Orders Only"}),s.jsx("option",{value:"custom",children:"Custom Selection"})]})]})}),s.jsx(p,{lg:3,className:"d-flex align-items-end",children:s.jsx(d,{variant:"primary",onClick:X,disabled:a,children:a?"Loading...":"Apply Layout"})})]})}),s.jsx(M.Pane,{active:"timeline"===e,children:s.jsxs(x,{className:"g-3",children:[s.jsx(p,{md:4,lg:3,children:s.jsxs(o.Group,{controlId:"timelineTimeRange",children:[s.jsx(o.Label,{children:"Time Range"}),s.jsxs(o.Select,{value:C,onChange:e=>W("timeRange",e.target.value),children:[s.jsx("option",{children:"Last 30 Days"}),s.jsx("option",{children:"Last 90 Days"}),s.jsx("option",{children:"Last 6 Months"}),s.jsx("option",{children:"Last Year"}),s.jsx("option",{children:"Custom Range"})]})]})}),s.jsx(p,{md:4,lg:3,children:s.jsxs(o.Group,{controlId:"timelineGroupBy",children:[s.jsx(o.Label,{children:"Group By"}),s.jsxs(o.Select,{value:I,onChange:e=>W("groupBy",e.target.value),children:[s.jsx("option",{children:"None"}),s.jsx("option",{children:"Supplier"}),s.jsx("option",{children:"Status"}),s.jsx("option",{children:"Location"})]})]})}),s.jsx(p,{md:4,lg:3,children:s.jsxs(o.Group,{children:[s.jsx(o.Label,{children:"Milestone Type"}),s.jsxs(o.Select,{value:P,onChange:e=>W("milestoneType",e.target.value),children:[s.jsx("option",{value:"all",children:"All Events"}),s.jsx("option",{value:"status",children:"Status Changes Only"}),s.jsx("option",{value:"delivery",children:"Delivery Milestones"}),s.jsx("option",{value:"payment",children:"Payment Milestones"})]})]})}),s.jsx(p,{lg:3,className:"d-flex align-items-end",children:s.jsx(d,{variant:"primary",onClick:X,disabled:a,children:a?"Loading...":"Apply View"})})]})}),s.jsx(M.Pane,{active:"map"===e,children:s.jsxs(x,{className:"g-3",children:[s.jsx(p,{md:4,lg:3,children:s.jsxs(o.Group,{controlId:"mapRegion",children:[s.jsx(o.Label,{children:"Region"}),s.jsxs(o.Select,{value:T,onChange:e=>Q("region",e.target.value),children:[s.jsx("option",{children:"All Regions"}),s.jsx("option",{children:"North America"}),s.jsx("option",{children:"Europe"}),s.jsx("option",{children:"Asia Pacific"}),s.jsx("option",{children:"Latin America"})]})]})}),s.jsx(p,{md:4,lg:3,children:s.jsxs(o.Group,{controlId:"mapDeliveryStatus",children:[s.jsx(o.Label,{children:"Delivery Status"}),s.jsxs(o.Select,{value:R,onChange:e=>Q("deliveryStatus",e.target.value),children:[s.jsx("option",{children:"All Orders"}),s.jsx("option",{children:"Pending Delivery"}),s.jsx("option",{children:"In Transit"}),s.jsx("option",{children:"Delivered"})]})]})}),s.jsx(p,{md:4,lg:3,children:s.jsxs(o.Group,{children:[s.jsx(o.Label,{children:"Time Period"}),s.jsxs(o.Select,{value:L,onChange:e=>Q("timePeriod",e.target.value),children:[s.jsx("option",{value:"current-month",children:"Current Month"}),s.jsx("option",{value:"last-3-months",children:"Last 3 Months"}),s.jsx("option",{value:"ytd",children:"YTD"}),s.jsx("option",{value:"custom",children:"Custom Range"})]})]})}),s.jsx(p,{lg:3,className:"d-flex align-items-end",children:s.jsx(d,{variant:"primary",onClick:X,disabled:a,children:a?"Loading...":"Update Map"})})]})})]})})]}),s.jsx(N,{className:"mb-4 shadow-sm",style:{minHeight:"600px"},children:s.jsx(N.Body,{className:"p-0",children:s.jsxs(h.Suspense,{fallback:Y,children:["calendar"===e&&s.jsx("div",{className:"calendar-container",style:{height:"600px"},children:se(s.jsx(sr,{dateField:c,range:j,onPOSelect:te,className:"h-100"}),"CalendarView")}),"kanban"===e&&s.jsx("div",{className:"kanban-container",style:{height:"600px"},children:se(s.jsx(ar,{groupBy:f,sortBy:v,filterStatus:D,onPOSelect:te,onStatusChange:async(e,t)=>{qe.debug(`handleStatusChange called with: ${e}, ${t}`);try{if(i(!0),!e||!t)return void qe.error("Invalid arguments for status change");await J.updateStatus(e,t),qe.info(`Successfully changed status of ${e} to ${t}`),K()}finally{}},className:"h-100"}),"KanbanBoard")}),"timeline"===e&&s.jsx("div",{className:"timeline-container",style:{height:"600px"},children:se(s.jsx(tr,{componentName:"TimelineView",onRetry:()=>K(),children:s.jsx(rr,{timeRange:C,groupBy:I,onTimeRangeChange:e=>{qe.debug("PlanningHubPage.handleTimeRangeChange called with:",e),e!==C&&(k(e),K())},onPOSelect:te,milestoneType:P,className:"h-100"})}),"TimelineView")}),"map"===e&&s.jsx("div",{className:"map-container",style:{height:"600px"},children:se(s.jsx(ir,{region:T,deliveryStatus:R,timePeriod:L,onBatchSelectionChange:Z,onPOSelect:te,className:"h-100"}),"GeographicMap")})]})})}),s.jsxs(N,{className:"shadow-sm",children:[s.jsx(N.Header,{className:"bg-light py-3",children:s.jsx("h5",{className:"mb-0 fw-bold",children:"Batch Operations"})}),s.jsxs(N.Body,{children:[s.jsxs("p",{className:"mb-3",children:["Selected Items: ",s.jsx("span",{className:"fw-bold",children:q.length}),q.length>0&&s.jsxs("small",{className:"ms-2 text-muted",children:["(",q.join(", "),")"]})]}),s.jsxs("div",{className:"d-flex flex-wrap gap-2",children:[s.jsxs(n,{children:[s.jsxs(n.Toggle,{variant:"primary",disabled:0===q.length||$,children:[s.jsx("i",{className:"bi bi-check-circle me-1"})," Status Change"]}),s.jsxs(n.Menu,{children:[s.jsx(n.Item,{onClick:()=>ee("statusChange",{status:"CONFIRMED"}),children:"Mark as Confirmed"}),s.jsx(n.Item,{onClick:()=>ee("statusChange",{status:"SHIPPED"}),children:"Mark as Shipped"}),s.jsx(n.Item,{onClick:()=>ee("statusChange",{status:"DELIVERED"}),children:"Mark as Delivered"}),s.jsx(n.Divider,{}),s.jsx(n.Item,{className:"text-danger",onClick:()=>ee("statusChange",{status:"CANCELLED"}),children:"Mark as Cancelled"})]})]}),s.jsxs(d,{variant:"outline-primary",disabled:0===q.length||$,onClick:()=>ee("edit"),children:[s.jsx("i",{className:"bi bi-pencil me-1"})," Edit Selected"]}),s.jsxs(d,{variant:"outline-primary",disabled:0===q.length||$,onClick:()=>ee("duplicate"),children:[s.jsx("i",{className:"bi bi-files me-1"})," Duplicate"]}),s.jsxs(d,{variant:"outline-primary",disabled:0===q.length||$,onClick:()=>ee("export"),children:[s.jsx("i",{className:"bi bi-file-earmark-excel me-1"})," Export"]}),s.jsxs(d,{variant:"outline-danger",disabled:0===q.length||$,onClick:()=>ee("delete"),children:[s.jsx("i",{className:"bi bi-trash me-1"})," ",$?"Processing...":"Delete"]})]})]})]})]})};_.register(...W);const lr=({data:e,options:t,height:a=320,width:r=100,className:i=""})=>{const n=h.useRef(null),l=h.useRef(null),o={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",align:"end"},tooltip:{mode:"index",intersect:!1}},hover:{mode:"nearest",intersect:!0},scales:{x:{grid:{display:!1}},y:{beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}}}};return h.useEffect((()=>{if(n.current){l.current&&l.current.destroy();const s=n.current.getContext("2d");s&&(l.current=new _(s,{type:"line",data:e,options:{...o,...t}}))}return()=>{l.current&&l.current.destroy()}}),[e,t]),s.jsx("div",{className:`line-chart-container ${i}`,style:{height:a,width:`${r}%`},children:s.jsx("canvas",{ref:n})})};_.register(...W);const or=({data:e,options:t,type:a="pie",height:r=320,width:i=100,className:n="",legendPosition:l="right"})=>{const o=h.useRef(null),c=h.useRef(null),d={responsive:!0,maintainAspectRatio:!1,plugins:{legend:l?{position:l,labels:{usePointStyle:!0,padding:20,font:{size:12}}}:{display:!1},tooltip:{callbacks:{label:function(e){const t=e.label||"",s=e.formattedValue,a=e.dataset.data.reduce(((e,t)=>e+t),0);return`${t}: ${s} (${Math.round(e.raw/a*100)}%)`}}}},cutout:"doughnut"===a?"60%":void 0};return h.useEffect((()=>{if(o.current){c.current&&c.current.destroy();const s=o.current.getContext("2d");s&&(c.current=new _(s,{type:a,data:e,options:{...d,...t||{}}}))}return()=>{c.current&&c.current.destroy()}}),[e,t,a]),s.jsx("div",{className:`pie-chart-container ${n}`,style:{height:r,width:`${i}%`},children:s.jsx("canvas",{ref:o})})};_.register(...W);const cr=({data:e,options:t,height:a=320,width:r=100,className:i="",horizontal:n=!1})=>{const l=h.useRef(null),o=h.useRef(null),c={responsive:!0,maintainAspectRatio:!1,indexAxis:n?"y":"x",plugins:{legend:{position:"top",align:"end"},tooltip:{mode:"index",intersect:!1}},scales:{x:{grid:{display:!n,color:"rgba(0, 0, 0, 0.05)"},stacked:!1},y:{grid:{display:n,color:"rgba(0, 0, 0, 0.05)"},beginAtZero:!0,stacked:!1}}};return h.useEffect((()=>{if(l.current){o.current&&o.current.destroy();const s=l.current.getContext("2d");s&&(o.current=new _(s,{type:"bar",data:e,options:{...c,...t}}))}return()=>{o.current&&o.current.destroy()}}),[e,t,n]),s.jsx("div",{className:`bar-chart-container ${i}`,style:{height:a,width:`${r}%`},children:s.jsx("canvas",{ref:l})})},dr={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};
/*!
 * chartjs-adapter-date-fns v3.0.0
 * https://www.chartjs.org
 * (c) 2022 chartjs-adapter-date-fns Contributors
 * Released under the MIT license
 */Q._date.override({_id:"date-fns",formats:function(){return dr},parse:function(e,t){if(null==e)return null;const s=typeof e;return"number"===s||e instanceof Date?e=jt(e):"string"===s&&(e="string"==typeof t?wa(e,t,new Date,this.options):Da(e,this.options)),At(e)?e.getTime():null},format:function(e,t){return ks(e,t,this.options)},add:function(e,t,s){switch(s){case"millisecond":return vt(e,t);case"second":return function(e,t){return vt(e,1e3*t)}(e,t);case"minute":return function(e,t){return vt(e,t*wt)}(e,t);case"hour":return function(e,t){return vt(e,t*Dt)}(e,t);case"day":return ft(e,t);case"week":return function(e,t){return ft(e,7*t)}(e,t);case"month":return yt(e,t);case"quarter":return function(e,t){return yt(e,3*t)}(e,t);case"year":return function(e,t){return yt(e,12*t)}(e,t);default:return e}},diff:function(e,t,s){switch(s){case"millisecond":return Bt(e,t);case"second":return function(e,t,s){const a=Bt(e,t)/1e3;return Rt(null==s?void 0:s.roundingMethod)(a)}(e,t);case"minute":return function(e,t,s){const a=Bt(e,t)/wt;return Rt(null==s?void 0:s.roundingMethod)(a)}(e,t);case"hour":return function(e,t,s){const a=Bt(e,t)/Dt;return Rt(null==s?void 0:s.roundingMethod)(a)}(e,t);case"day":return Lt(e,t);case"week":return function(e,t,s){const a=Lt(e,t)/7;return Rt(null==s?void 0:s.roundingMethod)(a)}(e,t);case"month":return $t(e,t);case"quarter":return function(e,t,s){const a=$t(e,t)/3;return Rt(null==s?void 0:s.roundingMethod)(a)}(e,t);case"year":return Ht(e,t);default:return 0}},startOf:function(e,t,s){switch(t){case"second":return function(e){const t=jt(e);return t.setMilliseconds(0),t}(e);case"minute":return function(e){const t=jt(e);return t.setSeconds(0,0),t}(e);case"hour":return function(e){const t=jt(e);return t.setMinutes(0,0,0),t}(e);case"day":return Pt(e);case"week":return kt(e);case"isoWeek":return kt(e,{weekStartsOn:+s});case"month":return function(e){const t=jt(e);return t.setDate(1),t.setHours(0,0,0,0),t}(e);case"quarter":return function(e){const t=jt(e),s=t.getMonth(),a=s-s%3;return t.setMonth(a,1),t.setHours(0,0,0,0),t}(e);case"year":return Ut(e);default:return e}},endOf:function(e,t){switch(t){case"second":return function(e){const t=jt(e);return t.setMilliseconds(999),t}(e);case"minute":return function(e){const t=jt(e);return t.setSeconds(59,999),t}(e);case"hour":return function(e){const t=jt(e);return t.setMinutes(59,59,999),t}(e);case"day":return qt(e);case"week":return function(e){var t,s;const a=Ct(),r=a.weekStartsOn??(null==(s=null==(t=a.locale)?void 0:t.options)?void 0:s.weekStartsOn)??0,i=jt(e),n=i.getDay(),l=6+(n<r?-7:0)-(n-r);return i.setDate(i.getDate()+l),i.setHours(23,59,59,999),i}(e);case"month":return Vt(e);case"quarter":return function(e){const t=jt(e),s=t.getMonth(),a=s-s%3+3;return t.setMonth(a,0),t.setHours(23,59,59,999),t}(e);case"year":return function(e){const t=jt(e),s=t.getFullYear();return t.setFullYear(s+1,0,0),t.setHours(23,59,59,999),t}(e);default:return e}}}),_.register(...W);const ur=({historicalData:e,forecastData:t,options:a,xAxisLabel:r="Date",yAxisLabel:i="Value",height:n=350,width:l=100,className:o="",confidenceInterval:c})=>{const d=h.useRef(null),u=h.useRef(null),m=()=>{const s=[{label:"Historical Data",data:e.map((e=>({x:new Date((e.date,e.date)).getTime(),y:e.value}))),borderColor:"#4e73df",backgroundColor:"rgba(78, 115, 223, 0.05)",borderWidth:2,pointRadius:3,pointBackgroundColor:"#4e73df",fill:!1,tension:.1},{label:"Forecast",data:t.map((e=>({x:new Date((e.date,e.date)).getTime(),y:e.value}))),borderColor:"#1cc88a",backgroundColor:"rgba(28, 200, 138, 0.05)",borderWidth:2,borderDash:[5,5],pointRadius:3,pointBackgroundColor:"#1cc88a",fill:!1,tension:.1}];if(c){const e=c.upper.map((e=>({x:new Date((e.date,e.date)).getTime(),y:e.value}))),t=c.lower.map((e=>({x:new Date((e.date,e.date)).getTime(),y:e.value})));s.push({label:"Upper Bound",data:e,borderColor:"rgba(28, 200, 138, 0.3)",backgroundColor:"transparent",borderWidth:1,borderDash:[3,3],pointRadius:0,pointBackgroundColor:"rgba(28, 200, 138, 0.3)",tension:.1,fill:!1}),s.push({label:"Lower Bound",data:t,borderColor:"rgba(28, 200, 138, 0.3)",backgroundColor:"rgba(28, 200, 138, 0.1)",borderWidth:1,borderDash:[3,3],pointRadius:0,pointBackgroundColor:"rgba(28, 200, 138, 0.3)",tension:.1,fill:!0})}return{datasets:s}},x={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",align:"end",labels:{boxWidth:12,usePointStyle:!0}},tooltip:{mode:"index",intersect:!1,callbacks:{title:function(e){const t=e[0].parsed.x;return new Date(t).toLocaleDateString(void 0,{year:"numeric",month:"short",day:"numeric"})}}}},scales:{x:{type:"time",time:{unit:"day",tooltipFormat:"MMM d, yyyy",displayFormats:{day:"MMM d"}},title:{display:!!r,text:r},grid:{display:!1}},y:{title:{display:!!i,text:i},beginAtZero:!0,grid:{color:"rgba(0, 0, 0, 0.05)"}}},interaction:{mode:"nearest",axis:"x",intersect:!1},elements:{line:{tension:.3}}};return h.useEffect((()=>{if(d.current){u.current&&u.current.destroy();const e=d.current.getContext("2d");e&&(u.current=new _(e,{type:"line",data:m(),options:{...x,...a}}))}return()=>{u.current&&u.current.destroy()}}),[e,t,a,c,r,i]),s.jsx("div",{className:`forecast-chart-container ${o}`,style:{height:n,width:`${l}%`},children:s.jsx("canvas",{ref:d})})},hr=()=>{var e;const t=y(),{data:a,detailedData:i,loading:l,error:c}=v((e=>e.metrics)),[u,m]=h.useState("month"),[g,j]=h.useState(null),[b,f]=h.useState(!1),[w,D]=h.useState(null),{startDate:S,endDate:C}=v((e=>e.metrics.filters));h.useEffect((()=>{k()}),[u]),h.useEffect((()=>{S&&C&&E()}),[S,C]),h.useEffect((()=>{let e=null;return g&&(e=window.setInterval((()=>{P()}),1e3*g)),()=>{null!==e&&clearInterval(e)}}),[g,S,C]);const k=h.useCallback((()=>{const e=new Date;let s=new Date;if("week"===u)s.setDate(e.getDate()-7);else if("month"===u)s.setDate(e.getDate()-30);else if("quarter"===u)s.setDate(e.getDate()-90);else{if("year"!==u)return;s.setDate(e.getDate()-365)}const a=s.toISOString().split("T")[0],r=e.toISOString().split("T")[0];t(Ye({startDate:a,endDate:r}))}),[t,u]),E=h.useCallback((()=>{f(!!a),t(He()).unwrap().then((()=>{D(new Date)})).catch((e=>{console.error("Error fetching metrics:",e)})).finally((()=>{f(!1)})),t(Ue()).catch((e=>{console.error("Error fetching detailed metrics:",e)}))}),[t,a]),P=h.useCallback((()=>{f(!0),E()}),[E]),T=e=>{m(e)},M=h.useMemo((()=>{if((null==a?void 0:a.timeline)&&a.timeline.length>0){const e={};a.timeline.forEach((t=>{const s=t.date.split("T")[0];e[s]=(e[s]||0)+t.count}));const t=Object.keys(e).sort();return{labels:t.map((e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric"}))),datasets:[{label:"Orders",data:t.map((t=>e[t])),borderColor:"#4e73df",backgroundColor:"rgba(78, 115, 223, 0.05)",tension:.3,fill:!0}]}}return{labels:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],datasets:[{label:"This Year",data:Array.from({length:12},(()=>Math.floor(100*Math.random())+80)),borderColor:"#4e73df",backgroundColor:"rgba(78, 115, 223, 0.05)",tension:.3,fill:!0},{label:"Last Year",data:Array.from({length:12},(()=>Math.floor(90*Math.random())+70)),borderColor:"#858796",backgroundColor:"rgba(133, 135, 150, 0.05)",tension:.3,borderDash:[5,5],fill:!1}]}}),[a]),A=h.useMemo((()=>{const e={[Le.UPLOADED]:"#4e73df",[Le.CONFIRMED]:"#1cc88a",[Le.SHIPPED]:"#36b9cc",[Le.INVOICED]:"#f6c23e",[Le.DELIVERED]:"#858796",[Le.CANCELLED]:"#e74a3b"};if((null==a?void 0:a.statusDistribution)&&a.statusDistribution.length>0){return{labels:a.statusDistribution.map((e=>e.status)),datasets:[{data:a.statusDistribution.map((e=>e.percentage)),backgroundColor:a.statusDistribution.map((t=>e[t.status]||"#858796")),borderWidth:1,hoverOffset:5}]}}{const t=[Le.UPLOADED,Le.CONFIRMED,Le.SHIPPED,Le.INVOICED,Le.DELIVERED,Le.CANCELLED],s=[15,25,20,15,20,5],a=t.map((t=>e[t]||"#858796"));return{labels:t,datasets:[{data:s,backgroundColor:a,borderWidth:1,hoverOffset:5}]}}}),[a]),L=h.useMemo((()=>{if(null==i?void 0:i.processingTimes){const e=i.processingTimes,t=Object.keys(e).filter((e=>"total"!==e)),s=t.map((t=>e[t]));return t.push("Total Processing Time"),s.push(e.total||0),{labels:t.map((e=>e.replace(/([A-Z])/g," $1").replace(/^./,(e=>e.toUpperCase())))),datasets:[{label:"Days",data:s,backgroundColor:["#4e73df","#36b9cc","#1cc88a","#f6c23e","#858796"],borderWidth:1}]}}return{labels:["Uploaded to Confirmed","Confirmed to Shipped","Shipped to Invoiced","Invoiced to Delivered","Total Processing Time"],datasets:[{label:"Days",data:[1.2,2.5,.8,1.4,5.9],backgroundColor:["#4e73df","#36b9cc","#1cc88a","#f6c23e","#858796"],borderWidth:1}]}}),[i]),F=h.useMemo((()=>{const e=new Date;let t=[];(null==a?void 0:a.timeline)&&a.timeline.length>0&&(t=a.timeline.filter((t=>new Date(t.date)>=new Date(e.getTime()-2592e6))).map((e=>({date:new Date(e.date),value:e.count})))),!t.length||t.length;return{historicalData:t,forecastData:[],confidenceInterval:{upper:[],lower:[]}}}),[a]);if(l&&!a)return s.jsxs(r,{fluid:!0,className:"text-center py-5",children:[s.jsx(O,{animation:"border",variant:"primary"}),s.jsx("p",{className:"mt-3",children:"Loading metrics data..."}),s.jsx("p",{className:"text-muted",children:"This may take a moment while we connect to the metrics service."})]});const R=e=>void 0===e?"0":new Intl.NumberFormat("en-US").format(e),B=e=>void 0===e?"$0":new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),q=(null==a?void 0:a.totalOrders)||0,V=(null==a?void 0:a.totalValue)||0,$=(null==a?void 0:a.onTimePercentage)||0,H=(null==(e=null==i?void 0:i.processingTimes)?void 0:e.total)||0,U=12,G="up",Y=3.7,z="up",_=2,W="down",Q=1.3,K="up";return s.jsxs(r,{fluid:!0,children:[s.jsxs("div",{className:"d-sm-flex align-items-center justify-content-between mb-4",children:[s.jsx("h1",{className:"h2 mb-0 text-gray-800",children:"Metrics & Analytics"}),s.jsxs("div",{children:[s.jsxs(n,{className:"d-inline-block me-2",children:[s.jsxs(n.Toggle,{variant:"outline-primary",id:"dropdown-time-range",children:[s.jsx("i",{className:"bi bi-calendar-range me-1"}),"week"===u&&"Last 7 Days","month"===u&&"Last 30 Days","quarter"===u&&"Last 90 Days","year"===u&&"Last Year","custom"===u&&"Custom Range"]}),s.jsxs(n.Menu,{children:[s.jsx(n.Item,{onClick:()=>T("week"),children:"Last 7 Days"}),s.jsx(n.Item,{onClick:()=>T("month"),children:"Last 30 Days"}),s.jsx(n.Item,{onClick:()=>T("quarter"),children:"Last 90 Days"}),s.jsx(n.Item,{onClick:()=>T("year"),children:"Last Year"}),s.jsx(n.Divider,{}),s.jsx(n.Item,{onClick:()=>T("custom"),children:"Custom Range"})]})]}),s.jsxs(d,{variant:"primary",onClick:P,disabled:b,children:[s.jsx("i",{className:"bi bi-download me-1"}),"Export Report"]})]})]}),c&&s.jsxs(I,{variant:"danger",className:"mb-4",children:[s.jsx("i",{className:"bi bi-exclamation-triangle-fill me-2"}),c,s.jsxs(d,{variant:"outline-danger",size:"sm",className:"ms-3",onClick:P,children:[s.jsx("i",{className:"bi bi-arrow-repeat me-1"})," Retry"]})]}),s.jsxs("div",{className:"mb-4 d-flex justify-content-between align-items-center",children:[s.jsxs("div",{className:"d-flex align-items-center",children:[s.jsxs("div",{className:"me-3",children:[s.jsx("i",{className:"bi bi-arrow-repeat me-1"}),"Auto-refresh:"]}),s.jsxs(o.Select,{className:"w-auto",value:(null==g?void 0:g.toString())||"",onChange:e=>{const t=e.target.value;j(t?parseInt(t):null)},children:[s.jsx("option",{value:"",children:"Off"}),s.jsx("option",{value:"30",children:"Every 30 seconds"}),s.jsx("option",{value:"60",children:"Every minute"}),s.jsx("option",{value:"300",children:"Every 5 minutes"}),s.jsx("option",{value:"600",children:"Every 10 minutes"})]}),b&&s.jsxs("div",{className:"ms-3 text-primary",children:[s.jsx(O,{animation:"border",size:"sm",className:"me-1"}),"Refreshing..."]})]}),w&&s.jsxs("div",{className:"text-muted small",children:[s.jsx("i",{className:"bi bi-clock me-1"}),"Last updated: ",(X=w,X?X.toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"numeric",minute:"numeric"}):"Never"),s.jsx(d,{variant:"link",className:"p-0 ms-2",onClick:P,disabled:b,children:s.jsx("i",{className:"bi bi-arrow-repeat"})})]})]}),s.jsxs(x,{className:"g-3 mb-4",children:[s.jsx(p,{xl:3,md:6,children:s.jsx(N,{className:"h-100 py-2 shadow-sm",style:{borderLeft:"0.25rem solid #4e73df"},children:s.jsx(N.Body,{children:s.jsxs(x,{className:"align-items-center",children:[s.jsxs("div",{className:"col",children:[s.jsxs("div",{className:"text-xs font-weight-bold text-primary text-uppercase mb-1",children:["Total POs (",u,")"]}),s.jsx("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:R(q)}),s.jsxs("div",{className:"text-muted mt-2 small",children:[s.jsxs("span",{className:"text-success me-1",children:[s.jsx("i",{className:`bi bi-arrow-${G}`})," ",U,"%"]}),"vs previous period"]})]}),s.jsx("div",{className:"col-auto",children:s.jsx("i",{className:"bi bi-file-text-fill fa-2x text-primary opacity-25 fs-1"})})]})})})}),s.jsx(p,{xl:3,md:6,children:s.jsx(N,{className:"h-100 py-2 shadow-sm",style:{borderLeft:"0.25rem solid #1cc88a"},children:s.jsx(N.Body,{children:s.jsxs(x,{className:"align-items-center",children:[s.jsxs("div",{className:"col",children:[s.jsxs("div",{className:"text-xs font-weight-bold text-success text-uppercase mb-1",children:["Total Value (",u,")"]}),s.jsx("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:B(V)}),s.jsxs("div",{className:"text-muted mt-2 small",children:[s.jsxs("span",{className:"text-success me-1",children:[s.jsx("i",{className:`bi bi-arrow-${z}`})," ",Y,"%"]}),"vs previous period"]})]}),s.jsx("div",{className:"col-auto",children:s.jsx("i",{className:"bi bi-currency-dollar fa-2x text-success opacity-25 fs-1"})})]})})})}),s.jsx(p,{xl:3,md:6,children:s.jsx(N,{className:"h-100 py-2 shadow-sm",style:{borderLeft:"0.25rem solid #36b9cc"},children:s.jsx(N.Body,{children:s.jsxs(x,{className:"align-items-center",children:[s.jsxs("div",{className:"col",children:[s.jsx("div",{className:"text-xs font-weight-bold text-info text-uppercase mb-1",children:"On-Time Delivery"}),s.jsxs("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:[$,"%"]}),s.jsxs("div",{className:"text-muted mt-2 small",children:[s.jsxs("span",{className:"text-danger me-1",children:[s.jsx("i",{className:`bi bi-arrow-${W}`})," ",_,"%"]}),"vs previous period"]})]}),s.jsx("div",{className:"col-auto",children:s.jsx("i",{className:"bi bi-truck fa-2x text-info opacity-25 fs-1"})})]})})})}),s.jsx(p,{xl:3,md:6,children:s.jsx(N,{className:"h-100 py-2 shadow-sm",style:{borderLeft:"0.25rem solid #f6c23e"},children:s.jsx(N.Body,{children:s.jsxs(x,{className:"align-items-center",children:[s.jsxs("div",{className:"col",children:[s.jsx("div",{className:"text-xs font-weight-bold text-warning text-uppercase mb-1",children:"Processing Time (Avg)"}),s.jsxs("div",{className:"h5 mb-0 font-weight-bold text-gray-800",children:[H," days"]}),s.jsxs("div",{className:"text-muted mt-2 small",children:[s.jsxs("span",{className:"text-success me-1",children:[s.jsx("i",{className:`bi bi-arrow-${K}`})," ",Q," days"]}),"improvement"]})]}),s.jsx("div",{className:"col-auto",children:s.jsx("i",{className:"bi bi-hourglass-split fa-2x text-warning opacity-25 fs-1"})})]})})})})]}),s.jsxs(x,{className:"g-3 mb-4",children:[s.jsx(p,{lg:8,children:s.jsxs(N,{className:"shadow-sm",children:[s.jsxs(N.Header,{className:"bg-light py-3 d-flex flex-row align-items-center justify-content-between",children:[s.jsx("h6",{className:"m-0 font-weight-bold",children:"Purchase Order Volume Trends"}),s.jsxs(n,{children:[s.jsx(n.Toggle,{variant:"link",id:"dropdown-trend-options",className:"no-arrow",children:s.jsx("i",{className:"bi bi-three-dots-vertical"})}),s.jsxs(n.Menu,{align:"end",children:[s.jsxs(n.Item,{children:[s.jsx("i",{className:"bi bi-download me-2"})," Export as Image"]}),s.jsxs(n.Item,{children:[s.jsx("i",{className:"bi bi-file-earmark-excel me-2"})," Export Data"]}),s.jsxs(n.Item,{onClick:P,children:[s.jsx("i",{className:"bi bi-arrow-repeat me-2"})," Refresh"]})]})]})]}),s.jsx(N.Body,{children:s.jsx("div",{className:"chart-area",style:{height:"320px"},children:s.jsx(lr,{data:M,height:320,width:100})})})]})}),s.jsx(p,{lg:4,children:s.jsxs(N,{className:"shadow-sm",children:[s.jsxs(N.Header,{className:"bg-light py-3 d-flex flex-row align-items-center justify-content-between",children:[s.jsx("h6",{className:"m-0 font-weight-bold",children:"Status Distribution"}),s.jsxs(n,{children:[s.jsx(n.Toggle,{variant:"link",id:"dropdown-distribution-options",className:"no-arrow",children:s.jsx("i",{className:"bi bi-three-dots-vertical"})}),s.jsxs(n.Menu,{align:"end",children:[s.jsxs(n.Item,{children:[s.jsx("i",{className:"bi bi-download me-2"})," Export as Image"]}),s.jsxs(n.Item,{children:[s.jsx("i",{className:"bi bi-file-earmark-excel me-2"})," Export Data"]})]})]})]}),s.jsx(N.Body,{children:s.jsx("div",{className:"chart-pie",children:s.jsx("div",{style:{height:"350px"},children:s.jsx(or,{data:A,height:350})})})})]})})]}),s.jsxs(x,{className:"g-3 mb-4",children:[s.jsx(p,{md:6,children:s.jsxs(N,{className:"shadow-sm h-100",children:[s.jsxs(N.Header,{className:"bg-light py-3 d-flex flex-row align-items-center justify-content-between",children:[s.jsx("h6",{className:"m-0 font-weight-bold",children:"Top Suppliers by Volume"}),s.jsxs(n,{children:[s.jsx(n.Toggle,{variant:"link",id:"dropdown-suppliers-options",className:"no-arrow",children:s.jsx("i",{className:"bi bi-three-dots-vertical"})}),s.jsx(n.Menu,{align:"end",children:s.jsxs(n.Item,{children:[s.jsx("i",{className:"bi bi-download me-2"})," Export to Excel"]})})]})]}),s.jsx(N.Body,{children:s.jsx("div",{className:"table-responsive",children:s.jsxs("table",{className:"table table-bordered",children:[s.jsx("thead",{className:"table-light",children:s.jsxs("tr",{children:[s.jsx("th",{children:"Supplier"}),s.jsx("th",{children:"POs"}),s.jsx("th",{children:"Value"}),s.jsx("th",{children:"On-Time %"})]})}),s.jsx("tbody",{children:((null==a?void 0:a.topBuyers)||[]).map(((e,t)=>s.jsxs("tr",{children:[s.jsx("td",{children:e.name}),s.jsx("td",{children:R(e.count)}),s.jsx("td",{children:B(e.totalValue)}),s.jsxs("td",{children:[e.onTimePercentage,"%"]})]},t)))})]})})})]})}),s.jsx(p,{md:6,children:s.jsxs(N,{className:"shadow-sm h-100",children:[s.jsxs(N.Header,{className:"bg-light py-3 d-flex flex-row align-items-center justify-content-between",children:[s.jsx("h6",{className:"m-0 font-weight-bold",children:"Processing Time by Status"}),s.jsxs(n,{children:[s.jsx(n.Toggle,{variant:"link",id:"dropdown-time-options",className:"no-arrow",children:s.jsx("i",{className:"bi bi-three-dots-vertical"})}),s.jsx(n.Menu,{align:"end",children:s.jsxs(n.Item,{children:[s.jsx("i",{className:"bi bi-download me-2"})," Export to Excel"]})})]})]}),s.jsx(N.Body,{children:s.jsx("div",{style:{height:"300px"},children:s.jsx(cr,{data:L,horizontal:!0})})})]})})]}),s.jsxs(N,{className:"shadow-sm mb-4",children:[s.jsxs(N.Header,{className:"bg-light py-3 d-flex justify-content-between align-items-center",children:[s.jsx("h6",{className:"m-0 font-weight-bold",children:"Predictive Analytics"}),s.jsx("div",{className:"badge bg-info",children:"Beta Feature"})]}),s.jsxs(N.Body,{children:[s.jsxs(x,{className:"g-3",children:[s.jsx(p,{md:4,children:s.jsx(N,{className:"border-0 shadow-sm h-100",children:s.jsxs(N.Body,{className:"text-center p-4",children:[s.jsx("div",{className:"display-6 text-primary mb-3",children:s.jsx("i",{className:"bi bi-calendar-check"})}),s.jsx("h5",{children:"Delivery Time Forecasting"}),s.jsx("p",{className:"text-muted",children:"Predict delivery times based on historical data, supplier performance, and seasonal patterns."})]})})}),s.jsx(p,{md:4,children:s.jsx(N,{className:"border-0 shadow-sm h-100",children:s.jsxs(N.Body,{className:"text-center p-4",children:[s.jsx("div",{className:"display-6 text-primary mb-3",children:s.jsx("i",{className:"bi bi-people"})}),s.jsx("h5",{children:"Capacity Planning"}),s.jsx("p",{className:"text-muted",children:"Project future PO volumes and resource requirements based on historical trends and business factors."})]})})}),s.jsx(p,{md:4,children:s.jsx(N,{className:"border-0 shadow-sm h-100",children:s.jsxs(N.Body,{className:"text-center p-4",children:[s.jsx("div",{className:"display-6 text-primary mb-3",children:s.jsx("i",{className:"bi bi-shield-check"})}),s.jsx("h5",{children:"Risk Assessment"}),s.jsx("p",{className:"text-muted",children:"Identify potential issues in the PO lifecycle and provide proactive alerts for at-risk orders."})]})})})]}),s.jsxs(N,{className:"mt-4 shadow-sm",children:[s.jsx(N.Header,{className:"py-3",children:s.jsx("h6",{className:"m-0 fw-bold",children:"Delivery Time Forecasting"})}),s.jsxs(N.Body,{children:[s.jsx("p",{className:"text-muted mb-3",children:"Based on historical data patterns, here's the predicted average delivery time for the next 14 days. The shaded area represents the confidence interval of the predictions."}),s.jsx("div",{style:{height:"400px"},children:s.jsx(ur,{...F,xAxisLabel:"Date",yAxisLabel:"Days to Deliver"})})]})]})]})]})]});var X},mr=()=>s.jsx(r,{className:"py-5",children:s.jsx(x,{className:"justify-content-center",children:s.jsx(p,{md:8,lg:6,children:s.jsx(N,{className:"shadow-sm border-0 text-center",children:s.jsxs(N.Body,{className:"p-5",children:[s.jsx("div",{className:"display-1 text-muted mb-4",children:s.jsx("i",{className:"bi bi-map"})}),s.jsx("h1",{className:"mb-3",children:"404 - Page Not Found"}),s.jsx("p",{className:"lead mb-4 text-muted",children:"Oops! The page you're looking for doesn't exist or has been moved."}),s.jsx("div",{className:"mb-4",children:s.jsxs(x,{className:"justify-content-center g-3",children:[s.jsx(p,{xs:12,sm:"auto",children:s.jsxs(d,{variant:"primary",className:"w-100",children:[s.jsx("i",{className:"bi bi-house-door me-2"}),s.jsx(i,{to:"/",className:"text-white text-decoration-none",children:"Go to Dashboard"})]})}),s.jsx(p,{xs:12,sm:"auto",children:s.jsxs(d,{variant:"outline-secondary",className:"w-100",onClick:()=>window.history.back(),children:[s.jsx("i",{className:"bi bi-arrow-left me-2"}),"Go Back"]})})]})}),s.jsxs("div",{className:"text-center mt-4",children:[s.jsx("h6",{className:"mb-3",children:"Need Help?"}),s.jsxs("div",{className:"d-flex justify-content-center gap-3",children:[s.jsxs(i,{to:"/help",className:"text-decoration-none",children:[s.jsx("i",{className:"bi bi-question-circle me-1"}),"Help Center"]}),s.jsxs(i,{to:"/support",className:"text-decoration-none",children:[s.jsx("i",{className:"bi bi-headset me-1"}),"Contact Support"]})]})]})]})})})})}),xr=()=>{const e=D();return A.useEffect((()=>{za(e)}),[e]),h.useEffect((()=>{console.log("App component mounted with routes for PO Details")}),[]),s.jsxs("div",{className:"app-container d-flex flex-column min-vh-100",children:[s.jsx(K,{}),s.jsxs("div",{className:"app-content d-flex flex-grow-1",children:[s.jsx(X,{}),s.jsx("main",{className:"flex-grow-1 p-3 p-md-4 overflow-auto",children:s.jsx(r,{fluid:!0,children:s.jsxs(L,{children:[s.jsx(F,{path:"/",element:s.jsx(R,{to:"/dashboard",replace:!0})}),s.jsx(F,{path:"/dashboard",element:s.jsx(pt,{})}),s.jsx(F,{path:"/purchase-orders",element:s.jsx(gt,{})}),s.jsx(F,{path:"/purchase-orders/create",element:s.jsx(Xa,{})}),s.jsx(F,{path:"/purchase-orders/:poNumber",element:s.jsx(h.Suspense,{fallback:s.jsx("div",{className:"text-center p-5",children:"Loading purchase order details..."}),children:s.jsx(Ka,{})})}),s.jsx(F,{path:"/planning-hub",element:s.jsx(nr,{})}),s.jsx(F,{path:"/metrics",element:s.jsx(hr,{})}),s.jsx(F,{path:"*",element:s.jsx(mr,{})})]})})})]}),s.jsx(Z,{})]})};B.createRoot(document.getElementById("root")).render(s.jsx(A.StrictMode,{children:s.jsx(q,{store:mt,children:s.jsx(V,{children:s.jsx(xr,{})})})}));export{J as A,er as D,qe as L,Le as P,Ja as _,ft as a,Lt as d,ks as f};
//# sourceMappingURL=index-CzAoGVZ8.js.map
